// =============================================================================
// PAC-MAN - Vec2 Value Type (Optional utility, not currently used)
// =============================================================================
// This file is kept for reference but the main game uses simple Integer
// coordinates directly for better performance and clarity.
// =============================================================================

module vec2;

bind "./config";

// =============================================================================
// VEC2 VALUE TYPE - 2D integer vector
// =============================================================================

value Vec2 {
    expose Integer x;
    expose Integer y;

    expose func init(xVal: Integer, yVal: Integer) {
        x = xVal;
        y = yVal;
    }

    expose func set(xVal: Integer, yVal: Integer) {
        x = xVal;
        y = yVal;
    }

    expose func add(other: Vec2) -> Vec2 {
        return makeVec2(x + other.x, y + other.y);
    }

    expose func sub(other: Vec2) -> Vec2 {
        return makeVec2(x - other.x, y - other.y);
    }

    expose func scale(factor: Integer) -> Vec2 {
        return makeVec2(x * factor, y * factor);
    }

    expose func equals(other: Vec2) -> Boolean {
        return x == other.x && y == other.y;
    }

    expose func manhattanDistance(other: Vec2) -> Integer {
        var dx = x - other.x;
        var dy = y - other.y;
        if dx < 0 { dx = 0 - dx; }
        if dy < 0 { dy = 0 - dy; }
        return dx + dy;
    }
}

// =============================================================================
// FACTORY FUNCTIONS
// =============================================================================

func makeVec2(xVal: Integer, yVal: Integer) -> Vec2 {
    var v = new Vec2(xVal, yVal);
    return v;
}

func zeroVec2() -> Vec2 {
    return makeVec2(0, 0);
}

func directionToVec2(dir: Integer) -> Vec2 {
    if dir == config.DIR_UP {
        return makeVec2(0, -1);
    } else if dir == config.DIR_DOWN {
        return makeVec2(0, 1);
    } else if dir == config.DIR_LEFT {
        return makeVec2(-1, 0);
    } else if dir == config.DIR_RIGHT {
        return makeVec2(1, 0);
    }
    return makeVec2(0, 0);
}

