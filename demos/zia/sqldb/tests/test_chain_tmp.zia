module test_chain_tmp;
bind Terminal = Viper.Terminal;
bind Fmt = Viper.Fmt;
bind "../executor";
bind "../types";
func main() {
    var exec = new Executor();
    exec.init();
    exec.executeSql("CREATE TABLE t1 (x INTEGER)");
    exec.executeSql("INSERT INTO t1 VALUES (1)");
    exec.executeSql("CREATE TABLE t2 (x INTEGER)");
    exec.executeSql("INSERT INTO t2 VALUES (2)");
    exec.executeSql("CREATE TABLE t3 (x INTEGER)");
    exec.executeSql("INSERT INTO t3 VALUES (3)");
    var r = exec.executeSql("SELECT x FROM t1 UNION ALL SELECT x FROM t2 UNION ALL SELECT x FROM t3");
    Terminal.Say("Success: " + Fmt.Bool(r.success));
    Terminal.Say("Rows: " + Fmt.Int(r.rowCount()));
    var i = 0;
    while i < r.rowCount() {
        Terminal.Say("  " + r.getRow(i).getValue(0).toString());
        i = i + 1;
    }
}
