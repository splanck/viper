// File: src/il/core/Opcode.def
// Purpose: Declarative list of IL opcodes and metadata consumed by generators.
// Notes: Each entry expands differently depending on IL_OPCODE definition.
// Keep entries in sync with docs/il-spec.md opcode table.
#ifndef IL_OPCODE
#error "IL_OPCODE must be defined before including Opcode.def"
#endif

IL_OPCODE(Add, "add", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::Add)
IL_OPCODE(Sub, "sub", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::Sub)
IL_OPCODE(Mul, "mul", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::Mul)
IL_OPCODE(SDiv, "sdiv", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(UDiv, "udiv", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(SRem, "srem", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(URem, "urem", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(And, "and", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(Or, "or", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(Xor, "xor", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::Xor)
IL_OPCODE(Shl, "shl", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::Shl)
IL_OPCODE(LShr, "lshr", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(AShr, "ashr", ResultArity::One, TypeCategory::I64, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(FAdd, "fadd", ResultArity::One, TypeCategory::F64, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FAdd)
IL_OPCODE(FSub, "fsub", ResultArity::One, TypeCategory::F64, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FSub)
IL_OPCODE(FMul, "fmul", ResultArity::One, TypeCategory::F64, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FMul)
IL_OPCODE(FDiv, "fdiv", ResultArity::One, TypeCategory::F64, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FDiv)
IL_OPCODE(ICmpEq, "icmp_eq", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::ICmpEq)
IL_OPCODE(ICmpNe, "icmp_ne", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::ICmpNe)
IL_OPCODE(SCmpLT, "scmp_lt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::SCmpLT)
IL_OPCODE(SCmpLE, "scmp_le", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::SCmpLE)
IL_OPCODE(SCmpGT, "scmp_gt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::SCmpGT)
IL_OPCODE(SCmpGE, "scmp_ge", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::SCmpGE)
IL_OPCODE(UCmpLT, "ucmp_lt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(UCmpLE, "ucmp_le", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(UCmpGT, "ucmp_gt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(UCmpGE, "ucmp_ge", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::I64, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(FCmpEQ, "fcmp_eq", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpEQ)
IL_OPCODE(FCmpNE, "fcmp_ne", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpNE)
IL_OPCODE(FCmpLT, "fcmp_lt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpLT)
IL_OPCODE(FCmpLE, "fcmp_le", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpLE)
IL_OPCODE(FCmpGT, "fcmp_gt", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpGT)
IL_OPCODE(FCmpGE, "fcmp_ge", ResultArity::One, TypeCategory::I1, 2, 2, TypeCategory::F64, TypeCategory::F64, TypeCategory::None, false, 0, false, VMDispatch::FCmpGE)
IL_OPCODE(Sitofp, "sitofp", ResultArity::One, TypeCategory::F64, 1, 1, TypeCategory::I64, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::Sitofp)
IL_OPCODE(Fptosi, "fptosi", ResultArity::One, TypeCategory::I64, 1, 1, TypeCategory::F64, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::Fptosi)
IL_OPCODE(Zext1, "zext1", ResultArity::One, TypeCategory::I64, 1, 1, TypeCategory::I1, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::TruncOrZext1)
IL_OPCODE(Trunc1, "trunc1", ResultArity::One, TypeCategory::I1, 1, 1, TypeCategory::I64, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::TruncOrZext1)
IL_OPCODE(Alloca, "alloca", ResultArity::One, TypeCategory::Ptr, 1, 1, TypeCategory::I64, TypeCategory::None, TypeCategory::None, true, 0, false, VMDispatch::Alloca)
IL_OPCODE(GEP, "gep", ResultArity::One, TypeCategory::Ptr, 2, 2, TypeCategory::Ptr, TypeCategory::I64, TypeCategory::None, false, 0, false, VMDispatch::GEP)
IL_OPCODE(Load, "load", ResultArity::One, TypeCategory::InstrType, 1, 1, TypeCategory::Ptr, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::Load)
IL_OPCODE(Store, "store", ResultArity::None, TypeCategory::None, 2, 2, TypeCategory::Ptr, TypeCategory::InstrType, TypeCategory::None, true, 0, false, VMDispatch::Store)
IL_OPCODE(AddrOf, "addr_of", ResultArity::One, TypeCategory::Ptr, 1, 1, TypeCategory::Ptr, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::AddrOf)
IL_OPCODE(ConstStr, "const_str", ResultArity::One, TypeCategory::Str, 1, 1, TypeCategory::Ptr, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::ConstStr)
IL_OPCODE(ConstNull, "const_null", ResultArity::One, TypeCategory::Ptr, 0, 0, TypeCategory::None, TypeCategory::None, TypeCategory::None, false, 0, false, VMDispatch::None)
IL_OPCODE(Call, "call", ResultArity::Optional, TypeCategory::Dynamic, 0, kVariadicOperandCount, TypeCategory::Any, TypeCategory::Any, TypeCategory::Any, true, 0, false, VMDispatch::Call)
IL_OPCODE(Br, "br", ResultArity::None, TypeCategory::None, 0, 0, TypeCategory::None, TypeCategory::None, TypeCategory::None, true, 1, true, VMDispatch::Br)
IL_OPCODE(CBr, "cbr", ResultArity::None, TypeCategory::None, 1, 1, TypeCategory::I1, TypeCategory::None, TypeCategory::None, true, 2, true, VMDispatch::CBr)
IL_OPCODE(Ret, "ret", ResultArity::None, TypeCategory::None, 0, 1, TypeCategory::Any, TypeCategory::None, TypeCategory::None, true, 0, true, VMDispatch::Ret)
IL_OPCODE(Trap, "trap", ResultArity::None, TypeCategory::None, 0, 0, TypeCategory::None, TypeCategory::None, TypeCategory::None, true, 0, true, VMDispatch::Trap)

#undef IL_OPCODE
