//===----------------------------------------------------------------------===//
//
// Part of the Viper project, under the GNU GPL v3.
// See LICENSE for license information.
//
//===----------------------------------------------------------------------===//
//
// TABLE OF CONTENTS
//
// This file defines all Viper runtime functions and classes.
// Sections are organized alphabetically by namespace.
//
//   BITS
//   COLLECTIONS - BAG
//   COLLECTIONS - BYTES
//   COLLECTIONS - LIST
//   COLLECTIONS - MAP
//   COLLECTIONS - QUEUE
//   COLLECTIONS - RING
//   COLLECTIONS - SEQ
//   COLLECTIONS - STACK
//   COLLECTIONS - TREEMAP
//   CRYPTO - HASH
//   DATETIME
//   DIAGNOSTICS - ASSERT
//   DIAGNOSTICS - STOPWATCH
//   DIAGNOSTICS - TRAP
//   ENVIRONMENT
//   EXEC
//   GRAPHICS - CANVAS
//   GRAPHICS - COLOR
//   GRAPHICS - PIXELS
//   IO - BINFILE
//   IO - LINEREADER
//   IO - LINEWRITER
//   IO - DIRECTORY
//   IO - FILE
//   IO - PATH
//   MACHINE
//   MATH FUNCTIONS
//   OBJECT (BASE CLASS)
//   RANDOM
//   STRING FUNCTIONS
//   TERMINAL I/O
//   TEXT - CODEC
//   TEXT - CSV
//   TEXT - GUID
//   TEXT - STRINGBUILDER
//   THREADS
//   TIME - CLOCK
//   TYPE CONVERSION
//   VEC2
//   VEC3
//
//   RUNTIME CLASSES (RT_CLASS definitions)
//
//===----------------------------------------------------------------------===//
//
// Syntax:
//   RT_FUNC(id, c_symbol, "canonical", "signature")
//   RT_ALIAS("canonical_alias", target_id)
//   RT_CLASS_BEGIN("name", type_id, "layout", ctor_id)
//     RT_PROP("name", "type", getter_id, setter_id_or_none)
//     RT_METHOD("name", "signature", target_id)
//   RT_CLASS_END()
//
// Type abbreviations:
//   void - no return value
//   i1   - boolean (1-bit integer)
//   i8   - 8-bit signed integer
//   i16  - 16-bit signed integer
//   i32  - 32-bit signed integer
//   i64  - 64-bit signed integer
//   f32  - 32-bit float (single)
//   f64  - 64-bit float (double)
//   str  - string
//   obj  - object reference
//   ptr  - raw pointer
//
// Notes:
//   - id must be unique C++ identifier
//   - c_symbol is the C runtime function name (rt_*)
//   - canonical is the Viper.* namespace name
//   - For class methods, signature omits the receiver (arg0)
//
//===----------------------------------------------------------------------===//

//=============================================================================
// BITS
//=============================================================================

RT_FUNC(BitsAnd,    rt_bits_and,    "Viper.Bits.And",    "i64(i64,i64)")
RT_FUNC(BitsClear,  rt_bits_clear,  "Viper.Bits.Clear",  "i64(i64,i64)")
RT_FUNC(BitsCount,  rt_bits_count,  "Viper.Bits.Count",  "i64(i64)")
RT_FUNC(BitsFlip,   rt_bits_flip,   "Viper.Bits.Flip",   "i64(i64)")
RT_FUNC(BitsGet,    rt_bits_get,    "Viper.Bits.Get",    "i1(i64,i64)")
RT_FUNC(BitsLeadZ,  rt_bits_leadz,  "Viper.Bits.LeadZ",  "i64(i64)")
RT_FUNC(BitsNot,    rt_bits_not,    "Viper.Bits.Not",    "i64(i64)")
RT_FUNC(BitsOr,     rt_bits_or,     "Viper.Bits.Or",     "i64(i64,i64)")
RT_FUNC(BitsRotl,   rt_bits_rotl,   "Viper.Bits.Rotl",   "i64(i64,i64)")
RT_FUNC(BitsRotr,   rt_bits_rotr,   "Viper.Bits.Rotr",   "i64(i64,i64)")
RT_FUNC(BitsSet,    rt_bits_set,    "Viper.Bits.Set",    "i64(i64,i64)")
RT_FUNC(BitsShl,    rt_bits_shl,    "Viper.Bits.Shl",    "i64(i64,i64)")
RT_FUNC(BitsShr,    rt_bits_shr,    "Viper.Bits.Shr",    "i64(i64,i64)")
RT_FUNC(BitsSwap,   rt_bits_swap,   "Viper.Bits.Swap",   "i64(i64)")
RT_FUNC(BitsToggle, rt_bits_toggle, "Viper.Bits.Toggle", "i64(i64,i64)")
RT_FUNC(BitsTrailZ, rt_bits_trailz, "Viper.Bits.TrailZ", "i64(i64)")
RT_FUNC(BitsUshr,   rt_bits_ushr,   "Viper.Bits.Ushr",   "i64(i64,i64)")
RT_FUNC(BitsXor,    rt_bits_xor,    "Viper.Bits.Xor",    "i64(i64,i64)")

//=============================================================================
// BOX (BOXING/UNBOXING PRIMITIVES)
//=============================================================================

RT_FUNC(BoxI64,     rt_box_i64,     "Viper.Box.I64",     "obj(i64)")
RT_FUNC(BoxF64,     rt_box_f64,     "Viper.Box.F64",     "obj(f64)")
RT_FUNC(BoxI1,      rt_box_i1,      "Viper.Box.I1",      "obj(i64)")
RT_FUNC(BoxStr,     rt_box_str,     "Viper.Box.Str",     "obj(str)")
RT_FUNC(UnboxI64,   rt_unbox_i64,   "Viper.Box.ToI64",   "i64(obj)")
RT_FUNC(UnboxF64,   rt_unbox_f64,   "Viper.Box.ToF64",   "f64(obj)")
RT_FUNC(UnboxI1,    rt_unbox_i1,    "Viper.Box.ToI1",    "i64(obj)")
RT_FUNC(UnboxStr,   rt_unbox_str,   "Viper.Box.ToStr",   "str(obj)")
RT_FUNC(BoxType,    rt_box_type,    "Viper.Box.Type",    "i64(obj)")
RT_FUNC(BoxEqI64,   rt_box_eq_i64,  "Viper.Box.EqI64",   "i64(obj,i64)")
RT_FUNC(BoxEqF64,   rt_box_eq_f64,  "Viper.Box.EqF64",   "i64(obj,f64)")
RT_FUNC(BoxEqStr,   rt_box_eq_str,  "Viper.Box.EqStr",   "i64(obj,str)")

//=============================================================================
// COLLECTIONS - BYTES
//=============================================================================

RT_FUNC(BytesClone,   rt_bytes_clone,    "Viper.Collections.Bytes.Clone",     "obj(obj)")
RT_FUNC(BytesCopy,    rt_bytes_copy,     "Viper.Collections.Bytes.Copy",      "void(obj,i64,obj,i64,i64)")
RT_FUNC(BytesFill,    rt_bytes_fill,     "Viper.Collections.Bytes.Fill",      "void(obj,i64)")
RT_FUNC(BytesFind,    rt_bytes_find,     "Viper.Collections.Bytes.Find",      "i64(obj,i64)")
RT_FUNC(BytesFromBase64, rt_bytes_from_base64, "Viper.Collections.Bytes.FromBase64", "obj(str)")
RT_FUNC(BytesFromHex, rt_bytes_from_hex, "Viper.Collections.Bytes.FromHex",   "obj(str)")
RT_FUNC(BytesFromStr, rt_bytes_from_str, "Viper.Collections.Bytes.FromStr",   "obj(str)")
RT_FUNC(BytesGet,     rt_bytes_get,      "Viper.Collections.Bytes.Get",       "i64(obj,i64)")
RT_FUNC(BytesLen,     rt_bytes_len,      "Viper.Collections.Bytes.get_Len",   "i64(obj)")
RT_FUNC(BytesNew,     rt_bytes_new,      "Viper.Collections.Bytes.New",       "obj(i64)")
RT_FUNC(BytesSet,     rt_bytes_set,      "Viper.Collections.Bytes.Set",       "void(obj,i64,i64)")
RT_FUNC(BytesSlice,   rt_bytes_slice,    "Viper.Collections.Bytes.Slice",     "obj(obj,i64,i64)")
RT_FUNC(BytesToBase64,   rt_bytes_to_base64,   "Viper.Collections.Bytes.ToBase64",   "str(obj)")
RT_FUNC(BytesToHex,   rt_bytes_to_hex,   "Viper.Collections.Bytes.ToHex",     "str(obj)")
RT_FUNC(BytesToStr,   rt_bytes_to_str,   "Viper.Collections.Bytes.ToStr",     "str(obj)")

//=============================================================================
// COLLECTIONS - BAG
//=============================================================================

RT_FUNC(BagClear,   rt_bag_clear,    "Viper.Collections.Bag.Clear",       "void(obj)")
RT_FUNC(BagCommon,  rt_bag_common,   "Viper.Collections.Bag.Common",      "obj(obj,obj)")
RT_FUNC(BagDiff,    rt_bag_diff,     "Viper.Collections.Bag.Diff",        "obj(obj,obj)")
RT_FUNC(BagDrop,    rt_bag_drop,     "Viper.Collections.Bag.Drop",        "i1(obj,str)")
RT_FUNC(BagHas,     rt_bag_has,      "Viper.Collections.Bag.Has",         "i1(obj,str)")
RT_FUNC(BagIsEmpty, rt_bag_is_empty, "Viper.Collections.Bag.get_IsEmpty", "i1(obj)")
RT_FUNC(BagItems,   rt_bag_items,    "Viper.Collections.Bag.Items",       "obj(obj)")
RT_FUNC(BagLen,     rt_bag_len,      "Viper.Collections.Bag.get_Len",     "i64(obj)")
RT_FUNC(BagMerge,   rt_bag_merge,    "Viper.Collections.Bag.Merge",       "obj(obj,obj)")
RT_FUNC(BagNew,     rt_bag_new,      "Viper.Collections.Bag.New",         "obj()")
RT_FUNC(BagPut,     rt_bag_put,      "Viper.Collections.Bag.Put",         "i1(obj,str)")

//=============================================================================
// COLLECTIONS - LIST
//=============================================================================

RT_FUNC(ListAdd,      rt_list_add,       "Viper.Collections.List.Add",        "void(obj,obj)")
RT_FUNC(ListClear,    rt_list_clear,     "Viper.Collections.List.Clear",      "void(obj)")
RT_FUNC(ListFind,     rt_list_find,      "Viper.Collections.List.Find",       "i64(obj,obj)")
RT_FUNC(ListGetCount, rt_list_get_count, "Viper.Collections.List.get_Count",  "i64(obj)")
RT_FUNC(ListGetItem,  rt_list_get_item,  "Viper.Collections.List.get_Item",   "obj(obj,i64)")
RT_FUNC(ListHas,      rt_list_has,       "Viper.Collections.List.Has",        "i1(obj,obj)")
RT_FUNC(ListInsert,   rt_list_insert,    "Viper.Collections.List.Insert",     "void(obj,i64,obj)")
RT_FUNC(ListNew,      rt_ns_list_new,    "Viper.Collections.List.New",        "obj()")
RT_FUNC(ListRemove,   rt_list_remove,    "Viper.Collections.List.Remove",     "i1(obj,obj)")
RT_FUNC(ListRemoveAt, rt_list_remove_at, "Viper.Collections.List.RemoveAt",   "void(obj,i64)")
RT_FUNC(ListSetItem,  rt_list_set_item,  "Viper.Collections.List.set_Item",   "void(obj,i64,obj)")

//=============================================================================
// COLLECTIONS - MAP
//=============================================================================

RT_FUNC(MapClear,   rt_map_clear,    "Viper.Collections.Map.Clear",       "void(obj)")
RT_FUNC(MapGet,     rt_map_get,      "Viper.Collections.Map.Get",         "obj(obj,str)")
RT_FUNC(MapGetOr,        rt_map_get_or,         "Viper.Collections.Map.GetOr",        "obj(obj,str,obj)")
RT_FUNC(MapHas,     rt_map_has,      "Viper.Collections.Map.Has",         "i1(obj,str)")
RT_FUNC(MapIsEmpty, rt_map_is_empty, "Viper.Collections.Map.get_IsEmpty", "i1(obj)")
RT_FUNC(MapKeys,    rt_map_keys,     "Viper.Collections.Map.Keys",        "obj(obj)")
RT_FUNC(MapLen,     rt_map_len,      "Viper.Collections.Map.get_Len",     "i64(obj)")
RT_FUNC(MapNew,     rt_map_new,      "Viper.Collections.Map.New",         "obj()")
RT_FUNC(MapRemove,  rt_map_remove,   "Viper.Collections.Map.Remove",      "i1(obj,str)")
RT_FUNC(MapSet,     rt_map_set,      "Viper.Collections.Map.Set",         "void(obj,str,obj)")
RT_FUNC(MapSetIfMissing, rt_map_set_if_missing, "Viper.Collections.Map.SetIfMissing", "i1(obj,str,obj)")
RT_FUNC(MapValues,  rt_map_values,   "Viper.Collections.Map.Values",      "obj(obj)")

//=============================================================================
// COLLECTIONS - QUEUE
//=============================================================================

RT_FUNC(QueueAdd,     rt_queue_add,      "Viper.Collections.Queue.Add",         "void(obj,obj)")
RT_FUNC(QueueClear,   rt_queue_clear,    "Viper.Collections.Queue.Clear",       "void(obj)")
RT_FUNC(QueueIsEmpty, rt_queue_is_empty, "Viper.Collections.Queue.get_IsEmpty", "i1(obj)")
RT_FUNC(QueueLen,     rt_queue_len,      "Viper.Collections.Queue.get_Len",     "i64(obj)")
RT_FUNC(QueueNew,     rt_queue_new,      "Viper.Collections.Queue.New",         "obj()")
RT_FUNC(QueuePeek,    rt_queue_peek,     "Viper.Collections.Queue.Peek",        "obj(obj)")
RT_FUNC(QueueTake,    rt_queue_take,     "Viper.Collections.Queue.Take",        "obj(obj)")

//=============================================================================
// COLLECTIONS - HEAP (Priority Queue)
//=============================================================================

RT_FUNC(HeapClear,    rt_pqueue_clear,     "Viper.Collections.Heap.Clear",        "void(obj)")
RT_FUNC(HeapIsEmpty,  rt_pqueue_is_empty,  "Viper.Collections.Heap.get_IsEmpty",  "i1(obj)")
RT_FUNC(HeapIsMax,    rt_pqueue_is_max,    "Viper.Collections.Heap.get_IsMax",    "i1(obj)")
RT_FUNC(HeapLen,      rt_pqueue_len,       "Viper.Collections.Heap.get_Len",      "i64(obj)")
RT_FUNC(HeapNew,      rt_pqueue_new,       "Viper.Collections.Heap.New",          "obj()")
RT_FUNC(HeapNewMax,   rt_pqueue_new_max,   "Viper.Collections.Heap.NewMax",       "obj(i1)")
RT_FUNC(HeapPeek,     rt_pqueue_peek,      "Viper.Collections.Heap.Peek",         "obj(obj)")
RT_FUNC(HeapPop,      rt_pqueue_pop,       "Viper.Collections.Heap.Pop",          "obj(obj)")
RT_FUNC(HeapPush,     rt_pqueue_push,      "Viper.Collections.Heap.Push",         "void(obj,i64,obj)")
RT_FUNC(HeapToSeq,    rt_pqueue_to_seq,    "Viper.Collections.Heap.ToSeq",        "obj(obj)")
RT_FUNC(HeapTryPeek,  rt_pqueue_try_peek,  "Viper.Collections.Heap.TryPeek",      "obj(obj)")
RT_FUNC(HeapTryPop,   rt_pqueue_try_pop,   "Viper.Collections.Heap.TryPop",       "obj(obj)")

//=============================================================================
// COLLECTIONS - RING
//=============================================================================

RT_FUNC(RingCap,     rt_ring_cap,      "Viper.Collections.Ring.get_Cap",     "i64(obj)")
RT_FUNC(RingClear,   rt_ring_clear,    "Viper.Collections.Ring.Clear",       "void(obj)")
RT_FUNC(RingGet,     rt_ring_get,      "Viper.Collections.Ring.Get",         "obj(obj,i64)")
RT_FUNC(RingIsEmpty, rt_ring_is_empty, "Viper.Collections.Ring.get_IsEmpty", "i1(obj)")
RT_FUNC(RingIsFull,  rt_ring_is_full,  "Viper.Collections.Ring.get_IsFull",  "i1(obj)")
RT_FUNC(RingLen,     rt_ring_len,      "Viper.Collections.Ring.get_Len",     "i64(obj)")
RT_FUNC(RingNew,     rt_ring_new,      "Viper.Collections.Ring.New",         "obj(i64)")
RT_FUNC(RingPeek,    rt_ring_peek,     "Viper.Collections.Ring.Peek",        "obj(obj)")
RT_FUNC(RingPop,     rt_ring_pop,      "Viper.Collections.Ring.Pop",         "obj(obj)")
RT_FUNC(RingPush,    rt_ring_push,     "Viper.Collections.Ring.Push",        "void(obj,obj)")

//=============================================================================
// COLLECTIONS - SEQ
//=============================================================================

RT_FUNC(SeqClear,        rt_seq_clear,         "Viper.Collections.Seq.Clear",        "void(obj)")
RT_FUNC(SeqClone,        rt_seq_clone,         "Viper.Collections.Seq.Clone",        "obj(obj)")
RT_FUNC(SeqCap,          rt_seq_cap,           "Viper.Collections.Seq.get_Cap",      "i64(obj)")
RT_FUNC(SeqFind,         rt_seq_find,          "Viper.Collections.Seq.Find",         "i64(obj,obj)")
RT_FUNC(SeqFirst,        rt_seq_first,         "Viper.Collections.Seq.First",        "obj(obj)")
RT_FUNC(SeqGet,          rt_seq_get,           "Viper.Collections.Seq.Get",          "obj(obj,i64)")
RT_FUNC(SeqHas,          rt_seq_has,           "Viper.Collections.Seq.Has",          "i1(obj,obj)")
RT_FUNC(SeqInsert,       rt_seq_insert,        "Viper.Collections.Seq.Insert",       "void(obj,i64,obj)")
RT_FUNC(SeqIsEmpty,      rt_seq_is_empty,      "Viper.Collections.Seq.get_IsEmpty",  "i1(obj)")
RT_FUNC(SeqLast,         rt_seq_last,          "Viper.Collections.Seq.Last",         "obj(obj)")
RT_FUNC(SeqLen,          rt_seq_len,           "Viper.Collections.Seq.get_Len",      "i64(obj)")
RT_FUNC(SeqNew,          rt_seq_new,           "Viper.Collections.Seq.New",          "obj()")
RT_FUNC(SeqPeek,         rt_seq_peek,          "Viper.Collections.Seq.Peek",         "obj(obj)")
RT_FUNC(SeqPop,          rt_seq_pop,           "Viper.Collections.Seq.Pop",          "obj(obj)")
RT_FUNC(SeqPush,         rt_seq_push,          "Viper.Collections.Seq.Push",         "void(obj,obj)")
RT_FUNC(SeqPushAll,      rt_seq_push_all,      "Viper.Collections.Seq.PushAll",      "void(obj,obj)")
RT_FUNC(SeqRemove,       rt_seq_remove,        "Viper.Collections.Seq.Remove",       "obj(obj,i64)")
RT_FUNC(SeqReverse,      rt_seq_reverse,       "Viper.Collections.Seq.Reverse",      "void(obj)")
RT_FUNC(SeqSet,          rt_seq_set,           "Viper.Collections.Seq.Set",          "void(obj,i64,obj)")
RT_FUNC(SeqShuffle,      rt_seq_shuffle,       "Viper.Collections.Seq.Shuffle",      "void(obj)")
RT_FUNC(SeqSlice,        rt_seq_slice,         "Viper.Collections.Seq.Slice",        "obj(obj,i64,i64)")
RT_FUNC(SeqWithCapacity, rt_seq_with_capacity, "Viper.Collections.Seq.WithCapacity", "obj(i64)")

//=============================================================================
// COLLECTIONS - STACK
//=============================================================================

RT_FUNC(StackClear,   rt_stack_clear,    "Viper.Collections.Stack.Clear",       "void(obj)")
RT_FUNC(StackIsEmpty, rt_stack_is_empty, "Viper.Collections.Stack.get_IsEmpty", "i1(obj)")
RT_FUNC(StackLen,     rt_stack_len,      "Viper.Collections.Stack.get_Len",     "i64(obj)")
RT_FUNC(StackNew,     rt_stack_new,      "Viper.Collections.Stack.New",         "obj()")
RT_FUNC(StackPeek,    rt_stack_peek,     "Viper.Collections.Stack.Peek",        "obj(obj)")
RT_FUNC(StackPop,     rt_stack_pop,      "Viper.Collections.Stack.Pop",         "obj(obj)")
RT_FUNC(StackPush,    rt_stack_push,     "Viper.Collections.Stack.Push",        "void(obj,obj)")

//=============================================================================
// COLLECTIONS - TREEMAP
//=============================================================================

RT_FUNC(TreeMapNew,     rt_treemap_new,      "Viper.Collections.TreeMap.New",         "obj()")
RT_FUNC(TreeMapLen,     rt_treemap_len,      "Viper.Collections.TreeMap.get_Len",     "i64(obj)")
RT_FUNC(TreeMapIsEmpty, rt_treemap_is_empty, "Viper.Collections.TreeMap.get_IsEmpty", "i1(obj)")
RT_FUNC(TreeMapSet,     rt_treemap_set,      "Viper.Collections.TreeMap.Set",         "void(obj,str,obj)")
RT_FUNC(TreeMapGet,     rt_treemap_get,      "Viper.Collections.TreeMap.Get",         "obj(obj,str)")
RT_FUNC(TreeMapHas,     rt_treemap_has,      "Viper.Collections.TreeMap.Has",         "i1(obj,str)")
RT_FUNC(TreeMapDrop,    rt_treemap_drop,     "Viper.Collections.TreeMap.Drop",        "i1(obj,str)")
RT_FUNC(TreeMapClear,   rt_treemap_clear,    "Viper.Collections.TreeMap.Clear",       "void(obj)")
RT_FUNC(TreeMapKeys,    rt_treemap_keys,     "Viper.Collections.TreeMap.Keys",        "obj(obj)")
RT_FUNC(TreeMapValues,  rt_treemap_values,   "Viper.Collections.TreeMap.Values",      "obj(obj)")
RT_FUNC(TreeMapFirst,   rt_treemap_first,    "Viper.Collections.TreeMap.First",       "str(obj)")
RT_FUNC(TreeMapLast,    rt_treemap_last,     "Viper.Collections.TreeMap.Last",        "str(obj)")
RT_FUNC(TreeMapFloor,   rt_treemap_floor,    "Viper.Collections.TreeMap.Floor",       "str(obj,str)")
RT_FUNC(TreeMapCeil,    rt_treemap_ceil,     "Viper.Collections.TreeMap.Ceil",        "str(obj,str)")

//=============================================================================
// CRYPTO - HASH
//=============================================================================

RT_FUNC(HashCRC32,      rt_hash_crc32,       "Viper.Crypto.Hash.CRC32",      "i64(str)")
RT_FUNC(HashCRC32Bytes, rt_hash_crc32_bytes, "Viper.Crypto.Hash.CRC32Bytes", "i64(obj)")
RT_FUNC(HashMD5,        rt_hash_md5,         "Viper.Crypto.Hash.MD5",        "str(str)")
RT_FUNC(HashMD5Bytes,   rt_hash_md5_bytes,   "Viper.Crypto.Hash.MD5Bytes",   "str(obj)")
RT_FUNC(HashSHA1,       rt_hash_sha1,        "Viper.Crypto.Hash.SHA1",       "str(str)")
RT_FUNC(HashSHA1Bytes,  rt_hash_sha1_bytes,  "Viper.Crypto.Hash.SHA1Bytes",  "str(obj)")
RT_FUNC(HashSHA256,     rt_hash_sha256,      "Viper.Crypto.Hash.SHA256",     "str(str)")
RT_FUNC(HashSHA256Bytes,rt_hash_sha256_bytes,"Viper.Crypto.Hash.SHA256Bytes","str(obj)")

// HMAC functions
RT_FUNC(HashHmacMD5,        rt_hash_hmac_md5,         "Viper.Crypto.Hash.HmacMD5",        "str(str,str)")
RT_FUNC(HashHmacMD5Bytes,   rt_hash_hmac_md5_bytes,   "Viper.Crypto.Hash.HmacMD5Bytes",   "str(obj,obj)")
RT_FUNC(HashHmacSHA1,       rt_hash_hmac_sha1,        "Viper.Crypto.Hash.HmacSHA1",       "str(str,str)")
RT_FUNC(HashHmacSHA1Bytes,  rt_hash_hmac_sha1_bytes,  "Viper.Crypto.Hash.HmacSHA1Bytes",  "str(obj,obj)")
RT_FUNC(HashHmacSHA256,     rt_hash_hmac_sha256,      "Viper.Crypto.Hash.HmacSHA256",     "str(str,str)")
RT_FUNC(HashHmacSHA256Bytes,rt_hash_hmac_sha256_bytes,"Viper.Crypto.Hash.HmacSHA256Bytes","str(obj,obj)")

//=============================================================================
// CRYPTO - KEY DERIVATION
//=============================================================================

RT_FUNC(KeyDerivePbkdf2SHA256,    rt_keyderive_pbkdf2_sha256,     "Viper.Crypto.KeyDerive.Pbkdf2SHA256",    "obj(str,obj,i64,i64)")
RT_FUNC(KeyDerivePbkdf2SHA256Str, rt_keyderive_pbkdf2_sha256_str, "Viper.Crypto.KeyDerive.Pbkdf2SHA256Str", "str(str,obj,i64,i64)")

//=============================================================================
// CRYPTO - SECURE RANDOM
//=============================================================================

RT_FUNC(CryptoRandBytes, rt_crypto_rand_bytes, "Viper.Crypto.Rand.Bytes", "obj(i64)")
RT_FUNC(CryptoRandInt,   rt_crypto_rand_int,   "Viper.Crypto.Rand.Int",   "i64(i64,i64)")

//=============================================================================
// DATETIME
//=============================================================================

RT_FUNC(DateTimeAddDays,    rt_datetime_add_days,    "Viper.DateTime.AddDays",    "i64(i64,i64)")
RT_FUNC(DateTimeAddSeconds, rt_datetime_add_seconds, "Viper.DateTime.AddSeconds", "i64(i64,i64)")
RT_FUNC(DateTimeCreate,     rt_datetime_create,      "Viper.DateTime.Create",     "i64(i64,i64,i64,i64,i64,i64)")
RT_FUNC(DateTimeDay,        rt_datetime_day,         "Viper.DateTime.Day",        "i64(i64)")
RT_FUNC(DateTimeDayOfWeek,  rt_datetime_day_of_week, "Viper.DateTime.DayOfWeek",  "i64(i64)")
RT_FUNC(DateTimeDiff,       rt_datetime_diff,        "Viper.DateTime.Diff",       "i64(i64,i64)")
RT_FUNC(DateTimeFormat,     rt_datetime_format,      "Viper.DateTime.Format",     "str(i64,str)")
RT_FUNC(DateTimeHour,       rt_datetime_hour,        "Viper.DateTime.Hour",       "i64(i64)")
RT_FUNC(DateTimeMinute,     rt_datetime_minute,      "Viper.DateTime.Minute",     "i64(i64)")
RT_FUNC(DateTimeMonth,      rt_datetime_month,       "Viper.DateTime.Month",      "i64(i64)")
RT_FUNC(DateTimeNow,        rt_datetime_now,         "Viper.DateTime.Now",        "i64()")
RT_FUNC(DateTimeNowMs,      rt_datetime_now_ms,      "Viper.DateTime.NowMs",      "i64()")
RT_FUNC(DateTimeSecond,     rt_datetime_second,      "Viper.DateTime.Second",     "i64(i64)")
RT_FUNC(DateTimeToISO,      rt_datetime_to_iso,      "Viper.DateTime.ToISO",      "str(i64)")
RT_FUNC(DateTimeYear,       rt_datetime_year,        "Viper.DateTime.Year",       "i64(i64)")

//=============================================================================
// DIAGNOSTICS - ASSERT
//=============================================================================

RT_FUNC(DiagAssert, rt_diag_assert, "Viper.Diagnostics.Assert", "void(i1,str)")
RT_FUNC(DiagAssertEq, rt_diag_assert_eq, "Viper.Diagnostics.AssertEq", "void(i64,i64,str)")
RT_FUNC(DiagAssertNeq, rt_diag_assert_neq, "Viper.Diagnostics.AssertNeq", "void(i64,i64,str)")
RT_FUNC(DiagAssertEqNum, rt_diag_assert_eq_num, "Viper.Diagnostics.AssertEqNum", "void(f64,f64,str)")
RT_FUNC(DiagAssertEqStr, rt_diag_assert_eq_str, "Viper.Diagnostics.AssertEqStr", "void(str,str,str)")
RT_FUNC(DiagAssertNull, rt_diag_assert_null, "Viper.Diagnostics.AssertNull", "void(obj,str)")
RT_FUNC(DiagAssertNotNull, rt_diag_assert_not_null, "Viper.Diagnostics.AssertNotNull", "void(obj,str)")
RT_FUNC(DiagAssertFail, rt_diag_assert_fail, "Viper.Diagnostics.AssertFail", "void(str)")
RT_FUNC(DiagAssertGt, rt_diag_assert_gt, "Viper.Diagnostics.AssertGt", "void(i64,i64,str)")
RT_FUNC(DiagAssertLt, rt_diag_assert_lt, "Viper.Diagnostics.AssertLt", "void(i64,i64,str)")
RT_FUNC(DiagAssertGte, rt_diag_assert_gte, "Viper.Diagnostics.AssertGte", "void(i64,i64,str)")
RT_FUNC(DiagAssertLte, rt_diag_assert_lte, "Viper.Diagnostics.AssertLte", "void(i64,i64,str)")

//=============================================================================
// DIAGNOSTICS - STOPWATCH
//=============================================================================

RT_FUNC(StopwatchElapsedMs, rt_stopwatch_elapsed_ms, "Viper.Diagnostics.Stopwatch.get_ElapsedMs", "i64(obj)")
RT_FUNC(StopwatchElapsedNs, rt_stopwatch_elapsed_ns, "Viper.Diagnostics.Stopwatch.get_ElapsedNs", "i64(obj)")
RT_FUNC(StopwatchElapsedUs, rt_stopwatch_elapsed_us, "Viper.Diagnostics.Stopwatch.get_ElapsedUs", "i64(obj)")
RT_FUNC(StopwatchIsRunning, rt_stopwatch_is_running, "Viper.Diagnostics.Stopwatch.get_IsRunning", "i1(obj)")
RT_FUNC(StopwatchNew,       rt_stopwatch_new,        "Viper.Diagnostics.Stopwatch.New",           "obj()")
RT_FUNC(StopwatchReset,     rt_stopwatch_reset,      "Viper.Diagnostics.Stopwatch.Reset",         "void(obj)")
RT_FUNC(StopwatchRestart,   rt_stopwatch_restart,    "Viper.Diagnostics.Stopwatch.Restart",       "void(obj)")
RT_FUNC(StopwatchStart,     rt_stopwatch_start,      "Viper.Diagnostics.Stopwatch.Start",         "void(obj)")
RT_FUNC(StopwatchStartNew,  rt_stopwatch_start_new,  "Viper.Diagnostics.Stopwatch.StartNew",      "obj()")
RT_FUNC(StopwatchStop,      rt_stopwatch_stop,       "Viper.Diagnostics.Stopwatch.Stop",          "void(obj)")

//=============================================================================
// DIAGNOSTICS - TRAP
//=============================================================================

RT_FUNC(Trap, rt_trap, "Viper.Diagnostics.Trap", "void(str)")

//=============================================================================
// ENVIRONMENT
//=============================================================================

RT_FUNC(EnvArgCount, rt_args_count,    "Viper.Environment.GetArgumentCount", "i64()")
RT_FUNC(EnvArgGet,   rt_args_get,      "Viper.Environment.GetArgument",      "str(i64)")
RT_FUNC(EnvCmdLine,  rt_cmdline,       "Viper.Environment.GetCommandLine",   "str()")
RT_FUNC(EnvExit,     rt_env_exit,      "Viper.Environment.EndProgram",       "void(i64)")
RT_FUNC(EnvGetVar,   rt_env_get_var,   "Viper.Environment.GetVariable",      "str(str)")
RT_FUNC(EnvHasVar,   rt_env_has_var,   "Viper.Environment.HasVariable",      "i1(str)")
RT_FUNC(EnvIsNative, rt_env_is_native, "Viper.Environment.IsNative",         "i1()")
RT_FUNC(EnvSetVar,   rt_env_set_var,   "Viper.Environment.SetVariable",      "void(str,str)")

//=============================================================================
// EXEC
//=============================================================================

RT_FUNC(ExecCapture,     rt_exec_capture,      "Viper.Exec.Capture",      "str(str)")
RT_FUNC(ExecCaptureArgs, rt_exec_capture_args, "Viper.Exec.CaptureArgs",  "str(str,obj)")
RT_FUNC(ExecRun,         rt_exec_run,          "Viper.Exec.Run",          "i64(str)")
RT_FUNC(ExecRunArgs,     rt_exec_run_args,     "Viper.Exec.RunArgs",      "i64(str,obj)")
RT_FUNC(ExecShell,       rt_exec_shell,        "Viper.Exec.Shell",        "i64(str)")
RT_FUNC(ExecShellCapture,rt_exec_shell_capture,"Viper.Exec.ShellCapture", "str(str)")

//=============================================================================
// GRAPHICS - CANVAS
//=============================================================================

RT_FUNC(CanvasBox,         rt_canvas_box,          "Viper.Graphics.Canvas.Box",             "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasClear,       rt_canvas_clear,        "Viper.Graphics.Canvas.Clear",           "void(obj,i64)")
RT_FUNC(CanvasDisc,        rt_canvas_disc,         "Viper.Graphics.Canvas.Disc",            "void(obj,i64,i64,i64,i64)")
RT_FUNC(CanvasFlip,        rt_canvas_flip,         "Viper.Graphics.Canvas.Flip",            "void(obj)")
RT_FUNC(CanvasFrame,       rt_canvas_frame,        "Viper.Graphics.Canvas.Frame",           "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasHeight,      rt_canvas_height,       "Viper.Graphics.Canvas.get_Height",      "i64(obj)")
RT_FUNC(CanvasKeyHeld,     rt_canvas_key_held,     "Viper.Graphics.Canvas.KeyHeld",         "i64(obj,i64)")
RT_FUNC(CanvasLine,        rt_canvas_line,         "Viper.Graphics.Canvas.Line",            "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasNew,         rt_canvas_new,          "Viper.Graphics.Canvas.New",             "obj(str,i64,i64)")
RT_FUNC(CanvasPlot,        rt_canvas_plot,         "Viper.Graphics.Canvas.Plot",            "void(obj,i64,i64,i64)")
RT_FUNC(CanvasPoll,        rt_canvas_poll,         "Viper.Graphics.Canvas.Poll",            "i64(obj)")
RT_FUNC(CanvasRing,        rt_canvas_ring,         "Viper.Graphics.Canvas.Ring",            "void(obj,i64,i64,i64,i64)")
RT_FUNC(CanvasShouldClose, rt_canvas_should_close, "Viper.Graphics.Canvas.get_ShouldClose", "i64(obj)")
RT_FUNC(CanvasWidth,       rt_canvas_width,        "Viper.Graphics.Canvas.get_Width",       "i64(obj)")

//=============================================================================
// GRAPHICS - COLOR
//=============================================================================

RT_FUNC(ColorRGB,  rt_color_rgb,  "Viper.Graphics.Color.RGB",  "i64(i64,i64,i64)")
RT_FUNC(ColorRGBA, rt_color_rgba, "Viper.Graphics.Color.RGBA", "i64(i64,i64,i64,i64)")

//=============================================================================
// GRAPHICS - PIXELS
//=============================================================================

RT_FUNC(PixelsClear,     rt_pixels_clear,      "Viper.Graphics.Pixels.Clear",     "void(obj)")
RT_FUNC(PixelsClone,     rt_pixels_clone,      "Viper.Graphics.Pixels.Clone",     "obj(obj)")
RT_FUNC(PixelsCopy,      rt_pixels_copy,       "Viper.Graphics.Pixels.Copy",      "void(obj,i64,i64,obj,i64,i64,i64,i64)")
RT_FUNC(PixelsFill,      rt_pixels_fill,       "Viper.Graphics.Pixels.Fill",      "void(obj,i64)")
RT_FUNC(PixelsFromBytes, rt_pixels_from_bytes, "Viper.Graphics.Pixels.FromBytes", "obj(i64,i64,obj)")
RT_FUNC(PixelsGet,       rt_pixels_get,        "Viper.Graphics.Pixels.Get",       "i64(obj,i64,i64)")
RT_FUNC(PixelsHeight,    rt_pixels_height,     "Viper.Graphics.Pixels.get_Height","i64(obj)")
RT_FUNC(PixelsNew,       rt_pixels_new,        "Viper.Graphics.Pixels.New",       "obj(i64,i64)")
RT_FUNC(PixelsSet,       rt_pixels_set,        "Viper.Graphics.Pixels.Set",       "void(obj,i64,i64,i64)")
RT_FUNC(PixelsToBytes,   rt_pixels_to_bytes,   "Viper.Graphics.Pixels.ToBytes",   "obj(obj)")
RT_FUNC(PixelsWidth,     rt_pixels_width,      "Viper.Graphics.Pixels.get_Width", "i64(obj)")

//=============================================================================
// IO - DIRECTORY
//=============================================================================

RT_FUNC(DirCurrent,    rt_dir_current,     "Viper.IO.Dir.Current",    "str()")
RT_FUNC(DirDirs,       rt_dir_dirs,        "Viper.IO.Dir.Dirs",       "ptr(str)")
RT_FUNC(DirDirsSeq,    rt_dir_dirs_seq,    "Viper.IO.Dir.DirsSeq",    "obj(str)")
RT_FUNC(DirExists,     rt_dir_exists,      "Viper.IO.Dir.Exists",     "i1(str)")
RT_FUNC(DirEntries,    rt_dir_entries_seq, "Viper.IO.Dir.Entries",    "obj(str)")
RT_FUNC(DirFiles,      rt_dir_files,       "Viper.IO.Dir.Files",      "ptr(str)")
RT_FUNC(DirFilesSeq,   rt_dir_files_seq,   "Viper.IO.Dir.FilesSeq",   "obj(str)")
RT_FUNC(DirList,       rt_dir_list,        "Viper.IO.Dir.List",       "ptr(str)")
RT_FUNC(DirListSeq,    rt_dir_list_seq,    "Viper.IO.Dir.ListSeq",    "obj(str)")
RT_FUNC(DirMake,       rt_dir_make,        "Viper.IO.Dir.Make",       "void(str)")
RT_FUNC(DirMakeAll,    rt_dir_make_all,    "Viper.IO.Dir.MakeAll",    "void(str)")
RT_FUNC(DirMove,       rt_dir_move,        "Viper.IO.Dir.Move",       "void(str,str)")
RT_FUNC(DirRemove,     rt_dir_remove,      "Viper.IO.Dir.Remove",     "void(str)")
RT_FUNC(DirRemoveAll,  rt_dir_remove_all,  "Viper.IO.Dir.RemoveAll",  "void(str)")
RT_FUNC(DirSetCurrent, rt_dir_set_current, "Viper.IO.Dir.SetCurrent", "void(str)")

//=============================================================================
// IO - FILE
//=============================================================================

RT_FUNC(FileAppend,       rt_file_append,            "Viper.IO.File.Append",       "void(str,str)")
RT_FUNC(FileAppendLine,   rt_io_file_append_line,    "Viper.IO.File.AppendLine",   "void(str,str)")
RT_FUNC(FileCopy,         rt_file_copy,              "Viper.IO.File.Copy",         "void(str,str)")
RT_FUNC(FileDelete,       rt_io_file_delete,         "Viper.IO.File.Delete",       "void(str)")
RT_FUNC(FileExists,       rt_io_file_exists,         "Viper.IO.File.Exists",       "i1(str)")
RT_FUNC(FileModified,     rt_file_modified,          "Viper.IO.File.Modified",     "i64(str)")
RT_FUNC(FileMove,         rt_file_move,              "Viper.IO.File.Move",         "void(str,str)")
RT_FUNC(FileReadAllBytes, rt_io_file_read_all_bytes, "Viper.IO.File.ReadAllBytes", "obj(str)")
RT_FUNC(FileReadAllLines, rt_io_file_read_all_lines, "Viper.IO.File.ReadAllLines", "obj(str)")
RT_FUNC(FileReadAllText,  rt_io_file_read_all_text,  "Viper.IO.File.ReadAllText",  "str(str)")
RT_FUNC(FileReadBytes,    rt_file_read_bytes,        "Viper.IO.File.ReadBytes",    "ptr(str)")
RT_FUNC(FileReadLines,    rt_file_read_lines,        "Viper.IO.File.ReadLines",    "ptr(str)")
RT_FUNC(FileSize,         rt_file_size,              "Viper.IO.File.Size",         "i64(str)")
RT_FUNC(FileTouch,        rt_file_touch,             "Viper.IO.File.Touch",        "void(str)")
RT_FUNC(FileWriteAllBytes, rt_io_file_write_all_bytes, "Viper.IO.File.WriteAllBytes", "void(str,obj)")
RT_FUNC(FileWriteAllText, rt_io_file_write_all_text, "Viper.IO.File.WriteAllText", "void(str,str)")
RT_FUNC(FileWriteBytes,   rt_file_write_bytes,       "Viper.IO.File.WriteBytes",   "void(str,ptr)")
RT_FUNC(FileWriteLines,   rt_file_write_lines,       "Viper.IO.File.WriteLines",   "void(str,ptr)")

//=============================================================================
// IO - PATH
//=============================================================================

RT_FUNC(PathAbs,     rt_path_abs,      "Viper.IO.Path.Abs",     "str(str)")
RT_FUNC(PathDir,     rt_path_dir,      "Viper.IO.Path.Dir",     "str(str)")
RT_FUNC(PathExt,     rt_path_ext,      "Viper.IO.Path.Ext",     "str(str)")
RT_FUNC(PathIsAbs,   rt_path_is_abs,   "Viper.IO.Path.IsAbs",   "i1(str)")
RT_FUNC(PathJoin,    rt_path_join,     "Viper.IO.Path.Join",    "str(str,str)")
RT_FUNC(PathName,    rt_path_name,     "Viper.IO.Path.Name",    "str(str)")
RT_FUNC(PathNorm,    rt_path_norm,     "Viper.IO.Path.Norm",    "str(str)")
RT_FUNC(PathSep,     rt_path_sep,      "Viper.IO.Path.Sep",     "str()")
RT_FUNC(PathStem,    rt_path_stem,     "Viper.IO.Path.Stem",    "str(str)")
RT_FUNC(PathWithExt, rt_path_with_ext, "Viper.IO.Path.WithExt", "str(str,str)")

//=============================================================================
// IO - BINFILE
//=============================================================================

RT_FUNC(BinFileClose,     rt_binfile_close,      "Viper.IO.BinFile.Close",      "void(obj)")
RT_FUNC(BinFileEof,       rt_binfile_eof,        "Viper.IO.BinFile.get_Eof",    "i1(obj)")
RT_FUNC(BinFileFlush,     rt_binfile_flush,      "Viper.IO.BinFile.Flush",      "void(obj)")
RT_FUNC(BinFileOpen,      rt_binfile_open,       "Viper.IO.BinFile.Open",       "obj(str,str)")
RT_FUNC(BinFilePos,       rt_binfile_pos,        "Viper.IO.BinFile.get_Pos",    "i64(obj)")
RT_FUNC(BinFileRead,      rt_binfile_read,       "Viper.IO.BinFile.Read",       "i64(obj,obj,i64,i64)")
RT_FUNC(BinFileReadByte,  rt_binfile_read_byte,  "Viper.IO.BinFile.ReadByte",   "i64(obj)")
RT_FUNC(BinFileSeek,      rt_binfile_seek,       "Viper.IO.BinFile.Seek",       "i64(obj,i64,i64)")
RT_FUNC(BinFileSize,      rt_binfile_size,       "Viper.IO.BinFile.get_Size",   "i64(obj)")
RT_FUNC(BinFileWrite,     rt_binfile_write,      "Viper.IO.BinFile.Write",      "void(obj,obj,i64,i64)")
RT_FUNC(BinFileWriteByte, rt_binfile_write_byte, "Viper.IO.BinFile.WriteByte",  "void(obj,i64)")

//=============================================================================
// IO - MEMSTREAM
//=============================================================================

RT_FUNC(MemStreamNew,         rt_memstream_new,          "Viper.IO.MemStream.New",          "obj()")
RT_FUNC(MemStreamNewCapacity, rt_memstream_new_capacity, "Viper.IO.MemStream.NewCapacity",  "obj(i64)")
RT_FUNC(MemStreamFromBytes,   rt_memstream_from_bytes,   "Viper.IO.MemStream.FromBytes",    "obj(obj)")
RT_FUNC(MemStreamGetPos,      rt_memstream_get_pos,      "Viper.IO.MemStream.get_Pos",      "i64(obj)")
RT_FUNC(MemStreamSetPos,      rt_memstream_set_pos,      "Viper.IO.MemStream.set_Pos",      "void(obj,i64)")
RT_FUNC(MemStreamGetLen,      rt_memstream_get_len,      "Viper.IO.MemStream.get_Len",      "i64(obj)")
RT_FUNC(MemStreamGetCapacity, rt_memstream_get_capacity, "Viper.IO.MemStream.get_Capacity", "i64(obj)")
RT_FUNC(MemStreamReadI8,      rt_memstream_read_i8,      "Viper.IO.MemStream.ReadI8",       "i64(obj)")
RT_FUNC(MemStreamWriteI8,     rt_memstream_write_i8,     "Viper.IO.MemStream.WriteI8",      "void(obj,i64)")
RT_FUNC(MemStreamReadU8,      rt_memstream_read_u8,      "Viper.IO.MemStream.ReadU8",       "i64(obj)")
RT_FUNC(MemStreamWriteU8,     rt_memstream_write_u8,     "Viper.IO.MemStream.WriteU8",      "void(obj,i64)")
RT_FUNC(MemStreamReadI16,     rt_memstream_read_i16,     "Viper.IO.MemStream.ReadI16",      "i64(obj)")
RT_FUNC(MemStreamWriteI16,    rt_memstream_write_i16,    "Viper.IO.MemStream.WriteI16",     "void(obj,i64)")
RT_FUNC(MemStreamReadU16,     rt_memstream_read_u16,     "Viper.IO.MemStream.ReadU16",      "i64(obj)")
RT_FUNC(MemStreamWriteU16,    rt_memstream_write_u16,    "Viper.IO.MemStream.WriteU16",     "void(obj,i64)")
RT_FUNC(MemStreamReadI32,     rt_memstream_read_i32,     "Viper.IO.MemStream.ReadI32",      "i64(obj)")
RT_FUNC(MemStreamWriteI32,    rt_memstream_write_i32,    "Viper.IO.MemStream.WriteI32",     "void(obj,i64)")
RT_FUNC(MemStreamReadU32,     rt_memstream_read_u32,     "Viper.IO.MemStream.ReadU32",      "i64(obj)")
RT_FUNC(MemStreamWriteU32,    rt_memstream_write_u32,    "Viper.IO.MemStream.WriteU32",     "void(obj,i64)")
RT_FUNC(MemStreamReadI64,     rt_memstream_read_i64,     "Viper.IO.MemStream.ReadI64",      "i64(obj)")
RT_FUNC(MemStreamWriteI64,    rt_memstream_write_i64,    "Viper.IO.MemStream.WriteI64",     "void(obj,i64)")
RT_FUNC(MemStreamReadF32,     rt_memstream_read_f32,     "Viper.IO.MemStream.ReadF32",      "f64(obj)")
RT_FUNC(MemStreamWriteF32,    rt_memstream_write_f32,    "Viper.IO.MemStream.WriteF32",     "void(obj,f64)")
RT_FUNC(MemStreamReadF64,     rt_memstream_read_f64,     "Viper.IO.MemStream.ReadF64",      "f64(obj)")
RT_FUNC(MemStreamWriteF64,    rt_memstream_write_f64,    "Viper.IO.MemStream.WriteF64",     "void(obj,f64)")
RT_FUNC(MemStreamReadBytes,   rt_memstream_read_bytes,   "Viper.IO.MemStream.ReadBytes",    "obj(obj,i64)")
RT_FUNC(MemStreamWriteBytes,  rt_memstream_write_bytes,  "Viper.IO.MemStream.WriteBytes",   "void(obj,obj)")
RT_FUNC(MemStreamReadStr,     rt_memstream_read_str,     "Viper.IO.MemStream.ReadStr",      "str(obj,i64)")
RT_FUNC(MemStreamWriteStr,    rt_memstream_write_str,    "Viper.IO.MemStream.WriteStr",     "void(obj,str)")
RT_FUNC(MemStreamToBytes,     rt_memstream_to_bytes,     "Viper.IO.MemStream.ToBytes",      "obj(obj)")
RT_FUNC(MemStreamClear,       rt_memstream_clear,        "Viper.IO.MemStream.Clear",        "void(obj)")
RT_FUNC(MemStreamSeek,        rt_memstream_seek,         "Viper.IO.MemStream.Seek",         "void(obj,i64)")
RT_FUNC(MemStreamSkip,        rt_memstream_skip,         "Viper.IO.MemStream.Skip",         "void(obj,i64)")

//=============================================================================
// IO - LINEREADER
//=============================================================================

RT_FUNC(LineReaderClose,    rt_linereader_close,     "Viper.IO.LineReader.Close",     "void(obj)")
RT_FUNC(LineReaderEof,      rt_linereader_eof,       "Viper.IO.LineReader.get_Eof",   "i1(obj)")
RT_FUNC(LineReaderOpen,     rt_linereader_open,      "Viper.IO.LineReader.Open",      "obj(str)")
RT_FUNC(LineReaderPeekChar, rt_linereader_peek_char, "Viper.IO.LineReader.PeekChar",  "i64(obj)")
RT_FUNC(LineReaderRead,     rt_linereader_read,      "Viper.IO.LineReader.Read",      "str(obj)")
RT_FUNC(LineReaderReadAll,  rt_linereader_read_all,  "Viper.IO.LineReader.ReadAll",   "str(obj)")
RT_FUNC(LineReaderReadChar, rt_linereader_read_char, "Viper.IO.LineReader.ReadChar",  "i64(obj)")

//=============================================================================
// IO - LINEWRITER
//=============================================================================

RT_FUNC(LineWriterAppend,     rt_linewriter_append,      "Viper.IO.LineWriter.Append",      "obj(str)")
RT_FUNC(LineWriterClose,      rt_linewriter_close,       "Viper.IO.LineWriter.Close",       "void(obj)")
RT_FUNC(LineWriterFlush,      rt_linewriter_flush,       "Viper.IO.LineWriter.Flush",       "void(obj)")
RT_FUNC(LineWriterNewLine,    rt_linewriter_newline,     "Viper.IO.LineWriter.get_NewLine", "str(obj)")
RT_FUNC(LineWriterOpen,       rt_linewriter_open,        "Viper.IO.LineWriter.Open",        "obj(str)")
RT_FUNC(LineWriterSetNewLine, rt_linewriter_set_newline, "Viper.IO.LineWriter.set_NewLine", "void(obj,str)")
RT_FUNC(LineWriterWrite,      rt_linewriter_write,       "Viper.IO.LineWriter.Write",       "void(obj,str)")
RT_FUNC(LineWriterWriteChar,  rt_linewriter_write_char,  "Viper.IO.LineWriter.WriteChar",   "void(obj,i64)")
RT_FUNC(LineWriterWriteLn,    rt_linewriter_write_ln,    "Viper.IO.LineWriter.WriteLn",     "void(obj,str)")

//=============================================================================
// IO - WATCHER
//=============================================================================

RT_FUNC(WatcherNew,        rt_watcher_new,           "Viper.IO.Watcher.new",            "obj(str)")
RT_FUNC(WatcherPath,       rt_watcher_get_path,      "Viper.IO.Watcher.get_Path",       "str(obj)")
RT_FUNC(WatcherIsWatching, rt_watcher_get_is_watching, "Viper.IO.Watcher.get_IsWatching", "i1(obj)")
RT_FUNC(WatcherStart,      rt_watcher_start,         "Viper.IO.Watcher.Start",          "void(obj)")
RT_FUNC(WatcherStop,       rt_watcher_stop,          "Viper.IO.Watcher.Stop",           "void(obj)")
RT_FUNC(WatcherPoll,       rt_watcher_poll,          "Viper.IO.Watcher.Poll",           "i64(obj)")
RT_FUNC(WatcherPollFor,    rt_watcher_poll_for,      "Viper.IO.Watcher.PollFor",        "i64(obj,i64)")
RT_FUNC(WatcherEventPath,  rt_watcher_event_path,    "Viper.IO.Watcher.EventPath",      "str(obj)")
RT_FUNC(WatcherEventType,  rt_watcher_event_type,    "Viper.IO.Watcher.EventType",      "i64(obj)")
RT_FUNC(WatcherEventNone,     rt_watcher_event_none,     "Viper.IO.Watcher.get_EVENT_NONE",     "i64()")
RT_FUNC(WatcherEventCreated,  rt_watcher_event_created,  "Viper.IO.Watcher.get_EVENT_CREATED",  "i64()")
RT_FUNC(WatcherEventModified, rt_watcher_event_modified, "Viper.IO.Watcher.get_EVENT_MODIFIED", "i64()")
RT_FUNC(WatcherEventDeleted,  rt_watcher_event_deleted,  "Viper.IO.Watcher.get_EVENT_DELETED",  "i64()")
RT_FUNC(WatcherEventRenamed,  rt_watcher_event_renamed,  "Viper.IO.Watcher.get_EVENT_RENAMED",  "i64()")

//=============================================================================
// IO - COMPRESS
//=============================================================================

RT_FUNC(CompressDeflate,     rt_compress_deflate,       "Viper.IO.Compress.Deflate",     "obj(obj)")
RT_FUNC(CompressDeflateLvl,  rt_compress_deflate_lvl,   "Viper.IO.Compress.DeflateLvl",  "obj(obj,i64)")
RT_FUNC(CompressInflate,     rt_compress_inflate,       "Viper.IO.Compress.Inflate",     "obj(obj)")
RT_FUNC(CompressGzip,        rt_compress_gzip,          "Viper.IO.Compress.Gzip",        "obj(obj)")
RT_FUNC(CompressGzipLvl,     rt_compress_gzip_lvl,      "Viper.IO.Compress.GzipLvl",     "obj(obj,i64)")
RT_FUNC(CompressGunzip,      rt_compress_gunzip,        "Viper.IO.Compress.Gunzip",      "obj(obj)")
RT_FUNC(CompressDeflateStr,  rt_compress_deflate_str,   "Viper.IO.Compress.DeflateStr",  "obj(str)")
RT_FUNC(CompressInflateStr,  rt_compress_inflate_str,   "Viper.IO.Compress.InflateStr",  "str(obj)")
RT_FUNC(CompressGzipStr,     rt_compress_gzip_str,      "Viper.IO.Compress.GzipStr",     "obj(str)")
RT_FUNC(CompressGunzipStr,   rt_compress_gunzip_str,    "Viper.IO.Compress.GunzipStr",   "str(obj)")

//=============================================================================
// LOG
//=============================================================================

RT_FUNC(LogDebug,    rt_log_debug,       "Viper.Log.Debug",     "void(str)")
RT_FUNC(LogInfo,     rt_log_info,        "Viper.Log.Info",      "void(str)")
RT_FUNC(LogWarn,     rt_log_warn,        "Viper.Log.Warn",      "void(str)")
RT_FUNC(LogError,    rt_log_error,       "Viper.Log.Error",     "void(str)")
RT_FUNC(LogLevel,    rt_log_level,       "Viper.Log.get_Level", "i64()")
RT_FUNC(LogSetLevel, rt_log_set_level,   "Viper.Log.set_Level", "void(i64)")
RT_FUNC(LogEnabled,  rt_log_enabled,     "Viper.Log.Enabled",   "i1(i64)")
RT_FUNC(LogDEBUG,    rt_log_level_debug, "Viper.Log.get_DEBUG", "i64()")
RT_FUNC(LogINFO,     rt_log_level_info,  "Viper.Log.get_INFO",  "i64()")
RT_FUNC(LogWARN,     rt_log_level_warn,  "Viper.Log.get_WARN",  "i64()")
RT_FUNC(LogERROR,    rt_log_level_error, "Viper.Log.get_ERROR", "i64()")
RT_FUNC(LogOFF,      rt_log_level_off,   "Viper.Log.get_OFF",   "i64()")

//=============================================================================
// MACHINE
//=============================================================================

RT_FUNC(MachineCores,    rt_machine_cores,     "Viper.Machine.get_Cores",    "i64()")
RT_FUNC(MachineEndian,   rt_machine_endian,    "Viper.Machine.get_Endian",   "str()")
RT_FUNC(MachineHome,     rt_machine_home,      "Viper.Machine.get_Home",     "str()")
RT_FUNC(MachineHost,     rt_machine_host,      "Viper.Machine.get_Host",     "str()")
RT_FUNC(MachineMemFree,  rt_machine_mem_free,  "Viper.Machine.get_MemFree",  "i64()")
RT_FUNC(MachineMemTotal, rt_machine_mem_total, "Viper.Machine.get_MemTotal", "i64()")
RT_FUNC(MachineOS,       rt_machine_os,        "Viper.Machine.get_OS",       "str()")
RT_FUNC(MachineOSVer,    rt_machine_os_ver,    "Viper.Machine.get_OSVer",    "str()")
RT_FUNC(MachineTemp,     rt_machine_temp,      "Viper.Machine.get_Temp",     "str()")
RT_FUNC(MachineUser,     rt_machine_user,      "Viper.Machine.get_User",     "str()")

//=============================================================================
// MATH FUNCTIONS
//=============================================================================

RT_FUNC(MathAbs,      rt_abs_f64,        "Viper.Math.Abs",      "f64(f64)")
RT_FUNC(MathAbsInt,   rt_abs_i64,        "Viper.Math.AbsInt",   "i64(i64)")
RT_FUNC(MathAcos,     rt_acos,           "Viper.Math.Acos",     "f64(f64)")
RT_FUNC(MathAsin,     rt_asin,           "Viper.Math.Asin",     "f64(f64)")
RT_FUNC(MathAtan,     rt_atan,           "Viper.Math.Atan",     "f64(f64)")
RT_FUNC(MathAtan2,    rt_atan2,          "Viper.Math.Atan2",    "f64(f64,f64)")
RT_FUNC(MathCeil,     rt_ceil,           "Viper.Math.Ceil",     "f64(f64)")
RT_FUNC(MathClamp,    rt_clamp_f64,      "Viper.Math.Clamp",    "f64(f64,f64,f64)")
RT_FUNC(MathClampInt, rt_clamp_i64,      "Viper.Math.ClampInt", "i64(i64,i64,i64)")
RT_FUNC(MathCos,      rt_cos,            "Viper.Math.Cos",      "f64(f64)")
RT_FUNC(MathCosh,     rt_cosh,           "Viper.Math.Cosh",     "f64(f64)")
RT_FUNC(MathDeg,      rt_deg,            "Viper.Math.Deg",      "f64(f64)")
RT_FUNC(MathE,        rt_math_e,         "Viper.Math.get_E",    "f64()")
RT_FUNC(MathExp,      rt_exp,            "Viper.Math.Exp",      "f64(f64)")
RT_FUNC(MathFMod,     rt_fmod,           "Viper.Math.FMod",     "f64(f64,f64)")
RT_FUNC(MathFloor,    rt_floor,          "Viper.Math.Floor",    "f64(f64)")
RT_FUNC(MathHypot,    rt_hypot,          "Viper.Math.Hypot",    "f64(f64,f64)")
RT_FUNC(MathLerp,     rt_lerp,           "Viper.Math.Lerp",     "f64(f64,f64,f64)")
RT_FUNC(MathLog,      rt_log,            "Viper.Math.Log",      "f64(f64)")
RT_FUNC(MathLog10,    rt_log10,          "Viper.Math.Log10",    "f64(f64)")
RT_FUNC(MathLog2,     rt_log2,           "Viper.Math.Log2",     "f64(f64)")
RT_FUNC(MathMax,      rt_max_f64,        "Viper.Math.Max",      "f64(f64,f64)")
RT_FUNC(MathMaxInt,   rt_max_i64,        "Viper.Math.MaxInt",   "i64(i64,i64)")
RT_FUNC(MathMin,      rt_min_f64,        "Viper.Math.Min",      "f64(f64,f64)")
RT_FUNC(MathMinInt,   rt_min_i64,        "Viper.Math.MinInt",   "i64(i64,i64)")
RT_FUNC(MathPi,       rt_math_pi,        "Viper.Math.get_Pi",   "f64()")
RT_FUNC(MathPow,      rt_pow_f64_chkdom, "Viper.Math.Pow",      "f64(f64,f64)")
RT_FUNC(MathRad,      rt_rad,            "Viper.Math.Rad",      "f64(f64)")
RT_FUNC(MathRound,    rt_round,          "Viper.Math.Round",    "f64(f64)")
RT_FUNC(MathSgn,      rt_sgn_f64,        "Viper.Math.Sgn",      "f64(f64)")
RT_FUNC(MathSgnInt,   rt_sgn_i64,        "Viper.Math.SgnInt",   "i64(i64)")
RT_FUNC(MathSin,      rt_sin,            "Viper.Math.Sin",      "f64(f64)")
RT_FUNC(MathSinh,     rt_sinh,           "Viper.Math.Sinh",     "f64(f64)")
RT_FUNC(MathSqrt,     rt_sqrt,           "Viper.Math.Sqrt",     "f64(f64)")
RT_FUNC(MathTan,      rt_tan,            "Viper.Math.Tan",      "f64(f64)")
RT_FUNC(MathTanh,     rt_tanh,           "Viper.Math.Tanh",     "f64(f64)")
RT_FUNC(MathTau,      rt_math_tau,       "Viper.Math.get_Tau",  "f64()")
RT_FUNC(MathTrunc,    rt_trunc,          "Viper.Math.Trunc",    "f64(f64)")
RT_FUNC(MathWrap,     rt_wrap_f64,       "Viper.Math.Wrap",     "f64(f64,f64,f64)")
RT_FUNC(MathWrapInt,  rt_wrap_i64,       "Viper.Math.WrapInt",  "i64(i64,i64,i64)")

//=============================================================================
// OBJECT (BASE CLASS)
//=============================================================================

RT_FUNC(ObjEquals,          rt_obj_equals,           "Viper.Object.Equals",          "i1(obj,obj)")
RT_FUNC(ObjGetHashCode,     rt_obj_get_hash_code,    "Viper.Object.GetHashCode",     "i64(obj)")
RT_FUNC(ObjReferenceEquals, rt_obj_reference_equals, "Viper.Object.ReferenceEquals", "i1(obj,obj)")
RT_FUNC(ObjToString,        rt_obj_to_string,        "Viper.Object.ToString",        "str(obj)")

//=============================================================================
// RANDOM
//=============================================================================

RT_FUNC(RandomNext,    rt_rnd,           "Viper.Random.Next",    "f64()")
RT_FUNC(RandomNextInt, rt_rand_int,      "Viper.Random.NextInt", "i64(i64)")
RT_FUNC(RandomSeed,    rt_randomize_i64, "Viper.Random.Seed",    "void(i64)")

//=============================================================================
// STRING FUNCTIONS
//=============================================================================

// String instance methods (Viper.String.*)
RT_FUNC(Asc,            rt_asc,              "Viper.String.Asc",         "i64(str)")
RT_FUNC(Chr,            rt_chr,              "Viper.String.Chr",         "str(i64)")
RT_FUNC(Concat,         rt_concat,           "Viper.String.Concat",      "str(str,str)")
RT_FUNC(IndexOf,        rt_instr2,           "Viper.String.IndexOf",     "i64(str,str)")
RT_FUNC(IndexOfFrom,    rt_str_index_of_from, "Viper.String.IndexOfFrom", "i64(str,i64,str)")
RT_FUNC(LCase,          rt_lcase,            "Viper.String.ToLower",     "str(str)")
RT_FUNC(LTrim,          rt_ltrim,            "Viper.String.TrimStart",   "str(str)")
RT_FUNC(Left,           rt_left,             "Viper.String.Left",        "str(str,i64)")
RT_FUNC(Len,            rt_len,              "Viper.String.get_Length",  "i64(str)")
RT_FUNC(Mid2,           rt_mid2,             "Viper.String.Mid",         "str(str,i64)")
RT_FUNC(Mid3,           rt_mid3,             "Viper.String.MidLen",      "str(str,i64,i64)")
RT_FUNC(RTrim,          rt_rtrim,            "Viper.String.TrimEnd",     "str(str)")
RT_FUNC(Right,          rt_right,            "Viper.String.Right",       "str(str,i64)")
RT_FUNC(StrCmp,         rt_str_cmp,          "Viper.String.Cmp",         "i64(str,str)")
RT_FUNC(StrCmpNoCase,   rt_str_cmp_nocase,   "Viper.String.CmpNoCase",   "i64(str,str)")
RT_FUNC(StrCount,       rt_str_count,        "Viper.String.Count",       "i64(str,str)")
RT_FUNC(StrEndsWith,    rt_str_ends_with,    "Viper.String.EndsWith",    "i1(str,str)")
RT_FUNC(StrFlip,        rt_str_flip,         "Viper.String.Flip",        "str(str)")
RT_FUNC(StrHas,         rt_str_has,          "Viper.String.Has",         "i1(str,str)")
RT_FUNC(StrIsEmpty,     rt_str_is_empty,     "Viper.String.get_IsEmpty", "i1(str)")
RT_FUNC(StrPadLeft,     rt_str_pad_left,     "Viper.String.PadLeft",     "str(str,i64,str)")
RT_FUNC(StrPadRight,    rt_str_pad_right,    "Viper.String.PadRight",    "str(str,i64,str)")
RT_FUNC(StrRepeat,      rt_str_repeat,       "Viper.String.Repeat",      "str(str,i64)")
RT_FUNC(StrReplace,     rt_str_replace,      "Viper.String.Replace",     "str(str,str,str)")
RT_FUNC(StrSplit,       rt_str_split,        "Viper.String.Split",       "obj(str,str)")
RT_FUNC(StrStartsWith,  rt_str_starts_with,  "Viper.String.StartsWith",  "i1(str,str)")
RT_FUNC(Substr,         rt_substr,           "Viper.String.Substring",   "str(str,i64,i64)")
RT_FUNC(Trim,           rt_trim,             "Viper.String.Trim",        "str(str)")
RT_FUNC(UCase,          rt_ucase,            "Viper.String.ToUpper",     "str(str)")

// String static utilities (Viper.Strings.*)
RT_FUNC(F64ToStr,              rt_f64_to_str,    "Viper.Strings.FromDouble",        "str(f64)")
RT_FUNC(IntToStr,              rt_int_to_str,    "Viper.Strings.FromInt",           "str(i64)")
RT_FUNC(SplitFields,           rt_split_fields,  "Viper.Strings.SplitFields",       "i64(str,ptr,i64)")
RT_FUNC(StrEquals,             rt_str_eq,        "Viper.Strings.Equals",            "i1(str,str)")
RT_FUNC(StrFromDoublePrecise,  rt_str_d_alloc,   "Viper.Strings.FromDoublePrecise", "str(f64)")
RT_FUNC(StrFromI16,            rt_str_i16_alloc, "Viper.Strings.FromI16",           "str(i16)")
RT_FUNC(StrFromI32,            rt_str_i32_alloc, "Viper.Strings.FromI32",           "str(i32)")
RT_FUNC(StrFromSingle,         rt_str_f_alloc,   "Viper.Strings.FromSingle",        "str(f64)")
RT_FUNC(StrFromStr,            rt_from_str,      "Viper.Strings.FromStr",           "str(str)")
RT_FUNC(StringsJoin,           rt_strings_join,  "Viper.Strings.Join",              "str(str,obj)")

// String aliases (alternative canonical names)
RT_ALIAS("Viper.Strings.Len", Len)
RT_ALIAS("Viper.Strings.Concat", Concat)
RT_ALIAS("Viper.Strings.Mid", Substr)
RT_ALIAS("Viper.String.ConcatSelf", Concat)

//=============================================================================
// TERMINAL I/O
//=============================================================================

// Terminal output with newline
RT_FUNC(TermSay,     rt_term_say,      "Viper.Terminal.Say",      "void(str)")
RT_FUNC(TermSayBool, rt_term_say_bool, "Viper.Terminal.SayBool",  "void(i1)")
RT_FUNC(TermSayInt,  rt_term_say_i64,  "Viper.Terminal.SayInt",   "void(i64)")
RT_FUNC(TermSayNum,  rt_term_say_f64,  "Viper.Terminal.SayNum",   "void(f64)")

// Terminal output without newline
RT_FUNC(PrintF64,      rt_print_f64,     "Viper.Terminal.PrintF64", "void(f64)")
RT_FUNC(PrintI64,      rt_print_i64,     "Viper.Terminal.PrintI64", "void(i64)")
RT_FUNC(PrintStr,      rt_print_str,     "Viper.Terminal.PrintStr", "void(str)")
RT_FUNC(TermPrint,     rt_term_print,    "Viper.Terminal.Print",    "void(str)")
RT_FUNC(TermPrintInt,  rt_term_print_i64,"Viper.Terminal.PrintInt", "void(i64)")
RT_FUNC(TermPrintNum,  rt_term_print_f64,"Viper.Terminal.PrintNum", "void(f64)")

// Terminal input
RT_FUNC(TermAsk,           rt_term_ask,           "Viper.Terminal.Ask",           "str(str)")
RT_FUNC(TermGetKey,        rt_getkey_str,         "Viper.Terminal.GetKey",        "str()")
RT_FUNC(TermGetKeyTimeout, rt_getkey_timeout_i32, "Viper.Terminal.GetKeyTimeout", "str(i64)")
RT_FUNC(TermInKey,         rt_inkey_str,          "Viper.Terminal.InKey",         "str()")
RT_FUNC(TermReadLine,      rt_term_read_line,     "Viper.Terminal.ReadLine",      "str()")

// Terminal screen control
RT_FUNC(TermBell,             rt_bell,                    "Viper.Terminal.Bell",             "void()")
RT_FUNC(TermClear,            rt_term_cls,                "Viper.Terminal.Clear",            "void()")
RT_FUNC(TermSetAltScreen,     rt_term_alt_screen_i32,     "Viper.Terminal.SetAltScreen",     "void(i64)")
RT_FUNC(TermSetColor,         rt_term_color_i32,          "Viper.Terminal.SetColor",         "void(i64,i64)")
RT_FUNC(TermSetCursorVisible, rt_term_cursor_visible_i32, "Viper.Terminal.SetCursorVisible", "void(i64)")
RT_FUNC(TermSetPosition,      rt_term_locate_i32,         "Viper.Terminal.SetPosition",      "void(i64,i64)")

// Terminal buffering control
RT_FUNC(TermBeginBatch, rt_term_begin_batch, "Viper.Terminal.BeginBatch", "void()")
RT_FUNC(TermEndBatch,   rt_term_end_batch,   "Viper.Terminal.EndBatch",   "void()")
RT_FUNC(TermFlush,      rt_term_flush,       "Viper.Terminal.Flush",      "void()")

// Console aliases (backward compatibility)
RT_ALIAS("Viper.Console.PrintStr", PrintStr)
RT_ALIAS("Viper.Console.PrintI64", PrintI64)
RT_ALIAS("Viper.Console.PrintF64", PrintF64)
RT_ALIAS("Viper.Console.ReadLine", TermReadLine)

//=============================================================================
// TEXT - CODEC
//=============================================================================

RT_FUNC(CodecBase64Dec, rt_codec_base64_dec, "Viper.Text.Codec.Base64Dec", "str(str)")
RT_FUNC(CodecBase64Enc, rt_codec_base64_enc, "Viper.Text.Codec.Base64Enc", "str(str)")
RT_FUNC(CodecHexDec,    rt_codec_hex_dec,    "Viper.Text.Codec.HexDec",    "str(str)")
RT_FUNC(CodecHexEnc,    rt_codec_hex_enc,    "Viper.Text.Codec.HexEnc",    "str(str)")
RT_FUNC(CodecUrlDecode, rt_codec_url_decode, "Viper.Text.Codec.UrlDecode", "str(str)")
RT_FUNC(CodecUrlEncode, rt_codec_url_encode, "Viper.Text.Codec.UrlEncode", "str(str)")

//=============================================================================
// TEXT - CSV
//=============================================================================

RT_FUNC(CsvParseLine,       rt_csv_parse_line,        "Viper.Text.Csv.ParseLine",       "obj(str)")
RT_FUNC(CsvParseLineWith,   rt_csv_parse_line_with,   "Viper.Text.Csv.ParseLineWith",   "obj(str,str)")
RT_FUNC(CsvParse,           rt_csv_parse,             "Viper.Text.Csv.Parse",           "obj(str)")
RT_FUNC(CsvParseWith,       rt_csv_parse_with,        "Viper.Text.Csv.ParseWith",       "obj(str,str)")
RT_FUNC(CsvFormatLine,      rt_csv_format_line,       "Viper.Text.Csv.FormatLine",      "str(obj)")
RT_FUNC(CsvFormatLineWith,  rt_csv_format_line_with,  "Viper.Text.Csv.FormatLineWith",  "str(obj,str)")
RT_FUNC(CsvFormat,          rt_csv_format,            "Viper.Text.Csv.Format",          "str(obj)")
RT_FUNC(CsvFormatWith,      rt_csv_format_with,       "Viper.Text.Csv.FormatWith",      "str(obj,str)")

//=============================================================================
// TEXT - GUID
//=============================================================================

RT_FUNC(GuidEmpty,     rt_guid_empty,      "Viper.Text.Guid.get_Empty", "str()")
RT_FUNC(GuidFromBytes, rt_guid_from_bytes, "Viper.Text.Guid.FromBytes", "str(obj)")
RT_FUNC(GuidIsValid,   rt_guid_is_valid,   "Viper.Text.Guid.IsValid",   "i1(str)")
RT_FUNC(GuidNew,       rt_guid_new,        "Viper.Text.Guid.New",       "str()")
RT_FUNC(GuidToBytes,   rt_guid_to_bytes,   "Viper.Text.Guid.ToBytes",   "obj(str)")

//=============================================================================
// TEXT - STRINGBUILDER
//=============================================================================

RT_FUNC(SBAppend,      rt_text_sb_append,       "Viper.Text.StringBuilder.Append",       "obj(obj,str)")
RT_FUNC(SBAppendLine,  rt_text_sb_append_line,  "Viper.Text.StringBuilder.AppendLine",   "obj(obj,str)")
RT_FUNC(SBClear,       rt_text_sb_clear,        "Viper.Text.StringBuilder.Clear",        "void(obj)")
RT_FUNC(SBGetCapacity, rt_text_sb_get_capacity, "Viper.Text.StringBuilder.get_Capacity", "i64(obj)")
RT_FUNC(SBGetLength,   rt_text_sb_get_length,   "Viper.Text.StringBuilder.get_Length",   "i64(obj)")
RT_FUNC(SBNew,         rt_ns_stringbuilder_new, "Viper.Text.StringBuilder.New",          "obj()")
RT_FUNC(SBToString,    rt_text_sb_to_string,    "Viper.Text.StringBuilder.ToString",     "str(obj)")

//=============================================================================
// TEXT - PATTERN (Regex)
//=============================================================================

RT_FUNC(PatternIsMatch,      rt_pattern_is_match,       "Viper.Text.Pattern.IsMatch",      "i1(str,str)")
RT_FUNC(PatternFind,         rt_pattern_find,           "Viper.Text.Pattern.Find",         "str(str,str)")
RT_FUNC(PatternFindFrom,     rt_pattern_find_from,      "Viper.Text.Pattern.FindFrom",     "str(str,str,i64)")
RT_FUNC(PatternFindPos,      rt_pattern_find_pos,       "Viper.Text.Pattern.FindPos",      "i64(str,str)")
RT_FUNC(PatternFindAll,      rt_pattern_find_all,       "Viper.Text.Pattern.FindAll",      "obj(str,str)")
RT_FUNC(PatternReplace,      rt_pattern_replace,        "Viper.Text.Pattern.Replace",      "str(str,str,str)")
RT_FUNC(PatternReplaceFirst, rt_pattern_replace_first,  "Viper.Text.Pattern.ReplaceFirst", "str(str,str,str)")
RT_FUNC(PatternSplit,        rt_pattern_split,          "Viper.Text.Pattern.Split",        "obj(str,str)")
RT_FUNC(PatternEscape,       rt_pattern_escape,         "Viper.Text.Pattern.Escape",       "str(str)")

RT_FUNC(TemplateRender,      rt_template_render,        "Viper.Text.Template.Render",      "str(str,obj)")
RT_FUNC(TemplateRenderSeq,   rt_template_render_seq,    "Viper.Text.Template.RenderSeq",   "str(str,obj)")
RT_FUNC(TemplateRenderWith,  rt_template_render_with,   "Viper.Text.Template.RenderWith",  "str(str,obj,str,str)")
RT_FUNC(TemplateHas,         rt_template_has,           "Viper.Text.Template.Has",         "i1(str,str)")
RT_FUNC(TemplateKeys,        rt_template_keys,          "Viper.Text.Template.Keys",        "obj(str)")
RT_FUNC(TemplateEscape,      rt_template_escape,        "Viper.Text.Template.Escape",      "str(str)")

//=============================================================================
// THREADS
//=============================================================================

RT_FUNC(MonitorEnter,       rt_monitor_enter,         "Viper.Threads.Monitor.Enter",       "void(obj)")
RT_FUNC(MonitorTryEnter,    rt_monitor_try_enter,     "Viper.Threads.Monitor.TryEnter",    "i1(obj)")
RT_FUNC(MonitorTryEnterFor, rt_monitor_try_enter_for, "Viper.Threads.Monitor.TryEnterFor", "i1(obj,i64)")
RT_FUNC(MonitorExit,        rt_monitor_exit,          "Viper.Threads.Monitor.Exit",        "void(obj)")
RT_FUNC(MonitorWait,        rt_monitor_wait,          "Viper.Threads.Monitor.Wait",        "void(obj)")
RT_FUNC(MonitorWaitFor,     rt_monitor_wait_for,      "Viper.Threads.Monitor.WaitFor",     "i1(obj,i64)")
RT_FUNC(MonitorPause,       rt_monitor_pause,         "Viper.Threads.Monitor.Pause",       "void(obj)")
RT_FUNC(MonitorPauseAll,    rt_monitor_pause_all,     "Viper.Threads.Monitor.PauseAll",    "void(obj)")

RT_FUNC(ThreadStart,     rt_thread_start,        "Viper.Threads.Thread.Start",       "obj(ptr,ptr)")
RT_FUNC(ThreadJoin,      rt_thread_join,         "Viper.Threads.Thread.Join",        "void(obj)")
RT_FUNC(ThreadTryJoin,   rt_thread_try_join,     "Viper.Threads.Thread.TryJoin",     "i1(obj)")
RT_FUNC(ThreadJoinFor,   rt_thread_join_for,     "Viper.Threads.Thread.JoinFor",     "i1(obj,i64)")
RT_FUNC(ThreadGetId,     rt_thread_get_id,       "Viper.Threads.Thread.get_Id",      "i64(obj)")
RT_FUNC(ThreadGetIsAlive,rt_thread_get_is_alive, "Viper.Threads.Thread.get_IsAlive", "i1(obj)")
RT_FUNC(ThreadSleep,     rt_thread_sleep,        "Viper.Threads.Thread.Sleep",       "void(i64)")
RT_FUNC(ThreadYield,     rt_thread_yield,        "Viper.Threads.Thread.Yield",       "void()")

RT_FUNC(SafeI64New,             rt_safe_i64_new,              "Viper.Threads.SafeI64.New",             "obj(i64)")
RT_FUNC(SafeI64Get,             rt_safe_i64_get,              "Viper.Threads.SafeI64.Get",             "i64(obj)")
RT_FUNC(SafeI64Set,             rt_safe_i64_set,              "Viper.Threads.SafeI64.Set",             "void(obj,i64)")
RT_FUNC(SafeI64Add,             rt_safe_i64_add,              "Viper.Threads.SafeI64.Add",             "i64(obj,i64)")
RT_FUNC(SafeI64CompareExchange, rt_safe_i64_compare_exchange, "Viper.Threads.SafeI64.CompareExchange", "i64(obj,i64,i64)")

RT_FUNC(GateNew,         rt_gate_new,          "Viper.Threads.Gate.New",           "obj(i64)")
RT_FUNC(GateEnter,       rt_gate_enter,        "Viper.Threads.Gate.Enter",         "void(obj)")
RT_FUNC(GateTryEnter,    rt_gate_try_enter,    "Viper.Threads.Gate.TryEnter",      "i1(obj)")
RT_FUNC(GateTryEnterFor, rt_gate_try_enter_for,"Viper.Threads.Gate.TryEnterFor",   "i1(obj,i64)")
RT_FUNC(GateLeave,       rt_gate_leave,        "Viper.Threads.Gate.Leave",         "void(obj)")
RT_FUNC(GateLeaveMany,   rt_gate_leave_many,   "Viper.Threads.Gate.LeaveMany",     "void(obj,i64)")
RT_FUNC(GateGetPermits,  rt_gate_get_permits,  "Viper.Threads.Gate.get_Permits",   "i64(obj)")

RT_FUNC(BarrierNew,        rt_barrier_new,         "Viper.Threads.Barrier.New",         "obj(i64)")
RT_FUNC(BarrierArrive,     rt_barrier_arrive,      "Viper.Threads.Barrier.Arrive",      "i64(obj)")
RT_FUNC(BarrierReset,      rt_barrier_reset,       "Viper.Threads.Barrier.Reset",       "void(obj)")
RT_FUNC(BarrierGetParties, rt_barrier_get_parties, "Viper.Threads.Barrier.get_Parties", "i64(obj)")
RT_FUNC(BarrierGetWaiting, rt_barrier_get_waiting, "Viper.Threads.Barrier.get_Waiting", "i64(obj)")

RT_FUNC(RwLockNew,             rt_rwlock_new,                "Viper.Threads.RwLock.New",              "obj()")
RT_FUNC(RwLockReadEnter,       rt_rwlock_read_enter,         "Viper.Threads.RwLock.ReadEnter",        "void(obj)")
RT_FUNC(RwLockReadExit,        rt_rwlock_read_exit,          "Viper.Threads.RwLock.ReadExit",         "void(obj)")
RT_FUNC(RwLockWriteEnter,      rt_rwlock_write_enter,        "Viper.Threads.RwLock.WriteEnter",       "void(obj)")
RT_FUNC(RwLockWriteExit,       rt_rwlock_write_exit,         "Viper.Threads.RwLock.WriteExit",        "void(obj)")
RT_FUNC(RwLockTryReadEnter,    rt_rwlock_try_read_enter,     "Viper.Threads.RwLock.TryReadEnter",     "i1(obj)")
RT_FUNC(RwLockTryWriteEnter,   rt_rwlock_try_write_enter,    "Viper.Threads.RwLock.TryWriteEnter",    "i1(obj)")
RT_FUNC(RwLockGetReaders,      rt_rwlock_get_readers,        "Viper.Threads.RwLock.get_Readers",      "i64(obj)")
RT_FUNC(RwLockGetIsWriteLocked,rt_rwlock_get_is_write_locked,"Viper.Threads.RwLock.get_IsWriteLocked","i1(obj)")

//=============================================================================
// TIME - CLOCK
//=============================================================================

RT_FUNC(ClockSleep,   rt_clock_sleep,    "Viper.Time.Clock.Sleep",   "void(i64)")
RT_FUNC(ClockTicks,   rt_clock_ticks,    "Viper.Time.Clock.Ticks",   "i64()")
RT_FUNC(ClockTicksUs, rt_clock_ticks_us, "Viper.Time.Clock.TicksUs", "i64()")

// Legacy aliases for backward compatibility
RT_ALIAS("Viper.Time.SleepMs", ClockSleep)
RT_ALIAS("Viper.Time.GetTickCount", ClockTicks)

//=============================================================================
// TIME - COUNTDOWN
//=============================================================================

RT_FUNC(CountdownNew,         rt_countdown_new,          "Viper.Time.Countdown.New",          "obj(i64)")
RT_FUNC(CountdownStart,       rt_countdown_start,        "Viper.Time.Countdown.Start",        "void(obj)")
RT_FUNC(CountdownStop,        rt_countdown_stop,         "Viper.Time.Countdown.Stop",         "void(obj)")
RT_FUNC(CountdownReset,       rt_countdown_reset,        "Viper.Time.Countdown.Reset",        "void(obj)")
RT_FUNC(CountdownElapsed,     rt_countdown_elapsed,      "Viper.Time.Countdown.get_Elapsed",  "i64(obj)")
RT_FUNC(CountdownRemaining,   rt_countdown_remaining,    "Viper.Time.Countdown.get_Remaining","i64(obj)")
RT_FUNC(CountdownExpired,     rt_countdown_expired,      "Viper.Time.Countdown.get_Expired",  "i1(obj)")
RT_FUNC(CountdownInterval,    rt_countdown_interval,     "Viper.Time.Countdown.get_Interval", "i64(obj)")
RT_FUNC(CountdownSetInterval, rt_countdown_set_interval, "Viper.Time.Countdown.set_Interval", "void(obj,i64)")
RT_FUNC(CountdownIsRunning,   rt_countdown_is_running,   "Viper.Time.Countdown.get_IsRunning","i1(obj)")
RT_FUNC(CountdownWait,        rt_countdown_wait,         "Viper.Time.Countdown.Wait",         "void(obj)")

//=============================================================================
// TYPE CONVERSION
//=============================================================================

RT_FUNC(ParseDouble, rt_parse_double, "Viper.Parse.Double",     "i32(ptr,ptr)")
RT_FUNC(ParseInt64,  rt_parse_int64,  "Viper.Parse.Int64",      "i32(ptr,ptr)")
RT_FUNC(ToDouble,    rt_to_double,    "Viper.Convert.ToDouble", "f64(str)")
RT_FUNC(ToInt,       rt_to_int,       "Viper.Convert.ToInt",    "i64(str)")

// Safe parsing functions (return success/failure, use defaults)
RT_FUNC(ParseTryInt,   rt_parse_try_int,   "Viper.Parse.TryInt",   "i1(str,ptr)")
RT_FUNC(ParseTryNum,   rt_parse_try_num,   "Viper.Parse.TryNum",   "i1(str,ptr)")
RT_FUNC(ParseTryBool,  rt_parse_try_bool,  "Viper.Parse.TryBool",  "i1(str,ptr)")
RT_FUNC(ParseIntOr,    rt_parse_int_or,    "Viper.Parse.IntOr",    "i64(str,i64)")
RT_FUNC(ParseNumOr,    rt_parse_num_or,    "Viper.Parse.NumOr",    "f64(str,f64)")
RT_FUNC(ParseBoolOr,   rt_parse_bool_or,   "Viper.Parse.BoolOr",   "i1(str,i1)")
RT_FUNC(ParseIsInt,    rt_parse_is_int,    "Viper.Parse.IsInt",    "i1(str)")
RT_FUNC(ParseIsNum,    rt_parse_is_num,    "Viper.Parse.IsNum",    "i1(str)")
RT_FUNC(ParseIntRadix, rt_parse_int_radix, "Viper.Parse.IntRadix", "i64(str,i64,i64)")

//=============================================================================
// FMT (value formatting)
//=============================================================================

RT_FUNC(FmtInt,      rt_fmt_int,       "Viper.Fmt.Int",      "str(i64)")
RT_FUNC(FmtIntRadix, rt_fmt_int_radix, "Viper.Fmt.IntRadix", "str(i64,i64)")
RT_FUNC(FmtIntPad,   rt_fmt_int_pad,   "Viper.Fmt.IntPad",   "str(i64,i64,str)")
RT_FUNC(FmtNum,      rt_fmt_num,       "Viper.Fmt.Num",      "str(f64)")
RT_FUNC(FmtNumFixed, rt_fmt_num_fixed, "Viper.Fmt.NumFixed", "str(f64,i64)")
RT_FUNC(FmtNumSci,   rt_fmt_num_sci,   "Viper.Fmt.NumSci",   "str(f64,i64)")
RT_FUNC(FmtNumPct,   rt_fmt_num_pct,   "Viper.Fmt.NumPct",   "str(f64,i64)")
RT_FUNC(FmtBool,     rt_fmt_bool,      "Viper.Fmt.Bool",     "str(i1)")
RT_FUNC(FmtBoolYN,   rt_fmt_bool_yn,   "Viper.Fmt.BoolYN",   "str(i1)")
RT_FUNC(FmtSize,     rt_fmt_size,      "Viper.Fmt.Size",     "str(i64)")
RT_FUNC(FmtHex,      rt_fmt_hex,       "Viper.Fmt.Hex",      "str(i64)")
RT_FUNC(FmtHexPad,   rt_fmt_hex_pad,   "Viper.Fmt.HexPad",   "str(i64,i64)")
RT_FUNC(FmtBin,      rt_fmt_bin,       "Viper.Fmt.Bin",      "str(i64)")
RT_FUNC(FmtOct,      rt_fmt_oct,       "Viper.Fmt.Oct",      "str(i64)")

//=============================================================================
// VEC2
//=============================================================================

RT_FUNC(Vec2Add,    rt_vec2_add,    "Viper.Vec2.Add",    "obj(obj,obj)")
RT_FUNC(Vec2Angle,  rt_vec2_angle,  "Viper.Vec2.Angle",  "f64(obj)")
RT_FUNC(Vec2Cross,  rt_vec2_cross,  "Viper.Vec2.Cross",  "f64(obj,obj)")
RT_FUNC(Vec2Dist,   rt_vec2_dist,   "Viper.Vec2.Dist",   "f64(obj,obj)")
RT_FUNC(Vec2Div,    rt_vec2_div,    "Viper.Vec2.Div",    "obj(obj,f64)")
RT_FUNC(Vec2Dot,    rt_vec2_dot,    "Viper.Vec2.Dot",    "f64(obj,obj)")
RT_FUNC(Vec2Len,    rt_vec2_len,    "Viper.Vec2.Len",    "f64(obj)")
RT_FUNC(Vec2LenSq,  rt_vec2_len_sq, "Viper.Vec2.LenSq",  "f64(obj)")
RT_FUNC(Vec2Lerp,   rt_vec2_lerp,   "Viper.Vec2.Lerp",   "obj(obj,obj,f64)")
RT_FUNC(Vec2Mul,    rt_vec2_mul,    "Viper.Vec2.Mul",    "obj(obj,f64)")
RT_FUNC(Vec2Neg,    rt_vec2_neg,    "Viper.Vec2.Neg",    "obj(obj)")
RT_FUNC(Vec2New,    rt_vec2_new,    "Viper.Vec2.New",    "obj(f64,f64)")
RT_FUNC(Vec2Norm,   rt_vec2_norm,   "Viper.Vec2.Norm",   "obj(obj)")
RT_FUNC(Vec2One,    rt_vec2_one,    "Viper.Vec2.One",    "obj()")
RT_FUNC(Vec2Rotate, rt_vec2_rotate, "Viper.Vec2.Rotate", "obj(obj,f64)")
RT_FUNC(Vec2Sub,    rt_vec2_sub,    "Viper.Vec2.Sub",    "obj(obj,obj)")
RT_FUNC(Vec2X,      rt_vec2_x,      "Viper.Vec2.get_X",  "f64(obj)")
RT_FUNC(Vec2Y,      rt_vec2_y,      "Viper.Vec2.get_Y",  "f64(obj)")
RT_FUNC(Vec2Zero,   rt_vec2_zero,   "Viper.Vec2.Zero",   "obj()")

//=============================================================================
// VEC3
//=============================================================================

RT_FUNC(Vec3Add,    rt_vec3_add,    "Viper.Vec3.Add",    "obj(obj,obj)")
RT_FUNC(Vec3Cross,  rt_vec3_cross,  "Viper.Vec3.Cross",  "obj(obj,obj)")
RT_FUNC(Vec3Dist,   rt_vec3_dist,   "Viper.Vec3.Dist",   "f64(obj,obj)")
RT_FUNC(Vec3Div,    rt_vec3_div,    "Viper.Vec3.Div",    "obj(obj,f64)")
RT_FUNC(Vec3Dot,    rt_vec3_dot,    "Viper.Vec3.Dot",    "f64(obj,obj)")
RT_FUNC(Vec3Len,    rt_vec3_len,    "Viper.Vec3.Len",    "f64(obj)")
RT_FUNC(Vec3LenSq,  rt_vec3_len_sq, "Viper.Vec3.LenSq",  "f64(obj)")
RT_FUNC(Vec3Lerp,   rt_vec3_lerp,   "Viper.Vec3.Lerp",   "obj(obj,obj,f64)")
RT_FUNC(Vec3Mul,    rt_vec3_mul,    "Viper.Vec3.Mul",    "obj(obj,f64)")
RT_FUNC(Vec3Neg,    rt_vec3_neg,    "Viper.Vec3.Neg",    "obj(obj)")
RT_FUNC(Vec3New,    rt_vec3_new,    "Viper.Vec3.New",    "obj(f64,f64,f64)")
RT_FUNC(Vec3Norm,   rt_vec3_norm,   "Viper.Vec3.Norm",   "obj(obj)")
RT_FUNC(Vec3One,    rt_vec3_one,    "Viper.Vec3.One",    "obj()")
RT_FUNC(Vec3Sub,    rt_vec3_sub,    "Viper.Vec3.Sub",    "obj(obj,obj)")
RT_FUNC(Vec3X,      rt_vec3_x,      "Viper.Vec3.get_X",  "f64(obj)")
RT_FUNC(Vec3Y,      rt_vec3_y,      "Viper.Vec3.get_Y",  "f64(obj)")
RT_FUNC(Vec3Z,      rt_vec3_z,      "Viper.Vec3.get_Z",  "f64(obj)")
RT_FUNC(Vec3Zero,   rt_vec3_zero,   "Viper.Vec3.Zero",   "obj()")

//=============================================================================
//=============================================================================
//
// RUNTIME CLASSES
//
// Classes define the OOP interface exposed to Viper languages.
// Ordered alphabetically by fully-qualified class name.
//
//=============================================================================
//=============================================================================

// Viper.Bits - bit manipulation utilities
RT_CLASS_BEGIN("Viper.Bits", Bits, "obj", none)
    RT_METHOD("And", "i64(i64,i64)", BitsAnd)
    RT_METHOD("Clear", "i64(i64,i64)", BitsClear)
    RT_METHOD("Count", "i64(i64)", BitsCount)
    RT_METHOD("Flip", "i64(i64)", BitsFlip)
    RT_METHOD("Get", "i1(i64,i64)", BitsGet)
    RT_METHOD("LeadZ", "i64(i64)", BitsLeadZ)
    RT_METHOD("Not", "i64(i64)", BitsNot)
    RT_METHOD("Or", "i64(i64,i64)", BitsOr)
    RT_METHOD("Rotl", "i64(i64,i64)", BitsRotl)
    RT_METHOD("Rotr", "i64(i64,i64)", BitsRotr)
    RT_METHOD("Set", "i64(i64,i64)", BitsSet)
    RT_METHOD("Shl", "i64(i64,i64)", BitsShl)
    RT_METHOD("Shr", "i64(i64,i64)", BitsShr)
    RT_METHOD("Swap", "i64(i64)", BitsSwap)
    RT_METHOD("Toggle", "i64(i64,i64)", BitsToggle)
    RT_METHOD("TrailZ", "i64(i64)", BitsTrailZ)
    RT_METHOD("Ushr", "i64(i64,i64)", BitsUshr)
    RT_METHOD("Xor", "i64(i64,i64)", BitsXor)
RT_CLASS_END()

// Viper.Collections.Bytes - efficient byte array
RT_CLASS_BEGIN("Viper.Collections.Bytes", Bytes, "obj", BytesNew)
    RT_PROP("Len", "i64", BytesLen, none)
    RT_METHOD("Clone", "obj()", BytesClone)
    RT_METHOD("Copy", "void(i64,obj,i64,i64)", BytesCopy)
    RT_METHOD("Fill", "void(i64)", BytesFill)
    RT_METHOD("Find", "i64(i64)", BytesFind)
    RT_METHOD("Get", "i64(i64)", BytesGet)
    RT_METHOD("Set", "void(i64,i64)", BytesSet)
    RT_METHOD("Slice", "obj(i64,i64)", BytesSlice)
    RT_METHOD("ToBase64", "str()", BytesToBase64)
    RT_METHOD("ToHex", "str()", BytesToHex)
    RT_METHOD("ToStr", "str()", BytesToStr)
RT_CLASS_END()

// Viper.Collections.Bag - set of unique strings
RT_CLASS_BEGIN("Viper.Collections.Bag", Bag, "obj", BagNew)
    RT_PROP("IsEmpty", "i1", BagIsEmpty, none)
    RT_PROP("Len", "i64", BagLen, none)
    RT_METHOD("Clear", "void()", BagClear)
    RT_METHOD("Common", "obj(obj)", BagCommon)
    RT_METHOD("Diff", "obj(obj)", BagDiff)
    RT_METHOD("Drop", "i1(str)", BagDrop)
    RT_METHOD("Has", "i1(str)", BagHas)
    RT_METHOD("Items", "obj()", BagItems)
    RT_METHOD("Merge", "obj(obj)", BagMerge)
    RT_METHOD("Put", "i1(str)", BagPut)
RT_CLASS_END()

// Viper.Collections.List
RT_CLASS_BEGIN("Viper.Collections.List", List, "obj", ListNew)
    RT_PROP("Count", "i64", ListGetCount, none)
    RT_METHOD("Add", "void(obj)", ListAdd)
    RT_METHOD("Clear", "void()", ListClear)
    RT_METHOD("Find", "i64(obj)", ListFind)
    RT_METHOD("Has", "i1(obj)", ListHas)
    RT_METHOD("Insert", "void(i64,obj)", ListInsert)
    RT_METHOD("Remove", "i1(obj)", ListRemove)
    RT_METHOD("RemoveAt", "void(i64)", ListRemoveAt)
    RT_METHOD("get_Item", "obj(i64)", ListGetItem)
    RT_METHOD("set_Item", "void(i64,obj)", ListSetItem)
RT_CLASS_END()

// Viper.Collections.Map - key-value dictionary (string keys)
RT_CLASS_BEGIN("Viper.Collections.Map", Map, "obj", MapNew)
    RT_PROP("IsEmpty", "i1", MapIsEmpty, none)
    RT_PROP("Len", "i64", MapLen, none)
    RT_METHOD("Clear", "void()", MapClear)
    RT_METHOD("Get", "obj(str)", MapGet)
    RT_METHOD("GetOr", "obj(str,obj)", MapGetOr)
    RT_METHOD("Has", "i1(str)", MapHas)
    RT_METHOD("Keys", "obj()", MapKeys)
    RT_METHOD("Remove", "i1(str)", MapRemove)
    RT_METHOD("Set", "void(str,obj)", MapSet)
    RT_METHOD("SetIfMissing", "i1(str,obj)", MapSetIfMissing)
    RT_METHOD("Values", "obj()", MapValues)
RT_CLASS_END()

// Viper.Collections.Queue - FIFO collection
RT_CLASS_BEGIN("Viper.Collections.Queue", Queue, "obj", QueueNew)
    RT_PROP("IsEmpty", "i1", QueueIsEmpty, none)
    RT_PROP("Len", "i64", QueueLen, none)
    RT_METHOD("Add", "void(obj)", QueueAdd)
    RT_METHOD("Clear", "void()", QueueClear)
    RT_METHOD("Peek", "obj()", QueuePeek)
    RT_METHOD("Take", "obj()", QueueTake)
RT_CLASS_END()

// Viper.Collections.Heap - priority queue (binary heap)
RT_CLASS_BEGIN("Viper.Collections.Heap", Heap, "obj", HeapNew)
    RT_PROP("IsEmpty", "i1", HeapIsEmpty, none)
    RT_PROP("IsMax", "i1", HeapIsMax, none)
    RT_PROP("Len", "i64", HeapLen, none)
    RT_METHOD("Clear", "void()", HeapClear)
    RT_METHOD("Peek", "obj()", HeapPeek)
    RT_METHOD("Pop", "obj()", HeapPop)
    RT_METHOD("Push", "void(i64,obj)", HeapPush)
    RT_METHOD("ToSeq", "obj()", HeapToSeq)
    RT_METHOD("TryPeek", "obj()", HeapTryPeek)
    RT_METHOD("TryPop", "obj()", HeapTryPop)
RT_CLASS_END()

// Viper.Collections.Ring - fixed-size circular buffer
RT_CLASS_BEGIN("Viper.Collections.Ring", Ring, "obj", RingNew)
    RT_PROP("Cap", "i64", RingCap, none)
    RT_PROP("IsEmpty", "i1", RingIsEmpty, none)
    RT_PROP("IsFull", "i1", RingIsFull, none)
    RT_PROP("Len", "i64", RingLen, none)
    RT_METHOD("Clear", "void()", RingClear)
    RT_METHOD("Get", "obj(i64)", RingGet)
    RT_METHOD("Peek", "obj()", RingPeek)
    RT_METHOD("Pop", "obj()", RingPop)
    RT_METHOD("Push", "void(obj)", RingPush)
RT_CLASS_END()

// Viper.Collections.Seq - dynamic sequence/array
RT_CLASS_BEGIN("Viper.Collections.Seq", Seq, "obj", SeqNew)
    RT_PROP("Cap", "i64", SeqCap, none)
    RT_PROP("IsEmpty", "i1", SeqIsEmpty, none)
    RT_PROP("Len", "i64", SeqLen, none)
    RT_METHOD("Clear", "void()", SeqClear)
    RT_METHOD("Clone", "obj()", SeqClone)
    RT_METHOD("Find", "i64(obj)", SeqFind)
    RT_METHOD("First", "obj()", SeqFirst)
    RT_METHOD("Get", "obj(i64)", SeqGet)
    RT_METHOD("Has", "i1(obj)", SeqHas)
    RT_METHOD("Insert", "void(i64,obj)", SeqInsert)
    RT_METHOD("Last", "obj()", SeqLast)
    RT_METHOD("Peek", "obj()", SeqPeek)
    RT_METHOD("Pop", "obj()", SeqPop)
    RT_METHOD("Push", "void(obj)", SeqPush)
    RT_METHOD("PushAll", "void(obj)", SeqPushAll)
    RT_METHOD("Remove", "obj(i64)", SeqRemove)
    RT_METHOD("Reverse", "void()", SeqReverse)
    RT_METHOD("Set", "void(i64,obj)", SeqSet)
    RT_METHOD("Shuffle", "void()", SeqShuffle)
    RT_METHOD("Slice", "obj(i64,i64)", SeqSlice)
RT_CLASS_END()

// Viper.Collections.Stack - LIFO collection
RT_CLASS_BEGIN("Viper.Collections.Stack", Stack, "obj", StackNew)
    RT_PROP("IsEmpty", "i1", StackIsEmpty, none)
    RT_PROP("Len", "i64", StackLen, none)
    RT_METHOD("Clear", "void()", StackClear)
    RT_METHOD("Peek", "obj()", StackPeek)
    RT_METHOD("Pop", "obj()", StackPop)
    RT_METHOD("Push", "void(obj)", StackPush)
RT_CLASS_END()

// Viper.Collections.TreeMap - sorted key-value map
RT_CLASS_BEGIN("Viper.Collections.TreeMap", TreeMap, "obj", TreeMapNew)
    RT_PROP("IsEmpty", "i1", TreeMapIsEmpty, none)
    RT_PROP("Len", "i64", TreeMapLen, none)
    RT_METHOD("Ceil", "str(str)", TreeMapCeil)
    RT_METHOD("Clear", "void()", TreeMapClear)
    RT_METHOD("Drop", "i1(str)", TreeMapDrop)
    RT_METHOD("First", "str()", TreeMapFirst)
    RT_METHOD("Floor", "str(str)", TreeMapFloor)
    RT_METHOD("Get", "obj(str)", TreeMapGet)
    RT_METHOD("Has", "i1(str)", TreeMapHas)
    RT_METHOD("Keys", "obj()", TreeMapKeys)
    RT_METHOD("Last", "str()", TreeMapLast)
    RT_METHOD("Set", "void(str,obj)", TreeMapSet)
    RT_METHOD("Values", "obj()", TreeMapValues)
RT_CLASS_END()

// Viper.Convert - static utility class
RT_CLASS_BEGIN("Viper.Convert", Convert, "obj", none)
    RT_METHOD("ToDouble", "f64(str)", ToDouble)
    RT_METHOD("ToInt64", "i64(str)", ToInt)
    RT_METHOD("ToString_Double", "str(f64)", F64ToStr)
    RT_METHOD("ToString_Int", "str(i64)", IntToStr)
RT_CLASS_END()

// Viper.Crypto.Hash - cryptographic hash functions (MD5, SHA1, SHA256, CRC32)
RT_CLASS_BEGIN("Viper.Crypto.Hash", Hash, "obj", none)
    RT_METHOD("CRC32", "i64(str)", HashCRC32)
    RT_METHOD("CRC32Bytes", "i64(obj)", HashCRC32Bytes)
    RT_METHOD("MD5", "str(str)", HashMD5)
    RT_METHOD("MD5Bytes", "str(obj)", HashMD5Bytes)
    RT_METHOD("SHA1", "str(str)", HashSHA1)
    RT_METHOD("SHA1Bytes", "str(obj)", HashSHA1Bytes)
    RT_METHOD("SHA256", "str(str)", HashSHA256)
    RT_METHOD("SHA256Bytes", "str(obj)", HashSHA256Bytes)
    RT_METHOD("HmacMD5", "str(str,str)", HashHmacMD5)
    RT_METHOD("HmacMD5Bytes", "str(obj,obj)", HashHmacMD5Bytes)
    RT_METHOD("HmacSHA1", "str(str,str)", HashHmacSHA1)
    RT_METHOD("HmacSHA1Bytes", "str(obj,obj)", HashHmacSHA1Bytes)
    RT_METHOD("HmacSHA256", "str(str,str)", HashHmacSHA256)
    RT_METHOD("HmacSHA256Bytes", "str(obj,obj)", HashHmacSHA256Bytes)
RT_CLASS_END()

// Viper.Crypto.KeyDerive - key derivation functions
RT_CLASS_BEGIN("Viper.Crypto.KeyDerive", KeyDerive, "obj", none)
    RT_METHOD("Pbkdf2SHA256", "obj(str,obj,i64,i64)", KeyDerivePbkdf2SHA256)
    RT_METHOD("Pbkdf2SHA256Str", "str(str,obj,i64,i64)", KeyDerivePbkdf2SHA256Str)
RT_CLASS_END()

// Viper.Crypto.Rand - secure random number generation
RT_CLASS_BEGIN("Viper.Crypto.Rand", CryptoRand, "obj", none)
    RT_METHOD("Bytes", "obj(i64)", CryptoRandBytes)
    RT_METHOD("Int", "i64(i64,i64)", CryptoRandInt)
RT_CLASS_END()

// Viper.DateTime - static utility class
RT_CLASS_BEGIN("Viper.DateTime", DateTime, "obj", none)
    RT_METHOD("AddDays", "i64(i64,i64)", DateTimeAddDays)
    RT_METHOD("AddSeconds", "i64(i64,i64)", DateTimeAddSeconds)
    RT_METHOD("Create", "i64(i64,i64,i64,i64,i64,i64)", DateTimeCreate)
    RT_METHOD("Day", "i64(i64)", DateTimeDay)
    RT_METHOD("DayOfWeek", "i64(i64)", DateTimeDayOfWeek)
    RT_METHOD("Diff", "i64(i64,i64)", DateTimeDiff)
    RT_METHOD("Format", "str(i64,str)", DateTimeFormat)
    RT_METHOD("Hour", "i64(i64)", DateTimeHour)
    RT_METHOD("Minute", "i64(i64)", DateTimeMinute)
    RT_METHOD("Month", "i64(i64)", DateTimeMonth)
    RT_METHOD("Now", "i64()", DateTimeNow)
    RT_METHOD("NowMs", "i64()", DateTimeNowMs)
    RT_METHOD("Second", "i64(i64)", DateTimeSecond)
    RT_METHOD("ToISO", "str(i64)", DateTimeToISO)
    RT_METHOD("Year", "i64(i64)", DateTimeYear)
RT_CLASS_END()

// Viper.Diagnostics.Stopwatch - high-precision timing
RT_CLASS_BEGIN("Viper.Diagnostics.Stopwatch", Stopwatch, "obj", StopwatchNew)
    RT_PROP("ElapsedMs", "i64", StopwatchElapsedMs, none)
    RT_PROP("ElapsedNs", "i64", StopwatchElapsedNs, none)
    RT_PROP("ElapsedUs", "i64", StopwatchElapsedUs, none)
    RT_PROP("IsRunning", "i1", StopwatchIsRunning, none)
    RT_METHOD("Reset", "void()", StopwatchReset)
    RT_METHOD("Restart", "void()", StopwatchRestart)
    RT_METHOD("Start", "void()", StopwatchStart)
    RT_METHOD("Stop", "void()", StopwatchStop)
RT_CLASS_END()

// Viper.Environment - static utility class
RT_CLASS_BEGIN("Viper.Environment", Environment, "obj", none)
    RT_METHOD("EndProgram", "void(i64)", EnvExit)
    RT_METHOD("GetArgument", "str(i64)", EnvArgGet)
    RT_METHOD("GetArgumentCount", "i64()", EnvArgCount)
    RT_METHOD("GetCommandLine", "str()", EnvCmdLine)
    RT_METHOD("GetVariable", "str(str)", EnvGetVar)
    RT_METHOD("HasVariable", "i1(str)", EnvHasVar)
    RT_METHOD("IsNative", "i1()", EnvIsNative)
    RT_METHOD("SetVariable", "void(str,str)", EnvSetVar)
RT_CLASS_END()

// Viper.Exec - external command execution
RT_CLASS_BEGIN("Viper.Exec", Exec, "obj", none)
    RT_METHOD("Capture", "str(str)", ExecCapture)
    RT_METHOD("CaptureArgs", "str(str,obj)", ExecCaptureArgs)
    RT_METHOD("Run", "i64(str)", ExecRun)
    RT_METHOD("RunArgs", "i64(str,obj)", ExecRunArgs)
    RT_METHOD("Shell", "i64(str)", ExecShell)
    RT_METHOD("ShellCapture", "str(str)", ExecShellCapture)
RT_CLASS_END()

// Viper.Fmt - value formatting utilities
RT_CLASS_BEGIN("Viper.Fmt", Fmt, "obj", none)
    RT_METHOD("Bin", "str(i64)", FmtBin)
    RT_METHOD("Bool", "str(i1)", FmtBool)
    RT_METHOD("BoolYN", "str(i1)", FmtBoolYN)
    RT_METHOD("Hex", "str(i64)", FmtHex)
    RT_METHOD("HexPad", "str(i64,i64)", FmtHexPad)
    RT_METHOD("Int", "str(i64)", FmtInt)
    RT_METHOD("IntPad", "str(i64,i64,str)", FmtIntPad)
    RT_METHOD("IntRadix", "str(i64,i64)", FmtIntRadix)
    RT_METHOD("Num", "str(f64)", FmtNum)
    RT_METHOD("NumFixed", "str(f64,i64)", FmtNumFixed)
    RT_METHOD("NumPct", "str(f64,i64)", FmtNumPct)
    RT_METHOD("NumSci", "str(f64,i64)", FmtNumSci)
    RT_METHOD("Oct", "str(i64)", FmtOct)
    RT_METHOD("Size", "str(i64)", FmtSize)
RT_CLASS_END()

// Viper.Graphics.Canvas - drawing surface
RT_CLASS_BEGIN("Viper.Graphics.Canvas", Canvas, "obj", CanvasNew)
    RT_PROP("Height", "i64", CanvasHeight, none)
    RT_PROP("ShouldClose", "i64", CanvasShouldClose, none)
    RT_PROP("Width", "i64", CanvasWidth, none)
    RT_METHOD("Box", "void(i64,i64,i64,i64,i64)", CanvasBox)
    RT_METHOD("Clear", "void(i64)", CanvasClear)
    RT_METHOD("Disc", "void(i64,i64,i64,i64)", CanvasDisc)
    RT_METHOD("Flip", "void()", CanvasFlip)
    RT_METHOD("Frame", "void(i64,i64,i64,i64,i64)", CanvasFrame)
    RT_METHOD("KeyHeld", "i64(i64)", CanvasKeyHeld)
    RT_METHOD("Line", "void(i64,i64,i64,i64,i64)", CanvasLine)
    RT_METHOD("Plot", "void(i64,i64,i64)", CanvasPlot)
    RT_METHOD("Poll", "i64()", CanvasPoll)
    RT_METHOD("Ring", "void(i64,i64,i64,i64)", CanvasRing)
RT_CLASS_END()

// Viper.Graphics.Color - color utilities
RT_CLASS_BEGIN("Viper.Graphics.Color", Color, "obj", none)
    RT_METHOD("RGB", "i64(i64,i64,i64)", ColorRGB)
    RT_METHOD("RGBA", "i64(i64,i64,i64,i64)", ColorRGBA)
RT_CLASS_END()

// Viper.Graphics.Pixels - software image buffer
RT_CLASS_BEGIN("Viper.Graphics.Pixels", Pixels, "obj", PixelsNew)
    RT_PROP("Width", "i64", PixelsWidth, none)
    RT_PROP("Height", "i64", PixelsHeight, none)
    RT_METHOD("Get", "i64(i64,i64)", PixelsGet)
    RT_METHOD("Set", "void(i64,i64,i64)", PixelsSet)
    RT_METHOD("Fill", "void(i64)", PixelsFill)
    RT_METHOD("Clear", "void()", PixelsClear)
    RT_METHOD("Copy", "void(i64,i64,obj,i64,i64,i64,i64)", PixelsCopy)
    RT_METHOD("Clone", "obj()", PixelsClone)
    RT_METHOD("ToBytes", "obj()", PixelsToBytes)
RT_CLASS_END()

// Viper.Input.Keyboard - keyboard input handling (static class)
RT_CLASS_BEGIN("Viper.Input.Keyboard", Keyboard, "obj", none)
    // Polling methods (current state)
    RT_METHOD("IsDown", "i1(i64)", KeyboardIsDown)
    RT_METHOD("IsUp", "i1(i64)", KeyboardIsUp)
    RT_METHOD("AnyDown", "i1()", KeyboardAnyDown)
    RT_METHOD("GetDown", "i64()", KeyboardGetDown)

    // Event methods (since last Poll)
    RT_METHOD("WasPressed", "i1(i64)", KeyboardWasPressed)
    RT_METHOD("WasReleased", "i1(i64)", KeyboardWasReleased)
    RT_METHOD("GetPressed", "obj()", KeyboardGetPressed)
    RT_METHOD("GetReleased", "obj()", KeyboardGetReleased)

    // Text input
    RT_METHOD("GetText", "str()", KeyboardGetText)
    RT_METHOD("EnableTextInput", "void()", KeyboardEnableTextInput)
    RT_METHOD("DisableTextInput", "void()", KeyboardDisableTextInput)

    // Modifier state
    RT_METHOD("Shift", "i1()", KeyboardShift)
    RT_METHOD("Ctrl", "i1()", KeyboardCtrl)
    RT_METHOD("Alt", "i1()", KeyboardAlt)
    RT_METHOD("CapsLock", "i1()", KeyboardCapsLock)

    // Helper
    RT_METHOD("KeyName", "str(i64)", KeyboardKeyName)

    // Key code constants - Unknown
    RT_PROP("KEY_UNKNOWN", "i64", KeyboardKeyUnknown, none)

    // Letters (ASCII uppercase: 65-90)
    RT_PROP("KEY_A", "i64", KeyboardKeyA, none)
    RT_PROP("KEY_B", "i64", KeyboardKeyB, none)
    RT_PROP("KEY_C", "i64", KeyboardKeyC, none)
    RT_PROP("KEY_D", "i64", KeyboardKeyD, none)
    RT_PROP("KEY_E", "i64", KeyboardKeyE, none)
    RT_PROP("KEY_F", "i64", KeyboardKeyF, none)
    RT_PROP("KEY_G", "i64", KeyboardKeyG, none)
    RT_PROP("KEY_H", "i64", KeyboardKeyH, none)
    RT_PROP("KEY_I", "i64", KeyboardKeyI, none)
    RT_PROP("KEY_J", "i64", KeyboardKeyJ, none)
    RT_PROP("KEY_K", "i64", KeyboardKeyK, none)
    RT_PROP("KEY_L", "i64", KeyboardKeyL, none)
    RT_PROP("KEY_M", "i64", KeyboardKeyM, none)
    RT_PROP("KEY_N", "i64", KeyboardKeyN, none)
    RT_PROP("KEY_O", "i64", KeyboardKeyO, none)
    RT_PROP("KEY_P", "i64", KeyboardKeyP, none)
    RT_PROP("KEY_Q", "i64", KeyboardKeyQ, none)
    RT_PROP("KEY_R", "i64", KeyboardKeyR, none)
    RT_PROP("KEY_S", "i64", KeyboardKeyS, none)
    RT_PROP("KEY_T", "i64", KeyboardKeyT, none)
    RT_PROP("KEY_U", "i64", KeyboardKeyU, none)
    RT_PROP("KEY_V", "i64", KeyboardKeyV, none)
    RT_PROP("KEY_W", "i64", KeyboardKeyW, none)
    RT_PROP("KEY_X", "i64", KeyboardKeyX, none)
    RT_PROP("KEY_Y", "i64", KeyboardKeyY, none)
    RT_PROP("KEY_Z", "i64", KeyboardKeyZ, none)

    // Numbers (ASCII digits: 48-57)
    RT_PROP("KEY_0", "i64", KeyboardKey0, none)
    RT_PROP("KEY_1", "i64", KeyboardKey1, none)
    RT_PROP("KEY_2", "i64", KeyboardKey2, none)
    RT_PROP("KEY_3", "i64", KeyboardKey3, none)
    RT_PROP("KEY_4", "i64", KeyboardKey4, none)
    RT_PROP("KEY_5", "i64", KeyboardKey5, none)
    RT_PROP("KEY_6", "i64", KeyboardKey6, none)
    RT_PROP("KEY_7", "i64", KeyboardKey7, none)
    RT_PROP("KEY_8", "i64", KeyboardKey8, none)
    RT_PROP("KEY_9", "i64", KeyboardKey9, none)

    // Function keys (290-301)
    RT_PROP("KEY_F1", "i64", KeyboardKeyF1, none)
    RT_PROP("KEY_F2", "i64", KeyboardKeyF2, none)
    RT_PROP("KEY_F3", "i64", KeyboardKeyF3, none)
    RT_PROP("KEY_F4", "i64", KeyboardKeyF4, none)
    RT_PROP("KEY_F5", "i64", KeyboardKeyF5, none)
    RT_PROP("KEY_F6", "i64", KeyboardKeyF6, none)
    RT_PROP("KEY_F7", "i64", KeyboardKeyF7, none)
    RT_PROP("KEY_F8", "i64", KeyboardKeyF8, none)
    RT_PROP("KEY_F9", "i64", KeyboardKeyF9, none)
    RT_PROP("KEY_F10", "i64", KeyboardKeyF10, none)
    RT_PROP("KEY_F11", "i64", KeyboardKeyF11, none)
    RT_PROP("KEY_F12", "i64", KeyboardKeyF12, none)

    // Navigation
    RT_PROP("KEY_UP", "i64", KeyboardKeyUp, none)
    RT_PROP("KEY_DOWN", "i64", KeyboardKeyDown, none)
    RT_PROP("KEY_LEFT", "i64", KeyboardKeyLeft, none)
    RT_PROP("KEY_RIGHT", "i64", KeyboardKeyRight, none)
    RT_PROP("KEY_HOME", "i64", KeyboardKeyHome, none)
    RT_PROP("KEY_END", "i64", KeyboardKeyEnd, none)
    RT_PROP("KEY_PAGEUP", "i64", KeyboardKeyPageUp, none)
    RT_PROP("KEY_PAGEDOWN", "i64", KeyboardKeyPageDown, none)
    RT_PROP("KEY_INSERT", "i64", KeyboardKeyInsert, none)
    RT_PROP("KEY_DELETE", "i64", KeyboardKeyDelete, none)

    // Editing
    RT_PROP("KEY_BACKSPACE", "i64", KeyboardKeyBackspace, none)
    RT_PROP("KEY_TAB", "i64", KeyboardKeyTab, none)
    RT_PROP("KEY_ENTER", "i64", KeyboardKeyEnter, none)
    RT_PROP("KEY_SPACE", "i64", KeyboardKeySpace, none)
    RT_PROP("KEY_ESCAPE", "i64", KeyboardKeyEscape, none)

    // Modifiers
    RT_PROP("KEY_SHIFT", "i64", KeyboardKeyShift, none)
    RT_PROP("KEY_CTRL", "i64", KeyboardKeyCtrl, none)
    RT_PROP("KEY_ALT", "i64", KeyboardKeyAlt, none)
    RT_PROP("KEY_LSHIFT", "i64", KeyboardKeyLShift, none)
    RT_PROP("KEY_RSHIFT", "i64", KeyboardKeyRShift, none)
    RT_PROP("KEY_LCTRL", "i64", KeyboardKeyLCtrl, none)
    RT_PROP("KEY_RCTRL", "i64", KeyboardKeyRCtrl, none)
    RT_PROP("KEY_LALT", "i64", KeyboardKeyLAlt, none)
    RT_PROP("KEY_RALT", "i64", KeyboardKeyRAlt, none)

    // Punctuation
    RT_PROP("KEY_MINUS", "i64", KeyboardKeyMinus, none)
    RT_PROP("KEY_EQUALS", "i64", KeyboardKeyEquals, none)
    RT_PROP("KEY_LBRACKET", "i64", KeyboardKeyLBracket, none)
    RT_PROP("KEY_RBRACKET", "i64", KeyboardKeyRBracket, none)
    RT_PROP("KEY_BACKSLASH", "i64", KeyboardKeyBackslash, none)
    RT_PROP("KEY_SEMICOLON", "i64", KeyboardKeySemicolon, none)
    RT_PROP("KEY_QUOTE", "i64", KeyboardKeyQuote, none)
    RT_PROP("KEY_GRAVE", "i64", KeyboardKeyGrave, none)
    RT_PROP("KEY_COMMA", "i64", KeyboardKeyComma, none)
    RT_PROP("KEY_PERIOD", "i64", KeyboardKeyPeriod, none)
    RT_PROP("KEY_SLASH", "i64", KeyboardKeySlash, none)

    // Numpad
    RT_PROP("KEY_NUM0", "i64", KeyboardKeyNum0, none)
    RT_PROP("KEY_NUM1", "i64", KeyboardKeyNum1, none)
    RT_PROP("KEY_NUM2", "i64", KeyboardKeyNum2, none)
    RT_PROP("KEY_NUM3", "i64", KeyboardKeyNum3, none)
    RT_PROP("KEY_NUM4", "i64", KeyboardKeyNum4, none)
    RT_PROP("KEY_NUM5", "i64", KeyboardKeyNum5, none)
    RT_PROP("KEY_NUM6", "i64", KeyboardKeyNum6, none)
    RT_PROP("KEY_NUM7", "i64", KeyboardKeyNum7, none)
    RT_PROP("KEY_NUM8", "i64", KeyboardKeyNum8, none)
    RT_PROP("KEY_NUM9", "i64", KeyboardKeyNum9, none)
    RT_PROP("KEY_NUMADD", "i64", KeyboardKeyNumAdd, none)
    RT_PROP("KEY_NUMSUB", "i64", KeyboardKeyNumSub, none)
    RT_PROP("KEY_NUMMUL", "i64", KeyboardKeyNumMul, none)
    RT_PROP("KEY_NUMDIV", "i64", KeyboardKeyNumDiv, none)
    RT_PROP("KEY_NUMENTER", "i64", KeyboardKeyNumEnter, none)
    RT_PROP("KEY_NUMDOT", "i64", KeyboardKeyNumDot, none)
RT_CLASS_END()

// Viper.Input.Mouse - mouse input handling (static class)
RT_CLASS_BEGIN("Viper.Input.Mouse", Mouse, "none", none)
    // Position (relative to canvas)
    RT_METHOD("X", "i64()", MouseX)
    RT_METHOD("Y", "i64()", MouseY)
    RT_METHOD("DeltaX", "i64()", MouseDeltaX)
    RT_METHOD("DeltaY", "i64()", MouseDeltaY)

    // Button state (polling)
    RT_METHOD("IsDown", "i1(i64)", MouseIsDown)
    RT_METHOD("IsUp", "i1(i64)", MouseIsUp)
    RT_METHOD("Left", "i1()", MouseLeft)
    RT_METHOD("Right", "i1()", MouseRight)
    RT_METHOD("Middle", "i1()", MouseMiddle)

    // Button events (since last poll)
    RT_METHOD("WasPressed", "i1(i64)", MouseWasPressed)
    RT_METHOD("WasReleased", "i1(i64)", MouseWasReleased)
    RT_METHOD("WasClicked", "i1(i64)", MouseWasClicked)
    RT_METHOD("WasDoubleClicked", "i1(i64)", MouseWasDoubleClicked)

    // Scroll wheel
    RT_METHOD("WheelX", "i64()", MouseWheelX)
    RT_METHOD("WheelY", "i64()", MouseWheelY)

    // Cursor control
    RT_METHOD("Show", "void()", MouseShow)
    RT_METHOD("Hide", "void()", MouseHide)
    RT_METHOD("IsHidden", "i1()", MouseIsHidden)
    RT_METHOD("Capture", "void()", MouseCapture)
    RT_METHOD("Release", "void()", MouseRelease)
    RT_METHOD("IsCaptured", "i1()", MouseIsCaptured)
    RT_METHOD("SetPos", "void(i64,i64)", MouseSetPos)

    // Button constants
    RT_PROP("BUTTON_LEFT", "i64", MouseButtonLeft, none)
    RT_PROP("BUTTON_RIGHT", "i64", MouseButtonRight, none)
    RT_PROP("BUTTON_MIDDLE", "i64", MouseButtonMiddle, none)
    RT_PROP("BUTTON_X1", "i64", MouseButtonX1, none)
    RT_PROP("BUTTON_X2", "i64", MouseButtonX2, none)
RT_CLASS_END()

// Viper.Input.Pad - gamepad/controller input handling (static class)
RT_CLASS_BEGIN("Viper.Input.Pad", Pad, "none", none)
    // Controller enumeration
    RT_METHOD("Count", "i64()", PadCount)
    RT_METHOD("IsConnected", "i1(i64)", PadIsConnected)
    RT_METHOD("Name", "str(i64)", PadName)

    // Button state (polling)
    RT_METHOD("IsDown", "i1(i64,i64)", PadIsDown)
    RT_METHOD("IsUp", "i1(i64,i64)", PadIsUp)

    // Button events (since last poll)
    RT_METHOD("WasPressed", "i1(i64,i64)", PadWasPressed)
    RT_METHOD("WasReleased", "i1(i64,i64)", PadWasReleased)

    // Analog inputs (-1.0 to 1.0 for sticks, 0.0 to 1.0 for triggers)
    RT_METHOD("LeftX", "f64(i64)", PadLeftX)
    RT_METHOD("LeftY", "f64(i64)", PadLeftY)
    RT_METHOD("RightX", "f64(i64)", PadRightX)
    RT_METHOD("RightY", "f64(i64)", PadRightY)
    RT_METHOD("LeftTrigger", "f64(i64)", PadLeftTrigger)
    RT_METHOD("RightTrigger", "f64(i64)", PadRightTrigger)

    // Deadzone handling
    RT_METHOD("SetDeadzone", "void(f64)", PadSetDeadzone)
    RT_METHOD("GetDeadzone", "f64()", PadGetDeadzone)

    // Vibration/rumble
    RT_METHOD("Vibrate", "void(i64,f64,f64)", PadVibrate)
    RT_METHOD("StopVibration", "void(i64)", PadStopVibration)

    // Button constants (standard gamepad layout)
    RT_PROP("PAD_A", "i64", PadButtonA, none)
    RT_PROP("PAD_B", "i64", PadButtonB, none)
    RT_PROP("PAD_X", "i64", PadButtonX, none)
    RT_PROP("PAD_Y", "i64", PadButtonY, none)
    RT_PROP("PAD_LB", "i64", PadButtonLB, none)
    RT_PROP("PAD_RB", "i64", PadButtonRB, none)
    RT_PROP("PAD_BACK", "i64", PadButtonBack, none)
    RT_PROP("PAD_START", "i64", PadButtonStart, none)
    RT_PROP("PAD_LSTICK", "i64", PadButtonLStick, none)
    RT_PROP("PAD_RSTICK", "i64", PadButtonRStick, none)
    RT_PROP("PAD_UP", "i64", PadButtonUp, none)
    RT_PROP("PAD_DOWN", "i64", PadButtonDown, none)
    RT_PROP("PAD_LEFT", "i64", PadButtonLeft, none)
    RT_PROP("PAD_RIGHT", "i64", PadButtonRight, none)
    RT_PROP("PAD_GUIDE", "i64", PadButtonGuide, none)
RT_CLASS_END()

// Viper.IO.Dir - directory operations
RT_CLASS_BEGIN("Viper.IO.Dir", Dir, "obj", none)
    RT_METHOD("Current", "str()", DirCurrent)
    RT_METHOD("Dirs", "ptr(str)", DirDirs)
    RT_METHOD("DirsSeq", "obj(str)", DirDirsSeq)
    RT_METHOD("Exists", "i1(str)", DirExists)
    RT_METHOD("Entries", "obj(str)", DirEntries)
    RT_METHOD("Files", "ptr(str)", DirFiles)
    RT_METHOD("FilesSeq", "obj(str)", DirFilesSeq)
    RT_METHOD("List", "ptr(str)", DirList)
    RT_METHOD("ListSeq", "obj(str)", DirListSeq)
    RT_METHOD("Make", "void(str)", DirMake)
    RT_METHOD("MakeAll", "void(str)", DirMakeAll)
    RT_METHOD("Move", "void(str,str)", DirMove)
    RT_METHOD("Remove", "void(str)", DirRemove)
    RT_METHOD("RemoveAll", "void(str)", DirRemoveAll)
    RT_METHOD("SetCurrent", "void(str)", DirSetCurrent)
RT_CLASS_END()

// Viper.IO.File - static utility class
RT_CLASS_BEGIN("Viper.IO.File", File, "obj", none)
    RT_METHOD("Append", "void(str,str)", FileAppend)
    RT_METHOD("AppendLine", "void(str,str)", FileAppendLine)
    RT_METHOD("Copy", "void(str,str)", FileCopy)
    RT_METHOD("Delete", "void(str)", FileDelete)
    RT_METHOD("Exists", "i1(str)", FileExists)
    RT_METHOD("Modified", "i64(str)", FileModified)
    RT_METHOD("Move", "void(str,str)", FileMove)
    RT_METHOD("ReadAllBytes", "obj(str)", FileReadAllBytes)
    RT_METHOD("ReadAllLines", "obj(str)", FileReadAllLines)
    RT_METHOD("ReadAllText", "str(str)", FileReadAllText)
    RT_METHOD("ReadBytes", "ptr(str)", FileReadBytes)
    RT_METHOD("ReadLines", "ptr(str)", FileReadLines)
    RT_METHOD("Size", "i64(str)", FileSize)
    RT_METHOD("Touch", "void(str)", FileTouch)
    RT_METHOD("WriteAllBytes", "void(str,obj)", FileWriteAllBytes)
    RT_METHOD("WriteAllText", "void(str,str)", FileWriteAllText)
    RT_METHOD("WriteBytes", "void(str,ptr)", FileWriteBytes)
    RT_METHOD("WriteLines", "void(str,ptr)", FileWriteLines)
RT_CLASS_END()

// Viper.IO.Path - static utility class for path manipulation
RT_CLASS_BEGIN("Viper.IO.Path", Path, "obj", none)
    RT_METHOD("Abs", "str(str)", PathAbs)
    RT_METHOD("Dir", "str(str)", PathDir)
    RT_METHOD("Ext", "str(str)", PathExt)
    RT_METHOD("IsAbs", "i1(str)", PathIsAbs)
    RT_METHOD("Join", "str(str,str)", PathJoin)
    RT_METHOD("Name", "str(str)", PathName)
    RT_METHOD("Norm", "str(str)", PathNorm)
    RT_METHOD("Sep", "str()", PathSep)
    RT_METHOD("Stem", "str(str)", PathStem)
    RT_METHOD("WithExt", "str(str,str)", PathWithExt)
RT_CLASS_END()

// Viper.IO.BinFile - binary file stream operations
RT_CLASS_BEGIN("Viper.IO.BinFile", BinFile, "obj", BinFileOpen)
    RT_PROP("Eof", "i1", BinFileEof, none)
    RT_PROP("Pos", "i64", BinFilePos, none)
    RT_PROP("Size", "i64", BinFileSize, none)
    RT_METHOD("Close", "void()", BinFileClose)
    RT_METHOD("Flush", "void()", BinFileFlush)
    RT_METHOD("Read", "i64(obj,i64,i64)", BinFileRead)
    RT_METHOD("ReadByte", "i64()", BinFileReadByte)
    RT_METHOD("Seek", "i64(i64,i64)", BinFileSeek)
    RT_METHOD("Write", "void(obj,i64,i64)", BinFileWrite)
    RT_METHOD("WriteByte", "void(i64)", BinFileWriteByte)
RT_CLASS_END()

// Viper.IO.MemStream - in-memory binary stream
RT_CLASS_BEGIN("Viper.IO.MemStream", MemStream, "obj", MemStreamNew)
    RT_PROP("Pos", "i64", MemStreamGetPos, MemStreamSetPos)
    RT_PROP("Len", "i64", MemStreamGetLen, none)
    RT_PROP("Capacity", "i64", MemStreamGetCapacity, none)
    RT_METHOD("ReadI8", "i64()", MemStreamReadI8)
    RT_METHOD("WriteI8", "void(i64)", MemStreamWriteI8)
    RT_METHOD("ReadU8", "i64()", MemStreamReadU8)
    RT_METHOD("WriteU8", "void(i64)", MemStreamWriteU8)
    RT_METHOD("ReadI16", "i64()", MemStreamReadI16)
    RT_METHOD("WriteI16", "void(i64)", MemStreamWriteI16)
    RT_METHOD("ReadU16", "i64()", MemStreamReadU16)
    RT_METHOD("WriteU16", "void(i64)", MemStreamWriteU16)
    RT_METHOD("ReadI32", "i64()", MemStreamReadI32)
    RT_METHOD("WriteI32", "void(i64)", MemStreamWriteI32)
    RT_METHOD("ReadU32", "i64()", MemStreamReadU32)
    RT_METHOD("WriteU32", "void(i64)", MemStreamWriteU32)
    RT_METHOD("ReadI64", "i64()", MemStreamReadI64)
    RT_METHOD("WriteI64", "void(i64)", MemStreamWriteI64)
    RT_METHOD("ReadF32", "f64()", MemStreamReadF32)
    RT_METHOD("WriteF32", "void(f64)", MemStreamWriteF32)
    RT_METHOD("ReadF64", "f64()", MemStreamReadF64)
    RT_METHOD("WriteF64", "void(f64)", MemStreamWriteF64)
    RT_METHOD("ReadBytes", "obj(i64)", MemStreamReadBytes)
    RT_METHOD("WriteBytes", "void(obj)", MemStreamWriteBytes)
    RT_METHOD("ReadStr", "str(i64)", MemStreamReadStr)
    RT_METHOD("WriteStr", "void(str)", MemStreamWriteStr)
    RT_METHOD("ToBytes", "obj()", MemStreamToBytes)
    RT_METHOD("Clear", "void()", MemStreamClear)
    RT_METHOD("Seek", "void(i64)", MemStreamSeek)
    RT_METHOD("Skip", "void(i64)", MemStreamSkip)
RT_CLASS_END()

// Viper.IO.LineReader - line-by-line text file reader
RT_CLASS_BEGIN("Viper.IO.LineReader", LineReader, "obj", LineReaderOpen)
    RT_PROP("Eof", "i1", LineReaderEof, none)
    RT_METHOD("Close", "void()", LineReaderClose)
    RT_METHOD("PeekChar", "i64()", LineReaderPeekChar)
    RT_METHOD("Read", "str()", LineReaderRead)
    RT_METHOD("ReadAll", "str()", LineReaderReadAll)
    RT_METHOD("ReadChar", "i64()", LineReaderReadChar)
RT_CLASS_END()

// Viper.IO.LineWriter - buffered text file writer
RT_CLASS_BEGIN("Viper.IO.LineWriter", LineWriter, "obj", LineWriterOpen)
    RT_PROP("NewLine", "str", LineWriterNewLine, LineWriterSetNewLine)
    RT_METHOD("Close", "void()", LineWriterClose)
    RT_METHOD("Flush", "void()", LineWriterFlush)
    RT_METHOD("Write", "void(str)", LineWriterWrite)
    RT_METHOD("WriteChar", "void(i64)", LineWriterWriteChar)
    RT_METHOD("WriteLn", "void(str)", LineWriterWriteLn)
RT_CLASS_END()

// Viper.IO.Watcher - file system watcher
RT_CLASS_BEGIN("Viper.IO.Watcher", Watcher, "obj", WatcherNew)
    RT_PROP("Path", "str", WatcherPath, none)
    RT_PROP("IsWatching", "i1", WatcherIsWatching, none)
    RT_PROP("EVENT_NONE", "i64", WatcherEventNone, none)
    RT_PROP("EVENT_CREATED", "i64", WatcherEventCreated, none)
    RT_PROP("EVENT_MODIFIED", "i64", WatcherEventModified, none)
    RT_PROP("EVENT_DELETED", "i64", WatcherEventDeleted, none)
    RT_PROP("EVENT_RENAMED", "i64", WatcherEventRenamed, none)
    RT_METHOD("Start", "void()", WatcherStart)
    RT_METHOD("Stop", "void()", WatcherStop)
    RT_METHOD("Poll", "i64()", WatcherPoll)
    RT_METHOD("PollFor", "i64(i64)", WatcherPollFor)
    RT_METHOD("EventPath", "str()", WatcherEventPath)
    RT_METHOD("EventType", "i64()", WatcherEventType)
RT_CLASS_END()

RT_CLASS_BEGIN("Viper.IO.Compress", Compress, "obj", none)
    RT_METHOD("Deflate", "obj(obj)", CompressDeflate)
    RT_METHOD("DeflateLvl", "obj(obj,i64)", CompressDeflateLvl)
    RT_METHOD("Inflate", "obj(obj)", CompressInflate)
    RT_METHOD("Gzip", "obj(obj)", CompressGzip)
    RT_METHOD("GzipLvl", "obj(obj,i64)", CompressGzipLvl)
    RT_METHOD("Gunzip", "obj(obj)", CompressGunzip)
    RT_METHOD("DeflateStr", "obj(str)", CompressDeflateStr)
    RT_METHOD("InflateStr", "str(obj)", CompressInflateStr)
    RT_METHOD("GzipStr", "obj(str)", CompressGzipStr)
    RT_METHOD("GunzipStr", "str(obj)", CompressGunzipStr)
RT_CLASS_END()

// Viper.IO.Archive - ZIP archive support
// Instance class for reading and writing ZIP files.
// Open(path) or FromBytes(data) for reading, Create(path) for writing.
RT_CLASS_BEGIN("Viper.IO.Archive", Archive, "obj", none)
    // Static constructors
    RT_METHOD("Open", "obj(str)", ArchiveOpen)
    RT_METHOD("Create", "obj(str)", ArchiveCreate)
    RT_METHOD("FromBytes", "obj(obj)", ArchiveFromBytes)
    // Properties (instance, takes receiver as arg0)
    RT_PROP("Path", "str", ArchivePath, none)
    RT_PROP("Count", "i64", ArchiveCount, none)
    RT_PROP("Names", "obj", ArchiveNames, none)
    // Reading methods
    RT_METHOD("Has", "i1(str)", ArchiveHas)
    RT_METHOD("Read", "obj(str)", ArchiveRead)
    RT_METHOD("ReadStr", "str(str)", ArchiveReadStr)
    RT_METHOD("Extract", "void(str,str)", ArchiveExtract)
    RT_METHOD("ExtractAll", "void(str)", ArchiveExtractAll)
    RT_METHOD("Info", "obj(str)", ArchiveInfo)
    // Writing methods
    RT_METHOD("Add", "void(str,obj)", ArchiveAdd)
    RT_METHOD("AddStr", "void(str,str)", ArchiveAddStr)
    RT_METHOD("AddFile", "void(str,str)", ArchiveAddFile)
    RT_METHOD("AddDir", "void(str)", ArchiveAddDir)
    RT_METHOD("Finish", "void()", ArchiveFinish)
    // Static methods
    RT_METHOD("IsZip", "i1(str)", ArchiveIsZip)
    RT_METHOD("IsZipBytes", "i1(obj)", ArchiveIsZipBytes)
RT_CLASS_END()

// Viper.Log - simple logging utilities
RT_CLASS_BEGIN("Viper.Log", Log, "obj", none)
    RT_PROP("Level", "i64", LogLevel, LogSetLevel)
    RT_PROP("DEBUG", "i64", LogDEBUG, none)
    RT_PROP("INFO", "i64", LogINFO, none)
    RT_PROP("WARN", "i64", LogWARN, none)
    RT_PROP("ERROR", "i64", LogERROR, none)
    RT_PROP("OFF", "i64", LogOFF, none)
    RT_METHOD("Debug", "void(str)", LogDebug)
    RT_METHOD("Info", "void(str)", LogInfo)
    RT_METHOD("Warn", "void(str)", LogWarn)
    RT_METHOD("Error", "void(str)", LogError)
    RT_METHOD("Enabled", "i1(i64)", LogEnabled)
RT_CLASS_END()

// Viper.Machine - system information queries
RT_CLASS_BEGIN("Viper.Machine", Machine, "obj", none)
    RT_PROP("Cores", "i64", MachineCores, none)
    RT_PROP("Endian", "str", MachineEndian, none)
    RT_PROP("Home", "str", MachineHome, none)
    RT_PROP("Host", "str", MachineHost, none)
    RT_PROP("MemFree", "i64", MachineMemFree, none)
    RT_PROP("MemTotal", "i64", MachineMemTotal, none)
    RT_PROP("OS", "str", MachineOS, none)
    RT_PROP("OSVer", "str", MachineOSVer, none)
    RT_PROP("Temp", "str", MachineTemp, none)
    RT_PROP("User", "str", MachineUser, none)
RT_CLASS_END()

// Viper.Math - static utility class
RT_CLASS_BEGIN("Viper.Math", Math, "obj", none)
    RT_PROP("E", "f64", MathE, none)
    RT_PROP("Pi", "f64", MathPi, none)
    RT_PROP("Tau", "f64", MathTau, none)
    RT_METHOD("Abs", "f64(f64)", MathAbs)
    RT_METHOD("AbsInt", "i64(i64)", MathAbsInt)
    RT_METHOD("Acos", "f64(f64)", MathAcos)
    RT_METHOD("Asin", "f64(f64)", MathAsin)
    RT_METHOD("Atan", "f64(f64)", MathAtan)
    RT_METHOD("Atan2", "f64(f64,f64)", MathAtan2)
    RT_METHOD("Ceil", "f64(f64)", MathCeil)
    RT_METHOD("Clamp", "f64(f64,f64,f64)", MathClamp)
    RT_METHOD("ClampInt", "i64(i64,i64,i64)", MathClampInt)
    RT_METHOD("Cos", "f64(f64)", MathCos)
    RT_METHOD("Cosh", "f64(f64)", MathCosh)
    RT_METHOD("Deg", "f64(f64)", MathDeg)
    RT_METHOD("Exp", "f64(f64)", MathExp)
    RT_METHOD("FMod", "f64(f64,f64)", MathFMod)
    RT_METHOD("Floor", "f64(f64)", MathFloor)
    RT_METHOD("Hypot", "f64(f64,f64)", MathHypot)
    RT_METHOD("Lerp", "f64(f64,f64,f64)", MathLerp)
    RT_METHOD("Log", "f64(f64)", MathLog)
    RT_METHOD("Log10", "f64(f64)", MathLog10)
    RT_METHOD("Log2", "f64(f64)", MathLog2)
    RT_METHOD("Max", "f64(f64,f64)", MathMax)
    RT_METHOD("MaxInt", "i64(i64,i64)", MathMaxInt)
    RT_METHOD("Min", "f64(f64,f64)", MathMin)
    RT_METHOD("MinInt", "i64(i64,i64)", MathMinInt)
    RT_METHOD("Pow", "f64(f64,f64)", MathPow)
    RT_METHOD("Rad", "f64(f64)", MathRad)
    RT_METHOD("Round", "f64(f64)", MathRound)
    RT_METHOD("Sgn", "f64(f64)", MathSgn)
    RT_METHOD("SgnInt", "i64(i64)", MathSgnInt)
    RT_METHOD("Sin", "f64(f64)", MathSin)
    RT_METHOD("Sinh", "f64(f64)", MathSinh)
    RT_METHOD("Sqrt", "f64(f64)", MathSqrt)
    RT_METHOD("Tan", "f64(f64)", MathTan)
    RT_METHOD("Tanh", "f64(f64)", MathTanh)
    RT_METHOD("Trunc", "f64(f64)", MathTrunc)
    RT_METHOD("Wrap", "f64(f64,f64,f64)", MathWrap)
    RT_METHOD("WrapInt", "i64(i64,i64,i64)", MathWrapInt)
RT_CLASS_END()

// Viper.Object - base class for all objects
RT_CLASS_BEGIN("Viper.Object", Object, "obj", none)
    RT_METHOD("Equals", "i1(obj)", ObjEquals)
    RT_METHOD("GetHashCode", "i64()", ObjGetHashCode)
    RT_METHOD("ToString", "str()", ObjToString)
RT_CLASS_END()

// Viper.Random - static utility class
RT_CLASS_BEGIN("Viper.Random", Random, "obj", none)
    RT_METHOD("Next", "f64()", RandomNext)
    RT_METHOD("NextInt", "i64(i64)", RandomNextInt)
    RT_METHOD("Seed", "void(i64)", RandomSeed)
RT_CLASS_END()

// Viper.String - built-in string type
RT_CLASS_BEGIN("Viper.String", String, "opaque*", StrFromStr)
    RT_PROP("IsEmpty", "i1", StrIsEmpty, none)
    RT_PROP("Length", "i64", Len, none)
    RT_METHOD("Asc", "i64()", Asc)
    RT_METHOD("Chr", "str(i64)", Chr)
    RT_METHOD("Cmp", "i64(str)", StrCmp)
    RT_METHOD("CmpNoCase", "i64(str)", StrCmpNoCase)
    RT_METHOD("Concat", "str(str)", Concat)
    RT_METHOD("Count", "i64(str)", StrCount)
    RT_METHOD("EndsWith", "i1(str)", StrEndsWith)
    RT_METHOD("Flip", "str()", StrFlip)
    RT_METHOD("Has", "i1(str)", StrHas)
    RT_METHOD("IndexOf", "i64(str)", IndexOf)
    RT_METHOD("IndexOfFrom", "i64(i64,str)", IndexOfFrom)
    RT_METHOD("Left", "str(i64)", Left)
    RT_METHOD("Mid", "str(i64)", Mid2)
    RT_METHOD("MidLen", "str(i64,i64)", Mid3)
    RT_METHOD("PadLeft", "str(i64,str)", StrPadLeft)
    RT_METHOD("PadRight", "str(i64,str)", StrPadRight)
    RT_METHOD("Repeat", "str(i64)", StrRepeat)
    RT_METHOD("Replace", "str(str,str)", StrReplace)
    RT_METHOD("Right", "str(i64)", Right)
    RT_METHOD("Split", "obj(str)", StrSplit)
    RT_METHOD("StartsWith", "i1(str)", StrStartsWith)
    RT_METHOD("Substring", "str(i64,i64)", Substr)
    RT_METHOD("ToLower", "str()", LCase)
    RT_METHOD("ToUpper", "str()", UCase)
    RT_METHOD("Trim", "str()", Trim)
    RT_METHOD("TrimEnd", "str()", RTrim)
    RT_METHOD("TrimStart", "str()", LTrim)
RT_CLASS_END()

// Viper.Terminal - terminal I/O, cursor control, and keyboard input
RT_CLASS_BEGIN("Viper.Terminal", Terminal, "obj", none)
    RT_METHOD("Ask", "str(str)", TermAsk)
    RT_METHOD("BeginBatch", "void()", TermBeginBatch)
    RT_METHOD("Bell", "void()", TermBell)
    RT_METHOD("Clear", "void()", TermClear)
    RT_METHOD("EndBatch", "void()", TermEndBatch)
    RT_METHOD("Flush", "void()", TermFlush)
    RT_METHOD("GetKey", "str()", TermGetKey)
    RT_METHOD("GetKeyTimeout", "str(i64)", TermGetKeyTimeout)
    RT_METHOD("InKey", "str()", TermInKey)
    RT_METHOD("Print", "void(str)", TermPrint)
    RT_METHOD("PrintInt", "void(i64)", TermPrintInt)
    RT_METHOD("PrintNum", "void(f64)", TermPrintNum)
    RT_METHOD("ReadLine", "str()", TermReadLine)
    RT_METHOD("Say", "void(str)", TermSay)
    RT_METHOD("SayBool", "void(i1)", TermSayBool)
    RT_METHOD("SayInt", "void(i64)", TermSayInt)
    RT_METHOD("SayNum", "void(f64)", TermSayNum)
    RT_METHOD("SetAltScreen", "void(i64)", TermSetAltScreen)
    RT_METHOD("SetColor", "void(i64,i64)", TermSetColor)
    RT_METHOD("SetCursorVisible", "void(i64)", TermSetCursorVisible)
    RT_METHOD("SetPosition", "void(i64,i64)", TermSetPosition)
RT_CLASS_END()

// Viper.Text.Codec - Base64, Hex, and URL encoding/decoding utilities
RT_CLASS_BEGIN("Viper.Text.Codec", Codec, "obj", none)
    RT_METHOD("Base64Dec", "str(str)", CodecBase64Dec)
    RT_METHOD("Base64Enc", "str(str)", CodecBase64Enc)
    RT_METHOD("HexDec", "str(str)", CodecHexDec)
    RT_METHOD("HexEnc", "str(str)", CodecHexEnc)
    RT_METHOD("UrlDecode", "str(str)", CodecUrlDecode)
    RT_METHOD("UrlEncode", "str(str)", CodecUrlEncode)
RT_CLASS_END()

// Viper.Text.Csv - CSV parsing and formatting (RFC 4180)
RT_CLASS_BEGIN("Viper.Text.Csv", Csv, "obj", none)
    RT_METHOD("Format", "str(obj)", CsvFormat)
    RT_METHOD("FormatLine", "str(obj)", CsvFormatLine)
    RT_METHOD("FormatLineWith", "str(obj,str)", CsvFormatLineWith)
    RT_METHOD("FormatWith", "str(obj,str)", CsvFormatWith)
    RT_METHOD("Parse", "obj(str)", CsvParse)
    RT_METHOD("ParseLine", "obj(str)", CsvParseLine)
    RT_METHOD("ParseLineWith", "obj(str,str)", CsvParseLineWith)
    RT_METHOD("ParseWith", "obj(str,str)", CsvParseWith)
RT_CLASS_END()

// Viper.Text.Guid - UUID generation and manipulation
RT_CLASS_BEGIN("Viper.Text.Guid", Guid, "obj", none)
    RT_PROP("Empty", "str", GuidEmpty, none)
    RT_METHOD("FromBytes", "str(obj)", GuidFromBytes)
    RT_METHOD("IsValid", "i1(str)", GuidIsValid)
    RT_METHOD("New", "str()", GuidNew)
    RT_METHOD("ToBytes", "obj(str)", GuidToBytes)
RT_CLASS_END()

// Viper.Text.StringBuilder
RT_CLASS_BEGIN("Viper.Text.StringBuilder", StringBuilder, "opaque*", SBNew)
    RT_PROP("Capacity", "i64", SBGetCapacity, none)
    RT_PROP("Length", "i64", SBGetLength, none)
    RT_METHOD("Append", "obj(str)", SBAppend)
    RT_METHOD("AppendLine", "obj(str)", SBAppendLine)
    RT_METHOD("Clear", "void()", SBClear)
    RT_METHOD("ToString", "str()", SBToString)
RT_CLASS_END()

// Viper.Text.Pattern - regular expression pattern matching
RT_CLASS_BEGIN("Viper.Text.Pattern", Pattern, "obj", none)
    RT_METHOD("IsMatch", "i1(str,str)", PatternIsMatch)
    RT_METHOD("Find", "str(str,str)", PatternFind)
    RT_METHOD("FindFrom", "str(str,str,i64)", PatternFindFrom)
    RT_METHOD("FindPos", "i64(str,str)", PatternFindPos)
    RT_METHOD("FindAll", "obj(str,str)", PatternFindAll)
    RT_METHOD("Replace", "str(str,str,str)", PatternReplace)
    RT_METHOD("ReplaceFirst", "str(str,str,str)", PatternReplaceFirst)
    RT_METHOD("Split", "obj(str,str)", PatternSplit)
    RT_METHOD("Escape", "str(str)", PatternEscape)
RT_CLASS_END()

// Viper.Text.Template - simple string templating
RT_CLASS_BEGIN("Viper.Text.Template", Template, "obj", none)
    RT_METHOD("Render", "str(str,obj)", TemplateRender)
    RT_METHOD("RenderSeq", "str(str,obj)", TemplateRenderSeq)
    RT_METHOD("RenderWith", "str(str,obj,str,str)", TemplateRenderWith)
    RT_METHOD("Has", "i1(str,str)", TemplateHas)
    RT_METHOD("Keys", "obj(str)", TemplateKeys)
    RT_METHOD("Escape", "str(str)", TemplateEscape)
RT_CLASS_END()

// Viper.Threads.Monitor - FIFO-fair, re-entrant monitor primitive
RT_CLASS_BEGIN("Viper.Threads.Monitor", ThreadsMonitor, "obj", none)
    RT_METHOD("Enter", "void(obj)", MonitorEnter)
    RT_METHOD("TryEnter", "i1(obj)", MonitorTryEnter)
    RT_METHOD("TryEnterFor", "i1(obj,i64)", MonitorTryEnterFor)
    RT_METHOD("Exit", "void(obj)", MonitorExit)
    RT_METHOD("Wait", "void(obj)", MonitorWait)
    RT_METHOD("WaitFor", "i1(obj,i64)", MonitorWaitFor)
    RT_METHOD("Pause", "void(obj)", MonitorPause)
    RT_METHOD("PauseAll", "void(obj)", MonitorPauseAll)
RT_CLASS_END()

// Viper.Threads.SafeI64 - FIFO-safe integer cell
RT_CLASS_BEGIN("Viper.Threads.SafeI64", ThreadsSafeI64, "obj", SafeI64New)
    RT_METHOD("Get", "i64()", SafeI64Get)
    RT_METHOD("Set", "void(i64)", SafeI64Set)
    RT_METHOD("Add", "i64(i64)", SafeI64Add)
    RT_METHOD("CompareExchange", "i64(i64,i64)", SafeI64CompareExchange)
RT_CLASS_END()

// Viper.Threads.Gate - FIFO-fair permit gate (semaphore)
RT_CLASS_BEGIN("Viper.Threads.Gate", ThreadsGate, "obj", GateNew)
    RT_PROP("Permits", "i64", GateGetPermits, none)
    RT_METHOD("Enter", "void()", GateEnter)
    RT_METHOD("TryEnter", "i1()", GateTryEnter)
    RT_METHOD("TryEnterFor", "i1(i64)", GateTryEnterFor)
    RT_METHOD("Leave", "void()", GateLeave)
    RT_METHOD("Leave", "void(i64)", GateLeaveMany)
RT_CLASS_END()

// Viper.Threads.Barrier - reusable N-party barrier
RT_CLASS_BEGIN("Viper.Threads.Barrier", ThreadsBarrier, "obj", BarrierNew)
    RT_PROP("Parties", "i64", BarrierGetParties, none)
    RT_PROP("Waiting", "i64", BarrierGetWaiting, none)
    RT_METHOD("Arrive", "i64()", BarrierArrive)
    RT_METHOD("Reset", "void()", BarrierReset)
RT_CLASS_END()

// Viper.Threads.RwLock - writer-preference reader-writer lock
RT_CLASS_BEGIN("Viper.Threads.RwLock", ThreadsRwLock, "obj", RwLockNew)
    RT_PROP("Readers", "i64", RwLockGetReaders, none)
    RT_PROP("IsWriteLocked", "i1", RwLockGetIsWriteLocked, none)
    RT_METHOD("ReadEnter", "void()", RwLockReadEnter)
    RT_METHOD("ReadExit", "void()", RwLockReadExit)
    RT_METHOD("WriteEnter", "void()", RwLockWriteEnter)
    RT_METHOD("WriteExit", "void()", RwLockWriteExit)
    RT_METHOD("TryReadEnter", "i1()", RwLockTryReadEnter)
    RT_METHOD("TryWriteEnter", "i1()", RwLockTryWriteEnter)
RT_CLASS_END()

// Viper.Threads.Thread - OS thread handle
RT_CLASS_BEGIN("Viper.Threads.Thread", ThreadsThread, "obj", none)
    RT_PROP("Id", "i64", ThreadGetId, none)
    RT_PROP("IsAlive", "i1", ThreadGetIsAlive, none)
    RT_METHOD("Start", "obj(ptr,ptr)", ThreadStart)
    RT_METHOD("Join", "void()", ThreadJoin)
    RT_METHOD("TryJoin", "i1()", ThreadTryJoin)
    RT_METHOD("JoinFor", "i1(i64)", ThreadJoinFor)
    RT_METHOD("Sleep", "void(i64)", ThreadSleep)
    RT_METHOD("Yield", "void()", ThreadYield)
RT_CLASS_END()

// Viper.Time.Clock - basic timing utilities (sleep, ticks)
RT_CLASS_BEGIN("Viper.Time.Clock", Clock, "obj", none)
    RT_METHOD("Sleep", "void(i64)", ClockSleep)
    RT_METHOD("Ticks", "i64()", ClockTicks)
    RT_METHOD("TicksUs", "i64()", ClockTicksUs)
RT_CLASS_END()

// Viper.Time.Countdown - interval timing with expiration
RT_CLASS_BEGIN("Viper.Time.Countdown", Countdown, "obj", CountdownNew)
    RT_PROP("Elapsed", "i64", CountdownElapsed, none)
    RT_PROP("Remaining", "i64", CountdownRemaining, none)
    RT_PROP("Expired", "i1", CountdownExpired, none)
    RT_PROP("Interval", "i64", CountdownInterval, CountdownSetInterval)
    RT_PROP("IsRunning", "i1", CountdownIsRunning, none)
    RT_METHOD("Start", "void()", CountdownStart)
    RT_METHOD("Stop", "void()", CountdownStop)
    RT_METHOD("Reset", "void()", CountdownReset)
    RT_METHOD("Wait", "void()", CountdownWait)
RT_CLASS_END()

// Viper.Vec2 - 2D vector math
RT_CLASS_BEGIN("Viper.Vec2", Vec2, "obj", Vec2New)
    RT_PROP("X", "f64", Vec2X, none)
    RT_PROP("Y", "f64", Vec2Y, none)
    RT_METHOD("Add", "obj(obj)", Vec2Add)
    RT_METHOD("Sub", "obj(obj)", Vec2Sub)
    RT_METHOD("Mul", "obj(f64)", Vec2Mul)
    RT_METHOD("Div", "obj(f64)", Vec2Div)
    RT_METHOD("Dot", "f64(obj)", Vec2Dot)
    RT_METHOD("Cross", "f64(obj)", Vec2Cross)
    RT_METHOD("Len", "f64()", Vec2Len)
    RT_METHOD("LenSq", "f64()", Vec2LenSq)
    RT_METHOD("Norm", "obj()", Vec2Norm)
    RT_METHOD("Dist", "f64(obj)", Vec2Dist)
    RT_METHOD("Lerp", "obj(obj,f64)", Vec2Lerp)
    RT_METHOD("Angle", "f64()", Vec2Angle)
    RT_METHOD("Rotate", "obj(f64)", Vec2Rotate)
    RT_METHOD("Neg", "obj()", Vec2Neg)
RT_CLASS_END()

// Viper.Vec3 - 3D vector math
RT_CLASS_BEGIN("Viper.Vec3", Vec3, "obj", Vec3New)
    RT_PROP("X", "f64", Vec3X, none)
    RT_PROP("Y", "f64", Vec3Y, none)
    RT_PROP("Z", "f64", Vec3Z, none)
    RT_METHOD("Add", "obj(obj)", Vec3Add)
    RT_METHOD("Sub", "obj(obj)", Vec3Sub)
    RT_METHOD("Mul", "obj(f64)", Vec3Mul)
    RT_METHOD("Div", "obj(f64)", Vec3Div)
    RT_METHOD("Dot", "f64(obj)", Vec3Dot)
    RT_METHOD("Cross", "obj(obj)", Vec3Cross)
    RT_METHOD("Len", "f64()", Vec3Len)
    RT_METHOD("LenSq", "f64()", Vec3LenSq)
    RT_METHOD("Norm", "obj()", Vec3Norm)
    RT_METHOD("Dist", "f64(obj)", Vec3Dist)
    RT_METHOD("Lerp", "obj(obj,f64)", Vec3Lerp)
    RT_METHOD("Neg", "obj()", Vec3Neg)
RT_CLASS_END()

// Viper.Network.Tcp - TCP client connection
RT_CLASS_BEGIN("Viper.Network.Tcp", Tcp, "obj", none)
    // Static constructors
    RT_METHOD("Connect", "obj(str,i64)", TcpConnect)
    RT_METHOD("ConnectFor", "obj(str,i64,i64)", TcpConnectFor)
    // Properties (instance, takes receiver as arg0)
    RT_PROP("Host", "str", TcpHost, none)
    RT_PROP("Port", "i64", TcpPort, none)
    RT_PROP("LocalPort", "i64", TcpLocalPort, none)
    RT_PROP("IsOpen", "i1", TcpIsOpen, none)
    RT_PROP("Available", "i64", TcpAvailable, none)
    // Send methods
    RT_METHOD("Send", "i64(obj)", TcpSend)
    RT_METHOD("SendStr", "i64(str)", TcpSendStr)
    RT_METHOD("SendAll", "void(obj)", TcpSendAll)
    // Receive methods
    RT_METHOD("Recv", "obj(i64)", TcpRecv)
    RT_METHOD("RecvStr", "str(i64)", TcpRecvStr)
    RT_METHOD("RecvExact", "obj(i64)", TcpRecvExact)
    RT_METHOD("RecvLine", "str()", TcpRecvLine)
    // Timeout and close
    RT_METHOD("SetRecvTimeout", "void(i64)", TcpSetRecvTimeout)
    RT_METHOD("SetSendTimeout", "void(i64)", TcpSetSendTimeout)
    RT_METHOD("Close", "void()", TcpClose)
RT_CLASS_END()

// Viper.Network.TcpServer - TCP server (listener)
RT_CLASS_BEGIN("Viper.Network.TcpServer", TcpServer, "obj", none)
    // Static constructors
    RT_METHOD("Listen", "obj(i64)", TcpServerListen)
    RT_METHOD("ListenAt", "obj(str,i64)", TcpServerListenAt)
    // Properties
    RT_PROP("Port", "i64", TcpServerPort, none)
    RT_PROP("Address", "str", TcpServerAddress, none)
    RT_PROP("IsListening", "i1", TcpServerIsListening, none)
    // Accept and close
    RT_METHOD("Accept", "obj()", TcpServerAccept)
    RT_METHOD("AcceptFor", "obj(i64)", TcpServerAcceptFor)
    RT_METHOD("Close", "void()", TcpServerClose)
RT_CLASS_END()

// Viper.Network.Udp - UDP datagram socket
RT_CLASS_BEGIN("Viper.Network.Udp", Udp, "obj", none)
    // Static constructors
    RT_METHOD("New", "obj()", UdpNew)
    RT_METHOD("Bind", "obj(i64)", UdpBind)
    RT_METHOD("BindAt", "obj(str,i64)", UdpBindAt)
    // Properties
    RT_PROP("Port", "i64", UdpPort, none)
    RT_PROP("Address", "str", UdpAddress, none)
    RT_PROP("IsBound", "i1", UdpIsBound, none)
    // Send methods
    RT_METHOD("SendTo", "i64(str,i64,obj)", UdpSendTo)
    RT_METHOD("SendToStr", "i64(str,i64,str)", UdpSendToStr)
    // Receive methods
    RT_METHOD("Recv", "obj(i64)", UdpRecv)
    RT_METHOD("RecvFrom", "obj(i64)", UdpRecvFrom)
    RT_METHOD("RecvFor", "obj(i64,i64)", UdpRecvFor)
    RT_METHOD("SenderHost", "str()", UdpSenderHost)
    RT_METHOD("SenderPort", "i64()", UdpSenderPort)
    // Options and close
    RT_METHOD("SetBroadcast", "void(i1)", UdpSetBroadcast)
    RT_METHOD("JoinGroup", "void(str)", UdpJoinGroup)
    RT_METHOD("LeaveGroup", "void(str)", UdpLeaveGroup)
    RT_METHOD("SetRecvTimeout", "void(i64)", UdpSetRecvTimeout)
    RT_METHOD("Close", "void()", UdpClose)
RT_CLASS_END()

// Viper.Network.Dns - DNS resolution utility class (static)
RT_CLASS_BEGIN("Viper.Network.Dns", Dns, "none", none)
    // Resolution methods
    RT_METHOD("Resolve", "str(str)", DnsResolve)
    RT_METHOD("ResolveAll", "obj(str)", DnsResolveAll)
    RT_METHOD("Resolve4", "str(str)", DnsResolve4)
    RT_METHOD("Resolve6", "str(str)", DnsResolve6)
    RT_METHOD("Reverse", "str(str)", DnsReverse)
    // Validation methods
    RT_METHOD("IsIPv4", "i1(str)", DnsIsIPv4)
    RT_METHOD("IsIPv6", "i1(str)", DnsIsIPv6)
    RT_METHOD("IsIP", "i1(str)", DnsIsIP)
    // Local info methods
    RT_METHOD("LocalHost", "str()", DnsLocalHost)
    RT_METHOD("LocalAddrs", "obj()", DnsLocalAddrs)
RT_CLASS_END()

// Viper.Network.Http - Static HTTP client utilities
RT_CLASS_BEGIN("Viper.Network.Http", Http, "none", none)
    // Simple GET/POST methods
    RT_METHOD("Get", "str(str)", HttpGet)
    RT_METHOD("GetBytes", "obj(str)", HttpGetBytes)
    RT_METHOD("Post", "str(str,str)", HttpPost)
    RT_METHOD("PostBytes", "obj(str,obj)", HttpPostBytes)
    RT_METHOD("Download", "i1(str,str)", HttpDownload)
    RT_METHOD("Head", "obj(str)", HttpHead)
RT_CLASS_END()

// Viper.Network.HttpReq - HTTP request builder (instance class)
RT_CLASS_BEGIN("Viper.Network.HttpReq", HttpReq, "obj", none)
    // Constructor
    RT_METHOD("New", "obj(str,str)", HttpReqNew)
    // Chainable setters
    RT_METHOD("SetHeader", "obj(str,str)", HttpReqSetHeader)
    RT_METHOD("SetBody", "obj(obj)", HttpReqSetBody)
    RT_METHOD("SetBodyStr", "obj(str)", HttpReqSetBodyStr)
    RT_METHOD("SetTimeout", "obj(i64)", HttpReqSetTimeout)
    // Send request
    RT_METHOD("Send", "obj()", HttpReqSend)
RT_CLASS_END()

// Viper.Network.HttpRes - HTTP response (instance class)
RT_CLASS_BEGIN("Viper.Network.HttpRes", HttpRes, "obj", none)
    // Properties
    RT_PROP("Status", "i64", HttpResStatus, none)
    RT_PROP("StatusText", "str", HttpResStatusText, none)
    RT_PROP("Headers", "obj", HttpResHeaders, none)
    // Methods
    RT_METHOD("Body", "obj()", HttpResBody)
    RT_METHOD("BodyStr", "str()", HttpResBodyStr)
    RT_METHOD("Header", "str(str)", HttpResHeader)
    RT_METHOD("IsOk", "i1()", HttpResIsOk)
RT_CLASS_END()

// Viper.Network.Url - URL parsing and construction (instance class)
RT_CLASS_BEGIN("Viper.Network.Url", Url, "obj", none)
    // Static constructors
    RT_METHOD("Parse", "obj(str)", UrlParse)
    RT_METHOD("New", "obj()", UrlNew)
    // Read/write properties
    RT_PROP("Scheme", "str", UrlScheme, UrlSetScheme)
    RT_PROP("Host", "str", UrlHost, UrlSetHost)
    RT_PROP("Port", "i64", UrlPort, UrlSetPort)
    RT_PROP("Path", "str", UrlPath, UrlSetPath)
    RT_PROP("Query", "str", UrlQuery, UrlSetQuery)
    RT_PROP("Fragment", "str", UrlFragment, UrlSetFragment)
    RT_PROP("User", "str", UrlUser, UrlSetUser)
    RT_PROP("Pass", "str", UrlPass, UrlSetPass)
    // Read-only computed properties
    RT_PROP("Authority", "str", UrlAuthority, none)
    RT_PROP("HostPort", "str", UrlHostPort, none)
    RT_PROP("Full", "str", UrlFull, none)
    // Query parameter methods
    RT_METHOD("SetQueryParam", "obj(str,str)", UrlSetQueryParam)
    RT_METHOD("GetQueryParam", "str(str)", UrlGetQueryParam)
    RT_METHOD("HasQueryParam", "i1(str)", UrlHasQueryParam)
    RT_METHOD("DelQueryParam", "obj(str)", UrlDelQueryParam)
    RT_METHOD("QueryMap", "obj()", UrlQueryMap)
    // Other methods
    RT_METHOD("Resolve", "obj(str)", UrlResolve)
    RT_METHOD("Clone", "obj()", UrlClone)
    // Static utility methods
    RT_METHOD("Encode", "str(str)", UrlEncode)
    RT_METHOD("Decode", "str(str)", UrlDecode)
    RT_METHOD("EncodeQuery", "str(obj)", UrlEncodeQueryMap)
    RT_METHOD("DecodeQuery", "obj(str)", UrlDecodeQueryStr)
    RT_METHOD("IsValid", "i1(str)", UrlIsValid)
RT_CLASS_END()
