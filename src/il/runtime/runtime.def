//===----------------------------------------------------------------------===//
//
// Part of the Viper project, under the GNU GPL v3.
// See LICENSE for license information.
//
//===----------------------------------------------------------------------===//
//
// File: src/il/runtime/runtime.def
// Purpose: Single source of truth for all Viper runtime definitions.
//          This file is parsed by rtgen to generate:
//            - RuntimeNameMap.inc   (canonical -> C symbol mapping)
//            - RuntimeClasses.inc   (OOP class catalog)
//
// Syntax:
//   RT_FUNC(id, c_symbol, "canonical", "signature")
//   RT_ALIAS("canonical_alias", target_id)
//   RT_CLASS_BEGIN("name", type_id, "layout", ctor_id)
//     RT_PROP("name", "type", getter_id, setter_id_or_none)
//     RT_METHOD("name", "signature", target_id)
//   RT_CLASS_END()
//
// Notes:
//   - id must be unique C++ identifier
//   - c_symbol is the C runtime function name (rt_*)
//   - canonical is the Viper.* namespace name
//   - signature uses IL type syntax: void, i64, f64, str, obj, i1, ptr
//   - For class methods, signature omits the receiver (arg0)
//
//===----------------------------------------------------------------------===//

//=============================================================================
// TERMINAL I/O
//=============================================================================

// Legacy print functions (still used by BASIC PRINT statement)
RT_FUNC(PrintStr,  rt_print_str,  "Viper.Terminal.PrintStr",  "void(str)")
RT_FUNC(PrintI64,  rt_print_i64,  "Viper.Terminal.PrintI64",  "void(i64)")
RT_FUNC(PrintF64,  rt_print_f64,  "Viper.Terminal.PrintF64",  "void(f64)")

// Terminal I/O with newline (Say = print + newline)
RT_FUNC(TermSay,      rt_term_say,       "Viper.Terminal.Say",       "void(str)")
RT_FUNC(TermSayInt,   rt_term_say_i64,   "Viper.Terminal.SayInt",    "void(i64)")
RT_FUNC(TermSayNum,   rt_term_say_f64,   "Viper.Terminal.SayNum",    "void(f64)")
RT_FUNC(TermSayBool,  rt_term_say_bool,  "Viper.Terminal.SayBool",   "void(i1)")

// Terminal I/O without newline (Print = no newline, flush immediately)
RT_FUNC(TermPrint,    rt_term_print,     "Viper.Terminal.Print",     "void(str)")
RT_FUNC(TermPrintInt, rt_term_print_i64, "Viper.Terminal.PrintInt",  "void(i64)")
RT_FUNC(TermPrintNum, rt_term_print_f64, "Viper.Terminal.PrintNum",  "void(f64)")

// Terminal input
RT_FUNC(TermAsk,      rt_term_ask,       "Viper.Terminal.Ask",       "str(str)")
RT_FUNC(TermReadLine, rt_term_read_line, "Viper.Terminal.ReadLine",  "str()")

// Console aliases (backward compatibility - Console is now consolidated into Terminal)
RT_ALIAS("Viper.Console.PrintStr", PrintStr)
RT_ALIAS("Viper.Console.PrintI64", PrintI64)
RT_ALIAS("Viper.Console.PrintF64", PrintF64)
RT_ALIAS("Viper.Console.ReadLine", TermReadLine)

//=============================================================================
// STRING FUNCTIONS
//=============================================================================

RT_FUNC(Len,       rt_len,        "Viper.String.get_Length",  "i64(str)")
RT_FUNC(StrIsEmpty, rt_str_is_empty, "Viper.String.get_IsEmpty", "i1(str)")
RT_FUNC(Concat,    rt_concat,     "Viper.String.Concat",      "str(str,str)")
RT_FUNC(Substr,    rt_substr,     "Viper.String.Substring",   "str(str,i64,i64)")
RT_FUNC(Left,      rt_left,       "Viper.String.Left",        "str(str,i64)")
RT_FUNC(Right,     rt_right,      "Viper.String.Right",       "str(str,i64)")
RT_FUNC(Mid2,      rt_mid2,       "Viper.String.Mid",         "str(str,i64)")
RT_FUNC(Mid3,      rt_mid3,       "Viper.String.MidLen",      "str(str,i64,i64)")
RT_FUNC(Trim,      rt_trim,       "Viper.String.Trim",        "str(str)")
RT_FUNC(LTrim,     rt_ltrim,      "Viper.String.TrimStart",   "str(str)")
RT_FUNC(RTrim,     rt_rtrim,      "Viper.String.TrimEnd",     "str(str)")
RT_FUNC(UCase,     rt_ucase,      "Viper.String.ToUpper",     "str(str)")
RT_FUNC(LCase,     rt_lcase,      "Viper.String.ToLower",     "str(str)")
RT_FUNC(IndexOf,   rt_instr2,     "Viper.String.IndexOf",     "i64(str,str)")
RT_FUNC(IndexOfFrom, rt_instr3,   "Viper.String.IndexOfFrom", "i64(str,i64,str)")
RT_FUNC(Chr,       rt_chr,        "Viper.String.Chr",         "str(i64)")
RT_FUNC(Asc,       rt_asc,        "Viper.String.Asc",         "i64(str)")

// String expansion - search & match
RT_FUNC(StrReplace,     rt_str_replace,      "Viper.String.Replace",       "str(str,str,str)")
RT_FUNC(StrStartsWith,  rt_str_starts_with,  "Viper.String.StartsWith",    "i1(str,str)")
RT_FUNC(StrEndsWith,    rt_str_ends_with,    "Viper.String.EndsWith",      "i1(str,str)")
RT_FUNC(StrHas,         rt_str_has,          "Viper.String.Has",           "i1(str,str)")
RT_FUNC(StrCount,       rt_str_count,        "Viper.String.Count",         "i64(str,str)")

// String expansion - transformation
RT_FUNC(StrPadLeft,     rt_str_pad_left,     "Viper.String.PadLeft",       "str(str,i64,str)")
RT_FUNC(StrPadRight,    rt_str_pad_right,    "Viper.String.PadRight",      "str(str,i64,str)")
RT_FUNC(StrSplit,       rt_str_split,        "Viper.String.Split",         "obj(str,str)")
RT_FUNC(StrRepeat,      rt_str_repeat,       "Viper.String.Repeat",        "str(str,i64)")
RT_FUNC(StrFlip,        rt_str_flip,         "Viper.String.Flip",          "str(str)")

// String expansion - comparison
RT_FUNC(StrCmp,         rt_str_cmp,          "Viper.String.Cmp",           "i64(str,str)")
RT_FUNC(StrCmpNoCase,   rt_str_cmp_nocase,   "Viper.String.CmpNoCase",     "i64(str,str)")

// String conversion and identity constructor
RT_FUNC(StrFromStr,   rt_from_str,      "Viper.Strings.FromStr",    "str(str)")
RT_FUNC(IntToStr,     rt_int_to_str,    "Viper.Strings.FromInt",    "str(i64)")
RT_FUNC(F64ToStr,     rt_f64_to_str,    "Viper.Strings.FromDouble", "str(f64)")
RT_FUNC(StrFromI32,   rt_str_i32_alloc, "Viper.Strings.FromI32",    "str(i32)")
RT_FUNC(StrFromI16,   rt_str_i16_alloc, "Viper.Strings.FromI16",    "str(i16)")
RT_FUNC(StrFromSingle, rt_str_f_alloc,  "Viper.Strings.FromSingle", "str(f64)")
RT_FUNC(StrFromDoublePrecise, rt_str_d_alloc, "Viper.Strings.FromDoublePrecise", "str(f64)")
RT_FUNC(SplitFields,  rt_split_fields,  "Viper.Strings.SplitFields", "i64(str,ptr,i64)")
RT_FUNC(StrEquals,    rt_str_eq,        "Viper.Strings.Equals",     "i1(str,str)")
RT_FUNC(StringsJoin,  rt_strings_join,  "Viper.Strings.Join",       "str(str,obj)")

// String aliases (alternative canonical names for same function)
RT_ALIAS("Viper.Strings.Len", Len)
RT_ALIAS("Viper.Strings.Concat", Concat)
RT_ALIAS("Viper.Strings.Mid", Substr)
RT_ALIAS("Viper.String.ConcatSelf", Concat)

//=============================================================================
// TYPE CONVERSION
//=============================================================================

RT_FUNC(ToInt,       rt_to_int,       "Viper.Convert.ToInt",      "i64(str)")
RT_FUNC(ToDouble,    rt_to_double,    "Viper.Convert.ToDouble",   "f64(str)")
RT_FUNC(ParseInt64,  rt_parse_int64,  "Viper.Parse.Int64",        "i32(ptr,ptr)")
RT_FUNC(ParseDouble, rt_parse_double, "Viper.Parse.Double",       "i32(ptr,ptr)")

//=============================================================================
// DIAGNOSTICS
//=============================================================================

RT_FUNC(Trap, rt_trap, "Viper.Diagnostics.Trap", "void(str)")

//=============================================================================
// MATH FUNCTIONS
//=============================================================================

RT_FUNC(MathAbs,    rt_abs_f64,         "Viper.Math.Abs",    "f64(f64)")
RT_FUNC(MathAbsInt, rt_abs_i64,         "Viper.Math.AbsInt", "i64(i64)")
RT_FUNC(MathSqrt,   rt_sqrt,            "Viper.Math.Sqrt",   "f64(f64)")
RT_FUNC(MathSin,    rt_sin,             "Viper.Math.Sin",    "f64(f64)")
RT_FUNC(MathCos,    rt_cos,             "Viper.Math.Cos",    "f64(f64)")
RT_FUNC(MathTan,    rt_tan,             "Viper.Math.Tan",    "f64(f64)")
RT_FUNC(MathAtan,   rt_atan,            "Viper.Math.Atan",   "f64(f64)")
RT_FUNC(MathFloor,  rt_floor,           "Viper.Math.Floor",  "f64(f64)")
RT_FUNC(MathCeil,   rt_ceil,            "Viper.Math.Ceil",   "f64(f64)")
RT_FUNC(MathPow,    rt_pow_f64_chkdom,  "Viper.Math.Pow",    "f64(f64,f64)")
RT_FUNC(MathLog,    rt_log,             "Viper.Math.Log",    "f64(f64)")
RT_FUNC(MathExp,    rt_exp,             "Viper.Math.Exp",    "f64(f64)")
RT_FUNC(MathSgn,    rt_sgn_f64,         "Viper.Math.Sgn",    "f64(f64)")
RT_FUNC(MathSgnInt, rt_sgn_i64,         "Viper.Math.SgnInt", "i64(i64)")
RT_FUNC(MathMin,    rt_min_f64,         "Viper.Math.Min",    "f64(f64,f64)")
RT_FUNC(MathMax,    rt_max_f64,         "Viper.Math.Max",    "f64(f64,f64)")
RT_FUNC(MathMinInt, rt_min_i64,         "Viper.Math.MinInt", "i64(i64,i64)")
RT_FUNC(MathMaxInt, rt_max_i64,         "Viper.Math.MaxInt", "i64(i64,i64)")

//=============================================================================
// RANDOM
//=============================================================================

RT_FUNC(RandomSeed,    rt_randomize_i64, "Viper.Random.Seed",    "void(i64)")
RT_FUNC(RandomNext,    rt_rnd,           "Viper.Random.Next",    "f64()")
RT_FUNC(RandomNextInt, rt_rand_int,      "Viper.Random.NextInt", "i64(i64)")

//=============================================================================
// ENVIRONMENT
//=============================================================================

RT_FUNC(EnvArgCount,  rt_args_count,     "Viper.Environment.GetArgumentCount", "i64()")
RT_FUNC(EnvArgGet,    rt_args_get,       "Viper.Environment.GetArgument",      "str(i64)")
RT_FUNC(EnvCmdLine,   rt_cmdline,        "Viper.Environment.GetCommandLine",   "str()")
RT_FUNC(EnvIsNative,  rt_env_is_native,  "Viper.Environment.IsNative",         "i1()")

//=============================================================================
// COLLECTIONS - LIST
//=============================================================================

RT_FUNC(ListNew,       rt_ns_list_new,      "Viper.Collections.List.New",       "obj()")
RT_FUNC(ListGetCount,  rt_list_get_count,   "Viper.Collections.List.get_Count", "i64(obj)")
RT_FUNC(ListAdd,       rt_list_add,         "Viper.Collections.List.Add",       "void(obj,obj)")
RT_FUNC(ListClear,     rt_list_clear,       "Viper.Collections.List.Clear",     "void(obj)")
RT_FUNC(ListRemoveAt,  rt_list_remove_at,   "Viper.Collections.List.RemoveAt",  "void(obj,i64)")
RT_FUNC(ListGetItem,   rt_list_get_item,    "Viper.Collections.List.get_Item",  "obj(obj,i64)")
RT_FUNC(ListSetItem,   rt_list_set_item,    "Viper.Collections.List.set_Item",  "void(obj,i64,obj)")

//=============================================================================
// COLLECTIONS - MAP
//=============================================================================

RT_FUNC(MapNew,     rt_map_new,      "Viper.Collections.Map.New",         "obj()")
RT_FUNC(MapLen,     rt_map_len,      "Viper.Collections.Map.get_Len",     "i64(obj)")
RT_FUNC(MapIsEmpty, rt_map_is_empty, "Viper.Collections.Map.get_IsEmpty", "i1(obj)")
RT_FUNC(MapSet,     rt_map_set,      "Viper.Collections.Map.Set",         "void(obj,str,obj)")
RT_FUNC(MapGet,     rt_map_get,      "Viper.Collections.Map.Get",         "obj(obj,str)")
RT_FUNC(MapHas,     rt_map_has,      "Viper.Collections.Map.Has",         "i1(obj,str)")
RT_FUNC(MapRemove,  rt_map_remove,   "Viper.Collections.Map.Remove",      "i1(obj,str)")
RT_FUNC(MapClear,   rt_map_clear,    "Viper.Collections.Map.Clear",       "void(obj)")
RT_FUNC(MapKeys,    rt_map_keys,     "Viper.Collections.Map.Keys",        "obj(obj)")
RT_FUNC(MapValues,  rt_map_values,   "Viper.Collections.Map.Values",      "obj(obj)")

//=============================================================================
// COLLECTIONS - SEQ (Dynamic Sequence)
//=============================================================================

RT_FUNC(SeqNew,          rt_seq_new,           "Viper.Collections.Seq.New",           "obj()")
RT_FUNC(SeqWithCapacity, rt_seq_with_capacity, "Viper.Collections.Seq.WithCapacity",  "obj(i64)")
RT_FUNC(SeqLen,          rt_seq_len,           "Viper.Collections.Seq.get_Len",       "i64(obj)")
RT_FUNC(SeqCap,          rt_seq_cap,           "Viper.Collections.Seq.get_Cap",       "i64(obj)")
RT_FUNC(SeqIsEmpty,      rt_seq_is_empty,      "Viper.Collections.Seq.get_IsEmpty",   "i1(obj)")
RT_FUNC(SeqGet,          rt_seq_get,           "Viper.Collections.Seq.Get",           "obj(obj,i64)")
RT_FUNC(SeqSet,          rt_seq_set,           "Viper.Collections.Seq.Set",           "void(obj,i64,obj)")
RT_FUNC(SeqPush,         rt_seq_push,          "Viper.Collections.Seq.Push",          "void(obj,obj)")
RT_FUNC(SeqPop,          rt_seq_pop,           "Viper.Collections.Seq.Pop",           "obj(obj)")
RT_FUNC(SeqPeek,         rt_seq_peek,          "Viper.Collections.Seq.Peek",          "obj(obj)")
RT_FUNC(SeqInsert,       rt_seq_insert,        "Viper.Collections.Seq.Insert",        "void(obj,i64,obj)")
RT_FUNC(SeqRemove,       rt_seq_remove,        "Viper.Collections.Seq.Remove",        "obj(obj,i64)")
RT_FUNC(SeqClear,        rt_seq_clear,         "Viper.Collections.Seq.Clear",         "void(obj)")
RT_FUNC(SeqFind,         rt_seq_find,          "Viper.Collections.Seq.Find",          "i64(obj,obj)")
RT_FUNC(SeqHas,          rt_seq_has,           "Viper.Collections.Seq.Has",           "i1(obj,obj)")
RT_FUNC(SeqReverse,      rt_seq_reverse,       "Viper.Collections.Seq.Reverse",       "void(obj)")
RT_FUNC(SeqSlice,        rt_seq_slice,         "Viper.Collections.Seq.Slice",         "obj(obj,i64,i64)")
RT_FUNC(SeqClone,        rt_seq_clone,         "Viper.Collections.Seq.Clone",         "obj(obj)")
RT_FUNC(SeqFirst,        rt_seq_first,         "Viper.Collections.Seq.First",         "obj(obj)")
RT_FUNC(SeqLast,         rt_seq_last,          "Viper.Collections.Seq.Last",          "obj(obj)")

//=============================================================================
// COLLECTIONS - STACK
//=============================================================================

RT_FUNC(StackNew,     rt_stack_new,      "Viper.Collections.Stack.New",         "obj()")
RT_FUNC(StackLen,     rt_stack_len,      "Viper.Collections.Stack.get_Len",     "i64(obj)")
RT_FUNC(StackIsEmpty, rt_stack_is_empty, "Viper.Collections.Stack.get_IsEmpty", "i1(obj)")
RT_FUNC(StackPush,    rt_stack_push,     "Viper.Collections.Stack.Push",        "void(obj,obj)")
RT_FUNC(StackPop,     rt_stack_pop,      "Viper.Collections.Stack.Pop",         "obj(obj)")
RT_FUNC(StackPeek,    rt_stack_peek,     "Viper.Collections.Stack.Peek",        "obj(obj)")
RT_FUNC(StackClear,   rt_stack_clear,    "Viper.Collections.Stack.Clear",       "void(obj)")

//=============================================================================
// COLLECTIONS - QUEUE
//=============================================================================

RT_FUNC(QueueNew,     rt_queue_new,      "Viper.Collections.Queue.New",         "obj()")
RT_FUNC(QueueLen,     rt_queue_len,      "Viper.Collections.Queue.get_Len",     "i64(obj)")
RT_FUNC(QueueIsEmpty, rt_queue_is_empty, "Viper.Collections.Queue.get_IsEmpty", "i1(obj)")
RT_FUNC(QueueAdd,     rt_queue_add,      "Viper.Collections.Queue.Add",         "void(obj,obj)")
RT_FUNC(QueueTake,    rt_queue_take,     "Viper.Collections.Queue.Take",        "obj(obj)")
RT_FUNC(QueuePeek,    rt_queue_peek,     "Viper.Collections.Queue.Peek",        "obj(obj)")
RT_FUNC(QueueClear,   rt_queue_clear,    "Viper.Collections.Queue.Clear",       "void(obj)")

//=============================================================================
// COLLECTIONS - BYTES
//=============================================================================

RT_FUNC(BytesNew,     rt_bytes_new,      "Viper.Collections.Bytes.New",         "obj(i64)")
RT_FUNC(BytesFromStr, rt_bytes_from_str, "Viper.Collections.Bytes.FromStr",     "obj(str)")
RT_FUNC(BytesFromHex, rt_bytes_from_hex, "Viper.Collections.Bytes.FromHex",     "obj(str)")
RT_FUNC(BytesLen,     rt_bytes_len,      "Viper.Collections.Bytes.get_Len",     "i64(obj)")
RT_FUNC(BytesGet,     rt_bytes_get,      "Viper.Collections.Bytes.Get",         "i64(obj,i64)")
RT_FUNC(BytesSet,     rt_bytes_set,      "Viper.Collections.Bytes.Set",         "void(obj,i64,i64)")
RT_FUNC(BytesSlice,   rt_bytes_slice,    "Viper.Collections.Bytes.Slice",       "obj(obj,i64,i64)")
RT_FUNC(BytesCopy,    rt_bytes_copy,     "Viper.Collections.Bytes.Copy",        "void(obj,i64,obj,i64,i64)")
RT_FUNC(BytesToStr,   rt_bytes_to_str,   "Viper.Collections.Bytes.ToStr",       "str(obj)")
RT_FUNC(BytesToHex,   rt_bytes_to_hex,   "Viper.Collections.Bytes.ToHex",       "str(obj)")
RT_FUNC(BytesFill,    rt_bytes_fill,     "Viper.Collections.Bytes.Fill",        "void(obj,i64)")
RT_FUNC(BytesFind,    rt_bytes_find,     "Viper.Collections.Bytes.Find",        "i64(obj,i64)")
RT_FUNC(BytesClone,   rt_bytes_clone,    "Viper.Collections.Bytes.Clone",       "obj(obj)")

//=============================================================================
// TEXT - STRINGBUILDER
//=============================================================================

RT_FUNC(SBNew,         rt_ns_stringbuilder_new,  "Viper.Text.StringBuilder.New",          "obj()")
RT_FUNC(SBAppend,      rt_text_sb_append,        "Viper.Text.StringBuilder.Append",       "obj(obj,str)")
RT_FUNC(SBToString,    rt_text_sb_to_string,     "Viper.Text.StringBuilder.ToString",     "str(obj)")
RT_FUNC(SBClear,       rt_text_sb_clear,         "Viper.Text.StringBuilder.Clear",        "void(obj)")
RT_FUNC(SBGetLength,   rt_text_sb_get_length,    "Viper.Text.StringBuilder.get_Length",   "i64(obj)")
RT_FUNC(SBGetCapacity, rt_text_sb_get_capacity,  "Viper.Text.StringBuilder.get_Capacity", "i64(obj)")

//=============================================================================
// IO - FILE
//=============================================================================

RT_FUNC(FileExists,      rt_io_file_exists,         "Viper.IO.File.Exists",       "i1(str)")
RT_FUNC(FileReadAllText, rt_io_file_read_all_text,  "Viper.IO.File.ReadAllText",  "str(str)")
RT_FUNC(FileWriteAllText, rt_io_file_write_all_text, "Viper.IO.File.WriteAllText", "void(str,str)")
RT_FUNC(FileDelete,      rt_io_file_delete,         "Viper.IO.File.Delete",       "void(str)")

//=============================================================================
// TERMINAL
//=============================================================================

RT_FUNC(TermClear,         rt_term_cls,              "Viper.Terminal.Clear",           "void()")
RT_FUNC(TermInKey,         rt_inkey_str,             "Viper.Terminal.InKey",           "str()")
RT_FUNC(TermSetColor,      rt_term_color_i32,        "Viper.Terminal.SetColor",        "void(i64,i64)")
RT_FUNC(TermSetPosition,   rt_term_locate_i32,       "Viper.Terminal.SetPosition",     "void(i64,i64)")
RT_FUNC(TermSetCursorVisible, rt_term_cursor_visible_i32, "Viper.Terminal.SetCursorVisible", "void(i64)")
RT_FUNC(TermSetAltScreen,  rt_term_alt_screen_i32,   "Viper.Terminal.SetAltScreen",    "void(i64)")
RT_FUNC(TermBell,          rt_bell,                  "Viper.Terminal.Bell",            "void()")
RT_FUNC(TermGetKey,        rt_getkey_str,            "Viper.Terminal.GetKey",          "str()")
RT_FUNC(TermGetKeyTimeout, rt_getkey_timeout_i32,    "Viper.Terminal.GetKeyTimeout",   "str(i64)")
RT_FUNC(TermBeginBatch,    rt_term_begin_batch,      "Viper.Terminal.BeginBatch",      "void()")
RT_FUNC(TermEndBatch,      rt_term_end_batch,        "Viper.Terminal.EndBatch",        "void()")
RT_FUNC(TermFlush,         rt_term_flush,            "Viper.Terminal.Flush",           "void()")

//=============================================================================
// TIME
//=============================================================================

RT_FUNC(TimeSleepMs,     rt_sleep_ms,  "Viper.Time.SleepMs",      "void(i64)")
RT_FUNC(TimeGetTickCount, rt_timer_ms, "Viper.Time.GetTickCount", "i64()")

//=============================================================================
// DATETIME
//=============================================================================

RT_FUNC(DateTimeNow,        rt_datetime_now,         "Viper.DateTime.Now",        "i64()")
RT_FUNC(DateTimeNowMs,      rt_datetime_now_ms,      "Viper.DateTime.NowMs",      "i64()")
RT_FUNC(DateTimeYear,       rt_datetime_year,        "Viper.DateTime.Year",       "i64(i64)")
RT_FUNC(DateTimeMonth,      rt_datetime_month,       "Viper.DateTime.Month",      "i64(i64)")
RT_FUNC(DateTimeDay,        rt_datetime_day,         "Viper.DateTime.Day",        "i64(i64)")
RT_FUNC(DateTimeHour,       rt_datetime_hour,        "Viper.DateTime.Hour",       "i64(i64)")
RT_FUNC(DateTimeMinute,     rt_datetime_minute,      "Viper.DateTime.Minute",     "i64(i64)")
RT_FUNC(DateTimeSecond,     rt_datetime_second,      "Viper.DateTime.Second",     "i64(i64)")
RT_FUNC(DateTimeDayOfWeek,  rt_datetime_day_of_week, "Viper.DateTime.DayOfWeek",  "i64(i64)")
RT_FUNC(DateTimeFormat,     rt_datetime_format,      "Viper.DateTime.Format",     "str(i64,str)")
RT_FUNC(DateTimeToISO,      rt_datetime_to_iso,      "Viper.DateTime.ToISO",      "str(i64)")
RT_FUNC(DateTimeCreate,     rt_datetime_create,      "Viper.DateTime.Create",     "i64(i64,i64,i64,i64,i64,i64)")
RT_FUNC(DateTimeAddSeconds, rt_datetime_add_seconds, "Viper.DateTime.AddSeconds", "i64(i64,i64)")
RT_FUNC(DateTimeAddDays,    rt_datetime_add_days,    "Viper.DateTime.AddDays",    "i64(i64,i64)")
RT_FUNC(DateTimeDiff,       rt_datetime_diff,        "Viper.DateTime.Diff",       "i64(i64,i64)")

//=============================================================================
// OBJECT (BASE CLASS)
//=============================================================================

RT_FUNC(ObjEquals,         rt_obj_equals,           "Viper.Object.Equals",          "i1(obj,obj)")
RT_FUNC(ObjGetHashCode,    rt_obj_get_hash_code,    "Viper.Object.GetHashCode",     "i64(obj)")
RT_FUNC(ObjReferenceEquals, rt_obj_reference_equals, "Viper.Object.ReferenceEquals", "i1(obj,obj)")
RT_FUNC(ObjToString,       rt_obj_to_string,        "Viper.Object.ToString",        "str(obj)")

//=============================================================================
// GRAPHICS - CANVAS
//=============================================================================

RT_FUNC(CanvasNew,         rt_canvas_new,          "Viper.Graphics.Canvas.New",            "obj(str,i64,i64)")
RT_FUNC(CanvasWidth,       rt_canvas_width,        "Viper.Graphics.Canvas.get_Width",      "i64(obj)")
RT_FUNC(CanvasHeight,      rt_canvas_height,       "Viper.Graphics.Canvas.get_Height",     "i64(obj)")
RT_FUNC(CanvasShouldClose, rt_canvas_should_close, "Viper.Graphics.Canvas.get_ShouldClose","i64(obj)")
RT_FUNC(CanvasFlip,        rt_canvas_flip,         "Viper.Graphics.Canvas.Flip",           "void(obj)")
RT_FUNC(CanvasClear,       rt_canvas_clear,        "Viper.Graphics.Canvas.Clear",          "void(obj,i64)")
RT_FUNC(CanvasLine,        rt_canvas_line,         "Viper.Graphics.Canvas.Line",           "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasBox,         rt_canvas_box,          "Viper.Graphics.Canvas.Box",            "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasFrame,       rt_canvas_frame,        "Viper.Graphics.Canvas.Frame",          "void(obj,i64,i64,i64,i64,i64)")
RT_FUNC(CanvasDisc,        rt_canvas_disc,         "Viper.Graphics.Canvas.Disc",           "void(obj,i64,i64,i64,i64)")
RT_FUNC(CanvasRing,        rt_canvas_ring,         "Viper.Graphics.Canvas.Ring",           "void(obj,i64,i64,i64,i64)")
RT_FUNC(CanvasPlot,        rt_canvas_plot,         "Viper.Graphics.Canvas.Plot",           "void(obj,i64,i64,i64)")
RT_FUNC(CanvasPoll,        rt_canvas_poll,         "Viper.Graphics.Canvas.Poll",           "i64(obj)")
RT_FUNC(CanvasKeyHeld,     rt_canvas_key_held,     "Viper.Graphics.Canvas.KeyHeld",        "i64(obj,i64)")

//=============================================================================
// GRAPHICS - COLOR
//=============================================================================

RT_FUNC(ColorRGB,          rt_color_rgb,           "Viper.Graphics.Color.RGB",             "i64(i64,i64,i64)")
RT_FUNC(ColorRGBA,         rt_color_rgba,          "Viper.Graphics.Color.RGBA",            "i64(i64,i64,i64,i64)")

//=============================================================================
// RUNTIME CLASSES
//=============================================================================

// Viper.String - built-in string type (ctor is identity function for string â†’ String)
RT_CLASS_BEGIN("Viper.String", String, "opaque*", StrFromStr)
    RT_PROP("Length", "i64", Len, none)
    RT_PROP("IsEmpty", "i1", StrIsEmpty, none)
    RT_METHOD("Substring", "str(i64,i64)", Substr)
    RT_METHOD("Concat", "str(str)", Concat)
    RT_METHOD("Left", "str(i64)", Left)
    RT_METHOD("Right", "str(i64)", Right)
    RT_METHOD("Mid", "str(i64)", Mid2)
    RT_METHOD("MidLen", "str(i64,i64)", Mid3)
    RT_METHOD("Trim", "str()", Trim)
    RT_METHOD("TrimStart", "str()", LTrim)
    RT_METHOD("TrimEnd", "str()", RTrim)
    RT_METHOD("ToUpper", "str()", UCase)
    RT_METHOD("ToLower", "str()", LCase)
    RT_METHOD("IndexOf", "i64(str)", IndexOf)
    RT_METHOD("IndexOfFrom", "i64(i64,str)", IndexOfFrom)
    RT_METHOD("Chr", "str(i64)", Chr)
    RT_METHOD("Asc", "i64()", Asc)
    // String expansion methods
    RT_METHOD("Replace", "str(str,str)", StrReplace)
    RT_METHOD("StartsWith", "i1(str)", StrStartsWith)
    RT_METHOD("EndsWith", "i1(str)", StrEndsWith)
    RT_METHOD("Has", "i1(str)", StrHas)
    RT_METHOD("Count", "i64(str)", StrCount)
    RT_METHOD("PadLeft", "str(i64,str)", StrPadLeft)
    RT_METHOD("PadRight", "str(i64,str)", StrPadRight)
    RT_METHOD("Split", "obj(str)", StrSplit)
    RT_METHOD("Repeat", "str(i64)", StrRepeat)
    RT_METHOD("Flip", "str()", StrFlip)
    RT_METHOD("Cmp", "i64(str)", StrCmp)
    RT_METHOD("CmpNoCase", "i64(str)", StrCmpNoCase)
RT_CLASS_END()

// Viper.Text.StringBuilder
RT_CLASS_BEGIN("Viper.Text.StringBuilder", StringBuilder, "opaque*", SBNew)
    RT_PROP("Length", "i64", SBGetLength, none)
    RT_PROP("Capacity", "i64", SBGetCapacity, none)
    RT_METHOD("Append", "obj(str)", SBAppend)
    RT_METHOD("ToString", "str()", SBToString)
    RT_METHOD("Clear", "void()", SBClear)
RT_CLASS_END()

// Viper.Object - base class for all objects
// Note: ReferenceEquals is a static function, not an instance method.
// Call as: Viper.Object.ReferenceEquals(a, b)
RT_CLASS_BEGIN("Viper.Object", Object, "obj", none)
    RT_METHOD("Equals", "i1(obj)", ObjEquals)
    RT_METHOD("GetHashCode", "i64()", ObjGetHashCode)
    RT_METHOD("ToString", "str()", ObjToString)
RT_CLASS_END()

// Viper.IO.File - static utility class
RT_CLASS_BEGIN("Viper.IO.File", File, "obj", none)
    RT_METHOD("Exists", "i1(str)", FileExists)
    RT_METHOD("ReadAllText", "str(str)", FileReadAllText)
    RT_METHOD("WriteAllText", "void(str,str)", FileWriteAllText)
    RT_METHOD("Delete", "void(str)", FileDelete)
RT_CLASS_END()

// Viper.Collections.List
RT_CLASS_BEGIN("Viper.Collections.List", List, "obj", ListNew)
    RT_PROP("Count", "i64", ListGetCount, none)
    RT_METHOD("Add", "void(obj)", ListAdd)
    RT_METHOD("Clear", "void()", ListClear)
    RT_METHOD("RemoveAt", "void(i64)", ListRemoveAt)
    RT_METHOD("get_Item", "obj(i64)", ListGetItem)
    RT_METHOD("set_Item", "void(i64,obj)", ListSetItem)
RT_CLASS_END()

// Viper.Collections.Map - key-value dictionary (string keys)
RT_CLASS_BEGIN("Viper.Collections.Map", Map, "obj", MapNew)
    RT_PROP("Len", "i64", MapLen, none)
    RT_PROP("IsEmpty", "i1", MapIsEmpty, none)
    RT_METHOD("Set", "void(str,obj)", MapSet)
    RT_METHOD("Get", "obj(str)", MapGet)
    RT_METHOD("Has", "i1(str)", MapHas)
    RT_METHOD("Remove", "i1(str)", MapRemove)
    RT_METHOD("Clear", "void()", MapClear)
    RT_METHOD("Keys", "obj()", MapKeys)
    RT_METHOD("Values", "obj()", MapValues)
RT_CLASS_END()

// Viper.Collections.Seq - dynamic sequence/array
RT_CLASS_BEGIN("Viper.Collections.Seq", Seq, "obj", SeqNew)
    RT_PROP("Len", "i64", SeqLen, none)
    RT_PROP("Cap", "i64", SeqCap, none)
    RT_PROP("IsEmpty", "i1", SeqIsEmpty, none)
    RT_METHOD("Get", "obj(i64)", SeqGet)
    RT_METHOD("Set", "void(i64,obj)", SeqSet)
    RT_METHOD("Push", "void(obj)", SeqPush)
    RT_METHOD("Pop", "obj()", SeqPop)
    RT_METHOD("Peek", "obj()", SeqPeek)
    RT_METHOD("Insert", "void(i64,obj)", SeqInsert)
    RT_METHOD("Remove", "obj(i64)", SeqRemove)
    RT_METHOD("Clear", "void()", SeqClear)
    RT_METHOD("Find", "i64(obj)", SeqFind)
    RT_METHOD("Has", "i1(obj)", SeqHas)
    RT_METHOD("Reverse", "void()", SeqReverse)
    RT_METHOD("Slice", "obj(i64,i64)", SeqSlice)
    RT_METHOD("Clone", "obj()", SeqClone)
    RT_METHOD("First", "obj()", SeqFirst)
    RT_METHOD("Last", "obj()", SeqLast)
RT_CLASS_END()

// Viper.Collections.Stack - LIFO collection
RT_CLASS_BEGIN("Viper.Collections.Stack", Stack, "obj", StackNew)
    RT_PROP("Len", "i64", StackLen, none)
    RT_PROP("IsEmpty", "i1", StackIsEmpty, none)
    RT_METHOD("Push", "void(obj)", StackPush)
    RT_METHOD("Pop", "obj()", StackPop)
    RT_METHOD("Peek", "obj()", StackPeek)
    RT_METHOD("Clear", "void()", StackClear)
RT_CLASS_END()

// Viper.Collections.Queue - FIFO collection
RT_CLASS_BEGIN("Viper.Collections.Queue", Queue, "obj", QueueNew)
    RT_PROP("Len", "i64", QueueLen, none)
    RT_PROP("IsEmpty", "i1", QueueIsEmpty, none)
    RT_METHOD("Add", "void(obj)", QueueAdd)
    RT_METHOD("Take", "obj()", QueueTake)
    RT_METHOD("Peek", "obj()", QueuePeek)
    RT_METHOD("Clear", "void()", QueueClear)
RT_CLASS_END()

// Viper.Collections.Bytes - efficient byte array
RT_CLASS_BEGIN("Viper.Collections.Bytes", Bytes, "obj", BytesNew)
    RT_PROP("Len", "i64", BytesLen, none)
    RT_METHOD("Get", "i64(i64)", BytesGet)
    RT_METHOD("Set", "void(i64,i64)", BytesSet)
    RT_METHOD("Slice", "obj(i64,i64)", BytesSlice)
    RT_METHOD("Copy", "void(i64,obj,i64,i64)", BytesCopy)
    RT_METHOD("ToStr", "str()", BytesToStr)
    RT_METHOD("ToHex", "str()", BytesToHex)
    RT_METHOD("Fill", "void(i64)", BytesFill)
    RT_METHOD("Find", "i64(i64)", BytesFind)
    RT_METHOD("Clone", "obj()", BytesClone)
RT_CLASS_END()

// Viper.Math - static utility class
RT_CLASS_BEGIN("Viper.Math", Math, "obj", none)
    RT_METHOD("Abs", "f64(f64)", MathAbs)
    RT_METHOD("AbsInt", "i64(i64)", MathAbsInt)
    RT_METHOD("Sqrt", "f64(f64)", MathSqrt)
    RT_METHOD("Sin", "f64(f64)", MathSin)
    RT_METHOD("Cos", "f64(f64)", MathCos)
    RT_METHOD("Tan", "f64(f64)", MathTan)
    RT_METHOD("Atan", "f64(f64)", MathAtan)
    RT_METHOD("Floor", "f64(f64)", MathFloor)
    RT_METHOD("Ceil", "f64(f64)", MathCeil)
    RT_METHOD("Pow", "f64(f64,f64)", MathPow)
    RT_METHOD("Log", "f64(f64)", MathLog)
    RT_METHOD("Exp", "f64(f64)", MathExp)
    RT_METHOD("Sgn", "f64(f64)", MathSgn)
    RT_METHOD("SgnInt", "i64(i64)", MathSgnInt)
    RT_METHOD("Min", "f64(f64,f64)", MathMin)
    RT_METHOD("Max", "f64(f64,f64)", MathMax)
    RT_METHOD("MinInt", "i64(i64,i64)", MathMinInt)
    RT_METHOD("MaxInt", "i64(i64,i64)", MathMaxInt)
RT_CLASS_END()

// Viper.Convert - static utility class
RT_CLASS_BEGIN("Viper.Convert", Convert, "obj", none)
    RT_METHOD("ToInt64", "i64(str)", ToInt)
    RT_METHOD("ToDouble", "f64(str)", ToDouble)
    RT_METHOD("ToString_Int", "str(i64)", IntToStr)
    RT_METHOD("ToString_Double", "str(f64)", F64ToStr)
RT_CLASS_END()

// Viper.Random - static utility class
RT_CLASS_BEGIN("Viper.Random", Random, "obj", none)
    RT_METHOD("Seed", "void(i64)", RandomSeed)
    RT_METHOD("Next", "f64()", RandomNext)
    RT_METHOD("NextInt", "i64(i64)", RandomNextInt)
RT_CLASS_END()

// Viper.Environment - static utility class
RT_CLASS_BEGIN("Viper.Environment", Environment, "obj", none)
    RT_METHOD("GetArgumentCount", "i64()", EnvArgCount)
    RT_METHOD("GetArgument", "str(i64)", EnvArgGet)
    RT_METHOD("GetCommandLine", "str()", EnvCmdLine)
    RT_METHOD("IsNative", "i1()", EnvIsNative)
RT_CLASS_END()

// Viper.Graphics.Canvas - drawing surface
RT_CLASS_BEGIN("Viper.Graphics.Canvas", Canvas, "obj", CanvasNew)
    RT_PROP("Width", "i64", CanvasWidth, none)
    RT_PROP("Height", "i64", CanvasHeight, none)
    RT_PROP("ShouldClose", "i64", CanvasShouldClose, none)
    RT_METHOD("Flip", "void()", CanvasFlip)
    RT_METHOD("Clear", "void(i64)", CanvasClear)
    RT_METHOD("Line", "void(i64,i64,i64,i64,i64)", CanvasLine)
    RT_METHOD("Box", "void(i64,i64,i64,i64,i64)", CanvasBox)
    RT_METHOD("Frame", "void(i64,i64,i64,i64,i64)", CanvasFrame)
    RT_METHOD("Disc", "void(i64,i64,i64,i64)", CanvasDisc)
    RT_METHOD("Ring", "void(i64,i64,i64,i64)", CanvasRing)
    RT_METHOD("Plot", "void(i64,i64,i64)", CanvasPlot)
    RT_METHOD("Poll", "i64()", CanvasPoll)
    RT_METHOD("KeyHeld", "i64(i64)", CanvasKeyHeld)
RT_CLASS_END()

// Viper.Graphics.Color - color utilities
RT_CLASS_BEGIN("Viper.Graphics.Color", Color, "obj", none)
    RT_METHOD("RGB", "i64(i64,i64,i64)", ColorRGB)
    RT_METHOD("RGBA", "i64(i64,i64,i64,i64)", ColorRGBA)
RT_CLASS_END()

// Viper.DateTime - static utility class
RT_CLASS_BEGIN("Viper.DateTime", DateTime, "obj", none)
    RT_METHOD("Now", "i64()", DateTimeNow)
    RT_METHOD("NowMs", "i64()", DateTimeNowMs)
    RT_METHOD("Year", "i64(i64)", DateTimeYear)
    RT_METHOD("Month", "i64(i64)", DateTimeMonth)
    RT_METHOD("Day", "i64(i64)", DateTimeDay)
    RT_METHOD("Hour", "i64(i64)", DateTimeHour)
    RT_METHOD("Minute", "i64(i64)", DateTimeMinute)
    RT_METHOD("Second", "i64(i64)", DateTimeSecond)
    RT_METHOD("DayOfWeek", "i64(i64)", DateTimeDayOfWeek)
    RT_METHOD("Format", "str(i64,str)", DateTimeFormat)
    RT_METHOD("ToISO", "str(i64)", DateTimeToISO)
    RT_METHOD("Create", "i64(i64,i64,i64,i64,i64,i64)", DateTimeCreate)
    RT_METHOD("AddSeconds", "i64(i64,i64)", DateTimeAddSeconds)
    RT_METHOD("AddDays", "i64(i64,i64)", DateTimeAddDays)
    RT_METHOD("Diff", "i64(i64,i64)", DateTimeDiff)
RT_CLASS_END()

// Viper.Terminal - terminal I/O, cursor control, and keyboard input
RT_CLASS_BEGIN("Viper.Terminal", Terminal, "obj", none)
    // Output with newline
    RT_METHOD("Say", "void(str)", TermSay)
    RT_METHOD("SayInt", "void(i64)", TermSayInt)
    RT_METHOD("SayNum", "void(f64)", TermSayNum)
    RT_METHOD("SayBool", "void(i1)", TermSayBool)
    // Output without newline
    RT_METHOD("Print", "void(str)", TermPrint)
    RT_METHOD("PrintInt", "void(i64)", TermPrintInt)
    RT_METHOD("PrintNum", "void(f64)", TermPrintNum)
    // Input
    RT_METHOD("Ask", "str(str)", TermAsk)
    RT_METHOD("ReadLine", "str()", TermReadLine)
    RT_METHOD("InKey", "str()", TermInKey)
    RT_METHOD("GetKey", "str()", TermGetKey)
    RT_METHOD("GetKeyTimeout", "str(i64)", TermGetKeyTimeout)
    // Screen control
    RT_METHOD("Clear", "void()", TermClear)
    RT_METHOD("SetColor", "void(i64,i64)", TermSetColor)
    RT_METHOD("SetPosition", "void(i64,i64)", TermSetPosition)
    RT_METHOD("SetCursorVisible", "void(i64)", TermSetCursorVisible)
    RT_METHOD("SetAltScreen", "void(i64)", TermSetAltScreen)
    RT_METHOD("Bell", "void()", TermBell)
    // Buffering control
    RT_METHOD("BeginBatch", "void()", TermBeginBatch)
    RT_METHOD("EndBatch", "void()", TermEndBatch)
    RT_METHOD("Flush", "void()", TermFlush)
RT_CLASS_END()

// Viper.Time - static utility class
RT_CLASS_BEGIN("Viper.Time", Time, "obj", none)
    RT_METHOD("SleepMs", "void(i64)", TimeSleepMs)
    RT_METHOD("GetTickCount", "i64()", TimeGetTickCount)
RT_CLASS_END()
