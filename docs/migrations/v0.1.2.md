# IL v0.1.2 Migration

v0.1.2 introduces block parameters and branch argument lists, replacing explicit Ï†-nodes.

## Summary
- Blocks may declare parameters: `L(%x: i64, %p: ptr):`
- `br` and `cbr` pass arguments: `br L(%a, %b)` and `cbr %cond, T(%a), F(%b)`
- Shorthand `br L` and `cbr %cond, T, F` remain valid for zero arguments.

On entry, parameters are bound to the supplied values. Each predecessor must pass exactly the number of arguments declared with matching types.

## Rationale
Block parameters model SSA join points directly and remove the need for separate Ï†-nodes.

## Example
Old (v0.1.1):

```il
entry:
  br L
L:
  %x = add %a, %b ; requires a Ï†-node in predecessors
  ret %x
```

New (v0.1.2):

```il
entry:
  br L(%a, %b)
L(%x: i64, %y: i64):
  %z = add %x, %y
  ret %z
```

Existing v0.1.1 modules continue to parse under v0.1.2.

## What you'll see change

`ilc il-opt` now applies `mem2reg,constfold,peephole,dce` by default. Use
`--no-mem2reg` to skip promotion.

Example:

```il
il 0.1.2
func @main() -> i64 {
entry:
  %t0 = alloca 8
  store i64 %t0, 1
  %t1 = load i64 %t0
  ret %t1
}
```

After `ilc il-opt`:

```il
il 0.1.2
func @main() -> i64 {
entry:
  ret 1
}
```
