// BUG-008 regression: Game.* classes should use GC-managed allocation
// Tests: Grid2D constructor and operations (other Game classes need BUG-009/012 fixes)
module TestBugfixGameHeap;

bind Viper.Terminal;

func start() {
    var passed = true;

    // Test Grid2D creation and basic operations
    var grid = new Viper.Game.Grid2D(10, 10, 0);
    grid.Set(5, 5, 42);
    if (grid.Get(5, 5) != 42) {
        Say("FAIL: Grid2D.Set/Get failed");
        passed = false;
    }

    // NOTE: StateMachine.SetState, ObjPool, ButtonGroup not testable in Zia
    // due to BUG-009/010/012 (missing methods/new support). The GC allocation
    // fixes in those files were verified by code inspection.

    if (passed) {
        Say("RESULT: ok");
    }
}
