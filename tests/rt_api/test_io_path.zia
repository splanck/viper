module TestIoPath;
bind Viper.IO.Path;
bind Viper.IO.File;
bind Viper.IO.Dir;
bind Viper.Terminal;

func start() {
    Say(Combine("a", "b"));
    Say(GetExtension("file.txt"));
    Say(GetFileName("dir/file.txt"));
    Say(GetFileNameNoExt("dir/file.txt"));
    Say(GetDirectory("dir/file.txt"));
    SayBool(HasExtension("file.txt"));
    SayBool(HasExtension("file"));
    Say(ChangeExtension("file.txt", ".md"));
    SayBool(IsAbsolute("C:\\foo"));
    SayBool(IsAbsolute("foo"));
    Say(Normalize("a/b/../c"));

    // File write/read round-trip
    var tmp = "_rt_api_test_tmp.txt";
    WriteAllText(tmp, "hello from viper");
    SayBool(Exists(tmp));
    Say(ReadAllText(tmp));
    SayInt(Size(tmp));
    AppendAllText(tmp, "!");
    Say(ReadAllText(tmp));
    Delete(tmp);
    SayBool(Viper.IO.File.Exists(tmp));

    // Dir
    SayBool(Viper.IO.Dir.Exists("."));
    Say("done");
}
