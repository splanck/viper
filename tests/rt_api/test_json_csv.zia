module TestJsonCsv;
bind Viper.Text.Json;
bind Viper.Text.Uuid;
bind Viper.Text.Version;
bind Viper.Terminal;

func start() {
    var j = Parse("{\"name\":\"viper\",\"ver\":1}");
    Say(GetStr(j, "name"));
    SayInt(GetInt(j, "ver"));
    SayBool(Has(j, "name"));
    SayBool(Has(j, "missing"));
    var js = Stringify(j);
    SayBool(Viper.String.Has(js, "viper"));

    var j2 = NewObject();
    SetStr(j2, "key", "value");
    SetInt(j2, "num", 42);
    SetBool(j2, "flag", true);
    Say(GetStr(j2, "key"));
    SayInt(GetInt(j2, "num"));
    SayBool(GetBool(j2, "flag"));
    Say(Stringify(j2));

    // Uuid
    var u1 = V4();
    SayBool(Viper.String.Has(u1, "-"));
    var u2 = V4();
    SayBool(u1 != u2);

    // Version
    Say(Viper.Text.Version.Parse("1.2.3"));
    SayInt(Compare("1.2.3", "1.3.0"));
    SayInt(Compare("2.0.0", "1.9.9"));
    SayBool(IsValid("1.2.3"));
    SayBool(IsValid("abc"));
    SayInt(Major("1.2.3"));
    SayInt(Minor("1.2.3"));
    SayInt(Patch("1.2.3"));

    Say("done");
}
