module TestGuard;

// Test: Guard statements

var passed: Integer = 0;
var failed: Integer = 0;

func check(name: String, actual: Integer, expected: Integer) {
    if (actual == expected) {
        passed = passed + 1;
    } else {
        failed = failed + 1;
        Viper.Terminal.Say("FAIL: " + name + " - expected " + Viper.Strings.FromInt(expected) + ", got " + Viper.Strings.FromInt(actual));
    }
}

func start() {
    Viper.Terminal.Say("=== Guard Statement Tests ===");

    // Guard with return
    var result: Integer = guardHelper(5);
    check("Guard pass", result, 10);

    result = guardHelper(-5);
    check("Guard fail", result, 0);

    // Report results
    Viper.Terminal.Say("=== Results ===");
    Viper.Terminal.Say("Passed: " + Viper.Strings.FromInt(passed));
    Viper.Terminal.Say("Failed: " + Viper.Strings.FromInt(failed));

    if (failed == 0) {
        Viper.Terminal.Say("RESULT: ok");
    } else {
        Viper.Terminal.Say("RESULT: fail");
    }
}

func guardHelper(x: Integer) -> Integer {
    guard x > 0 else {
        return 0;
    }
    return x * 2;
}
