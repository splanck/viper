module TestGenericsValueType;

value Wrapper[T] {
    expose T inner;

    expose func init(v: T) {
        inner = v;
    }

    expose func get() -> T {
        return inner;
    }

    expose func set(v: T) {
        inner = v;
    }
}

func start() {
    var w: Wrapper[Integer] = new Wrapper[Integer](42);
    if (w.get() == 42) {
        w.set(100);
        if (w.get() == 100) {
            Viper.Terminal.Say("RESULT: ok");
        } else {
            Viper.Terminal.Say("RESULT: fail - set didn't work");
        }
    } else {
        Viper.Terminal.Say("RESULT: fail - initial value wrong");
    }
}
